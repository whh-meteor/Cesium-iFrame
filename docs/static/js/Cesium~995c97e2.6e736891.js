(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~995c97e2"],{"1c25":function(e,t,n){"use strict";var i=n("be18"),r=n("2f63"),a=n("bef8"),o=n("c52f"),s=n("66bf"),c=n("df07"),u=n("188e"),l=n("9a9c"),h=n("cef5"),d=n("9541"),m=n("535a"),p=n("d940"),g=n("52f0"),f=n("3a8e"),_=n("894b"),y=n("e994");let b=new a["a"];function O(e){const t=y["a"].fromToken(e.token),n=Object(m["a"])(e.minimumHeight,0),r=Object(m["a"])(e.maximumHeight,0),a=Object(m["a"])(e.ellipsoid,o["a"].WGS84);this.s2Cell=t,this.minimumHeight=n,this.maximumHeight=r,this.ellipsoid=a;const s=C(t,n,r,a);this._boundingPlanes=s;const c=Y(s);let u;for(this._vertices=c,this._edgeNormals=new Array(6),this._edgeNormals[0]=G(s[0],c.slice(0,4)),u=0;u<4;u++)this._edgeNormals[0][u]=i["a"].negate(this._edgeNormals[0][u],this._edgeNormals[0][u]);for(this._edgeNormals[1]=G(s[1],c.slice(4,8)),u=0;u<4;u++)this._edgeNormals[2+u]=G(s[2+u],[c[u%4],c[(u+1)%4],c[4+(u+1)%4],c[4+u]]);for(this._planeVertices=[this._vertices.slice(0,4),this._vertices.slice(4,8)],u=0;u<4;u++)this._planeVertices.push([this._vertices[u%4],this._vertices[(u+1)%4],this._vertices[4+(u+1)%4],this._vertices[4+u]]);const l=t.getCenter();b=a.cartesianToCartographic(l,b),b.height=(r+n)/2,this.center=a.cartographicToCartesian(b,l),this._boundingSphere=h["a"].fromPoints(c)}const w=new i["a"],x=new a["a"],P=new i["a"],v=new a["a"],I=new i["a"],S=new i["a"],j=new i["a"],N=new i["a"];function C(e,t,n,r){const a=new Array(6),o=e.getCenter(),s=r.geodeticSurfaceNormal(o,w),c=r.cartesianToCartographic(o,x);c.height=n;const l=r.cartographicToCartesian(c,P),h=u["a"].fromPointNormal(l,s);a[0]=h;let d,m=0;const p=[];let g,f;for(d=0;d<4;d++){g=e.getVertex(d),p[d]=g,f=r.cartesianToCartographic(g,v),f.height=t;const n=u["a"].getPointDistance(h,r.cartographicToCartesian(f,I));n<m&&(m=n)}const _=u["a"].clone(h);for(_.normal=i["a"].negate(_.normal,_.normal),_.distance=-1*_.distance+m,a[1]=_,d=0;d<4;d++){g=p[d];const e=p[(d+1)%4],t=r.geodeticSurfaceNormal(g,S),n=i["a"].subtract(e,g,N);let o=i["a"].cross(n,t,j);o=i["a"].normalize(o,o),a[2+d]=u["a"].fromPointNormal(g,o)}return a}let E=new i["a"],T=new i["a"],B=new i["a"],D=new i["a"],F=new i["a"],R=new i["a"];const A=new i["a"],L=new i["a"],M=new i["a"];let k=new i["a"],q=new i["a"],H=new i["a"],U=new i["a"];const V=new c["a"];function z(e,t,n){E=e.normal,T=t.normal,B=n.normal,D=i["a"].multiplyByScalar(e.normal,-e.distance,D),F=i["a"].multiplyByScalar(t.normal,-t.distance,F),R=i["a"].multiplyByScalar(n.normal,-n.distance,R),k=i["a"].multiplyByScalar(i["a"].cross(T,B,A),i["a"].dot(D,E),k),q=i["a"].multiplyByScalar(i["a"].cross(B,E,L),i["a"].dot(F,T),q),H=i["a"].multiplyByScalar(i["a"].cross(E,T,M),i["a"].dot(R,B),H),V[0]=E.x,V[1]=T.x,V[2]=B.x,V[3]=E.y,V[4]=T.y,V[5]=B.y,V[6]=E.z,V[7]=T.z,V[8]=B.z;const r=c["a"].determinant(V);return U=i["a"].add(k,q,U),U=i["a"].add(U,H,U),new i["a"](U.x/r,U.y/r,U.z/r)}function Y(e){const t=new Array(8);for(let n=0;n<4;n++)t[n]=z(e[0],e[2+(n+3)%4],e[2+n%4]),t[n+4]=z(e[1],e[2+(n+3)%4],e[2+n%4]);return t}let W=new i["a"],X=new i["a"];function G(e,t){const n=[];for(let r=0;r<4;r++)W=i["a"].subtract(t[(r+1)%4],t[r],W),X=i["a"].cross(e.normal,W,X),X=i["a"].normalize(X,X),n[r]=i["a"].clone(X);return n}Object.defineProperties(O.prototype,{boundingVolume:{get:function(){return this}},boundingSphere:{get:function(){return this._boundingSphere}}});const J=new i["a"];O.prototype.distanceToCamera=function(e){const t=e.camera.positionWC,n=[],r=[];let a,o,s,c,l;for(u["a"].getPointDistance(this._boundingPlanes[0],t)>0?(n.push(0),r.push(this._planeVertices[0]),a=this._edgeNormals[0]):u["a"].getPointDistance(this._boundingPlanes[1],t)>0&&(n.push(1),r.push(this._planeVertices[1]),a=this._edgeNormals[1]),o=0;o<4;o++)s=2+o,u["a"].getPointDistance(this._boundingPlanes[s],t)>0&&(n.push(s),r.push(this._planeVertices[s]),a=this._edgeNormals[s]);if(0===n.length)return 0;if(1===n.length)return l=this._boundingPlanes[n[0]],c=ee(u["a"].projectPointOntoPlane(l,t,J),r[0],l,a),i["a"].distance(c,t);if(2===n.length){if(0===n[0]){const e=[this._vertices[4*n[0]+(n[1]-2)],this._vertices[4*n[0]+(n[1]-2+1)%4]];return c=$(t,e[0],e[1]),i["a"].distance(c,t)}let e,a=Number.MAX_VALUE;for(o=0;o<2;o++)l=this._boundingPlanes[n[o]],c=ee(u["a"].projectPointOntoPlane(l,t,J),r[o],l,this._edgeNormals[n[o]]),e=i["a"].distanceSquared(c,t),e<a&&(a=e);return Math.sqrt(a)}if(n.length>3)return c=ee(u["a"].projectPointOntoPlane(this._boundingPlanes[1],t,J),this._planeVertices[1],this._boundingPlanes[1],this._edgeNormals[1]),i["a"].distance(c,t);const h=2===n[1]&&5===n[2]?0:1;return 0===n[0]?i["a"].distance(t,this._vertices[(n[1]-2+h)%4]):i["a"].distance(t,this._vertices[4+(n[1]-2+h)%4])};const K=new i["a"],Z=new i["a"];function $(e,t,n){const r=i["a"].subtract(n,t,K),a=i["a"].subtract(e,t,Z);let o=i["a"].dot(r,a);if(o<=0)return t;const s=i["a"].dot(r,r);return o>=s?n:(o/=s,new i["a"]((1-o)*t.x+o*n.x,(1-o)*t.y+o*n.y,(1-o)*t.z+o*n.z))}const Q=new u["a"](i["a"].UNIT_X,0);function ee(e,t,n,a){let o,s,c,l=Number.MAX_VALUE;for(let r=0;r<t.length;r++){const n=u["a"].fromPointNormal(t[r],a[r],Q),h=u["a"].getPointDistance(n,e);h<0||(c=$(e,t[r],t[(r+1)%4]),o=i["a"].distance(e,c),o<l&&(l=o,s=c))}return Object(r["a"])(s)?s:e}O.prototype.intersectPlane=function(e){let t=0,n=0;for(let r=0;r<this._vertices.length;r++){const a=i["a"].dot(e.normal,this._vertices[r])+e.distance;a<0?n++:t++}return t===this._vertices.length?s["a"].INSIDE:n===this._vertices.length?s["a"].OUTSIDE:s["a"].INTERSECTING},O.prototype.createDebugVolume=function(e){const t=new g["a"].clone(g["a"].IDENTITY),n=new l["a"]({polygonHierarchy:{positions:this._planeVertices[0]}}),i=l["a"].createGeometry(n),r=new p["a"]({geometry:i,id:"outline",modelMatrix:t,attributes:{color:d["a"].fromColor(e)}}),a=new l["a"]({polygonHierarchy:{positions:this._planeVertices[1]}}),o=l["a"].createGeometry(a),s=new p["a"]({geometry:o,id:"outline",modelMatrix:t,attributes:{color:d["a"].fromColor(e)}}),c=[];for(let u=0;u<4;u++){const n=new l["a"]({polygonHierarchy:{positions:this._planeVertices[2+u]}}),i=l["a"].createGeometry(n);c[u]=new p["a"]({geometry:i,id:"outline",modelMatrix:t,attributes:{color:d["a"].fromColor(e)}})}return new _["a"]({geometryInstances:[c[0],c[1],c[2],c[3],s,r],appearance:new f["a"]({translucent:!1,flat:!0}),asynchronous:!1})},t["a"]=O},"1ec0":function(e,t,n){"use strict";var i=n("cef5"),r=n("be18"),a=n("bef8"),o=n("9541"),s=n("535a"),c=n("2f63"),u=n("c52f"),l=n("d940"),h=n("5410"),d=n("52f0"),m=n("78e5"),p=n("188e"),g=n("2ac3"),f=n("eace"),_=n("24a2"),y=n("3a8e"),b=n("894b"),O=n("a307");function w(e){this.rectangle=f["a"].clone(e.rectangle),this.minimumHeight=Object(s["a"])(e.minimumHeight,0),this.maximumHeight=Object(s["a"])(e.maximumHeight,0),this.southwestCornerCartesian=new r["a"],this.northeastCornerCartesian=new r["a"],this.westNormal=new r["a"],this.southNormal=new r["a"],this.eastNormal=new r["a"],this.northNormal=new r["a"];const t=Object(s["a"])(e.ellipsoid,u["a"].WGS84);B(this,e.rectangle,t),this._orientedBoundingBox=void 0,this._boundingSphere=void 0,Object(s["a"])(e.computeBoundingVolumes,!0)&&this.computeBoundingVolumes(t)}Object.defineProperties(w.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),w.prototype.computeBoundingVolumes=function(e){this._orientedBoundingBox=m["a"].fromRectangle(this.rectangle,this.minimumHeight,this.maximumHeight,e),this._boundingSphere=i["a"].fromOrientedBoundingBox(this._orientedBoundingBox)};const x=new r["a"],P=new r["a"],v=new r["a"],I=new r["a"],S=new r["a"],j=new r["a"],N=new r["a"],C=new a["a"],E=new p["a"](r["a"].UNIT_X,0),T=new g["a"];function B(e,t,n){n.cartographicToCartesian(f["a"].southwest(t),e.southwestCornerCartesian),n.cartographicToCartesian(f["a"].northeast(t),e.northeastCornerCartesian),C.longitude=t.west,C.latitude=.5*(t.south+t.north),C.height=0;const i=n.cartographicToCartesian(C,j),a=r["a"].cross(i,r["a"].UNIT_Z,I);r["a"].normalize(a,e.westNormal),C.longitude=t.east;const o=n.cartographicToCartesian(C,N),s=r["a"].cross(r["a"].UNIT_Z,o,x);r["a"].normalize(s,e.eastNormal);let c=r["a"].subtract(i,o,x);0===r["a"].magnitude(c)&&(c=r["a"].clone(a,c));const u=r["a"].normalize(c,S),l=t.south;let d;if(l>0){C.longitude=.5*(t.west+t.east),C.latitude=l;const i=n.cartographicToCartesian(C,T.origin);r["a"].clone(u,T.direction);const a=p["a"].fromPointNormal(e.southwestCornerCartesian,e.westNormal,E);h["a"].rayPlane(T,a,e.southwestCornerCartesian),d=n.geodeticSurfaceNormal(i,P)}else d=n.geodeticSurfaceNormalCartographic(f["a"].southeast(t),P);const m=r["a"].cross(d,c,v);r["a"].normalize(m,e.southNormal);const g=t.north;let _;if(g<0){C.longitude=.5*(t.west+t.east),C.latitude=g;const i=n.cartographicToCartesian(C,T.origin);r["a"].negate(u,T.direction);const a=p["a"].fromPointNormal(e.northeastCornerCartesian,e.eastNormal,E);h["a"].rayPlane(T,a,e.northeastCornerCartesian),_=n.geodeticSurfaceNormal(i,P)}else _=n.geodeticSurfaceNormalCartographic(f["a"].northwest(t),P);const y=r["a"].cross(c,_,v);r["a"].normalize(y,e.northNormal)}const D=new r["a"],F=new r["a"],R=new r["a"](0,-1,0),A=new r["a"](0,0,-1),L=new r["a"];function M(e,t){const n=t.camera,i=n.positionWC,a=n.positionCartographic;let o,s,c,u=0;if(!f["a"].contains(e.rectangle,a)){let n=e.southwestCornerCartesian,a=e.northeastCornerCartesian,o=e.westNormal,s=e.southNormal,c=e.eastNormal,l=e.northNormal;t.mode!==O["a"].SCENE3D&&(n=t.mapProjection.project(f["a"].southwest(e.rectangle),D),n.z=n.y,n.y=n.x,n.x=0,a=t.mapProjection.project(f["a"].northeast(e.rectangle),F),a.z=a.y,a.y=a.x,a.x=0,o=R,c=r["a"].UNIT_Y,s=A,l=r["a"].UNIT_Z);const h=r["a"].subtract(i,n,L),d=r["a"].dot(h,o),m=r["a"].dot(h,s),p=r["a"].subtract(i,a,L),g=r["a"].dot(p,c),_=r["a"].dot(p,l);d>0?u+=d*d:g>0&&(u+=g*g),m>0?u+=m*m:_>0&&(u+=_*_)}if(t.mode===O["a"].SCENE3D?(o=a.height,s=e.minimumHeight,c=e.maximumHeight):(o=i.x,s=0,c=0),o>c){const e=o-c;u+=e*e}else if(o<s){const e=s-o;u+=e*e}return Math.sqrt(u)}w.prototype.distanceToCamera=function(e){const t=M(this,e);if(e.mode===O["a"].SCENE3D&&Object(c["a"])(this._orientedBoundingBox)){const n=Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC));return Math.max(t,n)}return t},w.prototype.intersectPlane=function(e){return this._orientedBoundingBox.intersectPlane(e)},w.prototype.createDebugVolume=function(e){const t=new d["a"].clone(d["a"].IDENTITY),n=new _["a"]({rectangle:this.rectangle,height:this.minimumHeight,extrudedHeight:this.maximumHeight}),i=new l["a"]({geometry:n,id:"outline",modelMatrix:t,attributes:{color:o["a"].fromColor(e)}});return new b["a"]({geometryInstances:i,appearance:new y["a"]({translucent:!1,flat:!0}),asynchronous:!1})},t["a"]=w},3995:function(e,t,n){"use strict";var i=n("7d62");function r(e,t,n,i){this._tileset=e,this._tile=t,this._resource=n,this.featurePropertiesDirty=!1,this._metadata=void 0,this._group=void 0,this._readyPromise=a(this,i)}function a(e,t){return e._tileset.loadTileset(e._resource,t,e._tile),Promise.resolve(e)}Object.defineProperties(r.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},group:{get:function(){return this._group},set:function(e){this._group=e}}}),r.prototype.hasProperty=function(e,t){return!1},r.prototype.getFeature=function(e){},r.prototype.applyDebugSettings=function(e,t){},r.prototype.applyStyle=function(e){},r.prototype.update=function(e,t){},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){return Object(i["a"])(this)},t["a"]=r},"3a92":function(e,t,n){"use strict";var i=n("2f63");function r(){this.head=void 0,this.tail=void 0,this.count=0,this._lastBeforeStartOfFrame=void 0}function a(e,t){const n=t.replacementPrevious,i=t.replacementNext;t===e._lastBeforeStartOfFrame&&(e._lastBeforeStartOfFrame=i),t===e.head?e.head=i:n.replacementNext=i,t===e.tail?e.tail=n:i.replacementPrevious=n,t.replacementPrevious=void 0,t.replacementNext=void 0,--e.count}r.prototype.markStartOfRenderFrame=function(){this._lastBeforeStartOfFrame=this.head},r.prototype.trimTiles=function(e){let t=this.tail,n=!0;while(n&&Object(i["a"])(this._lastBeforeStartOfFrame)&&this.count>e&&Object(i["a"])(t)){n=t!==this._lastBeforeStartOfFrame;const e=t.replacementPrevious;t.eligibleForUnloading&&(t.freeResources(),a(this,t)),t=e}},r.prototype.markTileRendered=function(e){const t=this.head;if(t!==e){if(++this.count,!Object(i["a"])(t))return e.replacementPrevious=void 0,e.replacementNext=void 0,this.head=e,void(this.tail=e);(Object(i["a"])(e.replacementPrevious)||Object(i["a"])(e.replacementNext))&&a(this,e),e.replacementPrevious=void 0,e.replacementNext=t,t.replacementPrevious=e,this.head=e}else e===this._lastBeforeStartOfFrame&&(this._lastBeforeStartOfFrame=e.replacementNext)},t["a"]=r},"5d12":function(e,t,n){"use strict";var i=n("535a"),r=n("2f63"),a=n("72b0");function o(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT);const t=e.tileset,n=e.class,a=Object(r["a"])(t.properties)?t.properties:{};this._class=n,this._properties=a,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(o.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),o.prototype.hasProperty=function(e){return a["a"].hasProperty(e,this._properties,this._class)},o.prototype.hasPropertyBySemantic=function(e){return a["a"].hasPropertyBySemantic(e,this._properties,this._class)},o.prototype.getPropertyIds=function(e){return a["a"].getPropertyIds(this._properties,this._class,e)},o.prototype.getProperty=function(e){return a["a"].getProperty(e,this._properties,this._class)},o.prototype.setProperty=function(e,t){return a["a"].setProperty(e,t,this._properties,this._class)},o.prototype.getPropertyBySemantic=function(e){return a["a"].getPropertyBySemantic(e,this._properties,this._class)},o.prototype.setPropertyBySemantic=function(e,t){return a["a"].setPropertyBySemantic(e,t,this._properties,this._class)},t["a"]=o},"663d":function(e,t,n){"use strict";var i=n("2f63"),r=n("dddf");function a(e,t,n){this.readyImagery=void 0,this.loadingImagery=e,this.textureCoordinateRectangle=t,this.textureTranslationAndScale=void 0,this.useWebMercatorT=n}a.prototype.freeResources=function(){Object(i["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),Object(i["a"])(this.loadingImagery)&&this.loadingImagery.releaseReference()},a.prototype.processStateMachine=function(e,t,n){const a=this.loadingImagery,o=a.imageryLayer;if(a.processStateMachine(t,!this.useWebMercatorT,n),a.state===r["a"].READY)return Object(i["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=this.loadingImagery,this.loadingImagery=void 0,this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this),!0;let s,c=a.parent;while(Object(i["a"])(c)&&(c.state!==r["a"].READY||!this.useWebMercatorT&&!Object(i["a"])(c.texture)))c.state!==r["a"].FAILED&&c.state!==r["a"].INVALID&&(s=s||c),c=c.parent;return this.readyImagery!==c&&(Object(i["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=c,Object(i["a"])(c)&&(c.addReference(),this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this))),(a.state===r["a"].FAILED||a.state===r["a"].INVALID)&&(!Object(i["a"])(s)||(s.processStateMachine(t,!this.useWebMercatorT,n),!1))},t["a"]=a},"72c2":function(e,t,n){"use strict";var i=n("2bb9"),r=n("535a"),a=n("2f63"),o=n("7d62"),s=n("21d7"),c=n("ddf7"),u=n("5ed2"),l=n("93da"),h=n("52f0"),d=n("d4ed"),m=n("43ee"),p=n("3443"),g=n("2ab8"),f=n("7b4a"),_=n("a307"),y=n("c86b");function b(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),this.show=Object(r["a"])(e.show,!0),this.modelMatrix=h["a"].clone(Object(r["a"])(e.modelMatrix,h["a"].IDENTITY)),this.shadows=Object(r["a"])(e.shadows,y["a"].ENABLED),this.maximumMemoryUsage=Object(r["a"])(e.maximumMemoryUsage,256),this.shading=new f["a"](e.shading),this.style=e.style,this.frameFailed=new s["a"],this.frameChanged=new s["a"],this._clock=e.clock,this._intervals=e.intervals,this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._pointCloudEyeDomeLighting=new g["a"],this._loadTimestamp=void 0,this._clippingPlanesState=0,this._styleDirty=!1,this._pickId=void 0,this._totalMemoryUsageInBytes=0,this._frames=[],this._previousInterval=void 0,this._nextInterval=void 0,this._lastRenderedFrame=void 0,this._clockMultiplier=0,this._resolveReadyPromise=void 0;const t=this;this._readyPromise=new Promise((function(e){t._resolveReadyPromise=e})),this._runningSum=0,this._runningLength=0,this._runningIndex=0,this._runningSamples=new Array(5).fill(0),this._runningAverage=0}function O(e){return"uniform vec4 czm_pickColor;\n"+e}function w(e){return function(t){return Object(i["a"])(t,{czm_pickColor:function(){return e._pickId.color}})}}function x(){return"czm_pickColor"}Object.defineProperties(b.prototype,{clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){m["a"].setOwner(e,this,"_clippingPlanes")}},totalMemoryUsageInBytes:{get:function(){return this._totalMemoryUsageInBytes}},boundingSphere:{get:function(){if(Object(a["a"])(this._lastRenderedFrame))return this._lastRenderedFrame.pointCloud.boundingSphere}},readyPromise:{get:function(){return this._readyPromise}}}),b.prototype.makeStyleDirty=function(){this._styleDirty=!0},b.prototype._getAverageLoadTime=function(){return 0===this._runningLength?.05:this._runningAverage};const P=new u["a"];function v(e){const t=e._clock,n=t.canAnimate&&t.shouldAnimate,i=t.multiplier;return n?i:0}function I(e,t){return e._intervals.indexOf(t.start)}function S(e,t){const n=e._intervals,i=e._clock,r=v(e);if(0===r)return;const a=e._getAverageLoadTime(),o=u["a"].addSeconds(i.currentTime,a*r,P);let s=n.indexOf(o);const c=I(e,t);return s===c&&(r>=0?++s:--s),n.get(s)}function j(e){const t=e._intervals,n=e._clock,i=n.currentTime,r=t.indexOf(i);return t.get(r)}function N(e,t,n){const i=v(e),r=I(e,t),a=I(e,n);return i>=0?r>=a:r<=a}function C(e,t){return function(n){const i=Object(a["a"])(n.message)?n.message:n.toString();e.frameFailed.numberOfListeners>0?e.frameFailed.raiseEvent({uri:t,message:i}):(console.log("A frame failed to load: "+t),console.log("Error: "+i))}}function E(e,t,n){const i=I(e,t),r=e._frames;let o=r[i];if(!Object(a["a"])(o)){const s=t.data.transform,u=Object(a["a"])(s)?h["a"].fromArray(s):void 0,l=t.data.uri;o={pointCloud:void 0,transform:u,timestamp:Object(c["a"])(),sequential:!0,ready:!1,touchedFrameNumber:n.frameNumber},r[i]=o,d["a"].fetchArrayBuffer({url:l}).then((function(t){return o.pointCloud=new p["a"]({arrayBuffer:t,cull:!0,fragmentShaderLoaded:O,uniformMapLoaded:w(e),pickIdLoaded:x}),o.pointCloud.readyPromise})).catch(C(e,l))}return o}function T(e,t){e._runningSum+=t,e._runningSum-=e._runningSamples[e._runningIndex],e._runningSamples[e._runningIndex]=t,e._runningLength=Math.min(e._runningLength+1,e._runningSamples.length),e._runningIndex=(e._runningIndex+1)%e._runningSamples.length,e._runningAverage=e._runningSum/e._runningLength}function B(e,t,n,i){t.touchedFrameNumber<i.frameNumber-1&&(t.sequential=!1);const r=t.pointCloud;if(Object(a["a"])(r)&&!t.ready){const a=i.commandList,o=a.length;if(L(e,t,n,i),r.ready&&(t.ready=!0,e._totalMemoryUsageInBytes+=r.geometryByteLength,a.length=o,t.sequential)){const n=(Object(c["a"])()-t.timestamp)/1e3;T(e,n)}}t.touchedFrameNumber=i.frameNumber}const D=new h["a"];function F(e,t){const n=e.shading;return Object(a["a"])(n)&&Object(a["a"])(n.baseResolution)?n.baseResolution:Object(a["a"])(t.boundingSphere)?l["a"].cbrt(t.boundingSphere.volume()/t.pointsLength):0}function R(e){const t=e.shading;return Object(a["a"])(t)&&Object(a["a"])(t.maximumAttenuation)?t.maximumAttenuation:10}const A=new f["a"];function L(e,t,n,i){const a=Object(r["a"])(e.shading,A),o=t.pointCloud,s=Object(r["a"])(t.transform,h["a"].IDENTITY);o.modelMatrix=h["a"].multiplyTransformation(e.modelMatrix,s,D),o.style=e.style,o.time=n.timeSinceLoad,o.shadows=e.shadows,o.clippingPlanes=e._clippingPlanes,o.isClipped=n.isClipped,o.attenuation=a.attenuation,o.backFaceCulling=a.backFaceCulling,o.normalShading=a.normalShading,o.geometricError=F(e,o),o.geometricErrorScale=a.geometricErrorScale,o.maximumAttenuation=R(e),o.update(i),t.touchedFrameNumber=i.frameNumber}function M(e,t,n,i){const r=E(e,t,i);B(e,r,n,i)}function k(e){return function(t){return t.touchedFrameNumber<e.frameNumber}}function q(e,t){const n=e._frames,i=n.length;for(let r=0;r<i;++r){const i=n[r];if(Object(a["a"])(i)&&(!Object(a["a"])(t)||t(i))){const t=i.pointCloud;i.ready&&(e._totalMemoryUsageInBytes-=t.geometryByteLength),Object(a["a"])(t)&&t.destroy(),i===e._lastRenderedFrame&&(e._lastRenderedFrame=void 0),n[r]=void 0}}}function H(e,t){const n=I(e,t),i=e._frames[n];if(Object(a["a"])(i)&&i.ready)return i}function U(e,t,n,i,r){return!!Object(a["a"])(n)&&(!!n.ready||(M(e,t,i,r),n.ready))}function V(e,t,n,i,r){let a,o,s;const c=e._intervals,u=e._frames,l=I(e,n),h=I(e,t);if(l>=h){for(a=l;a>=h;--a)if(o=c.get(a),s=u[a],U(e,o,s,i,r))return o}else for(a=l;a<=h;++a)if(o=c.get(a),s=u[a],U(e,o,s,i,r))return o;return t}function z(e,t,n){const i=e._frames,r=i.length;for(let o=0;o<r;++o){const e=i[o];Object(a["a"])(e)&&Object(a["a"])(e.pointCloud)&&(e.pointCloud.clippingPlanesDirty=t,e.pointCloud.styleDirty=n)}}const Y={timeSinceLoad:0,isClipped:!1,clippingPlanesDirty:!1};b.prototype.update=function(e){if(e.mode===_["a"].MORPHING)return;if(!this.show)return;Object(a["a"])(this._pickId)||(this._pickId=e.context.createPickId({primitive:this})),Object(a["a"])(this._loadTimestamp)||(this._loadTimestamp=u["a"].clone(e.time));const t=Math.max(1e3*u["a"].secondsDifference(e.time,this._loadTimestamp),0),n=this._clippingPlanes;let i=0,r=!1;const o=Object(a["a"])(n)&&n.enabled;o&&(n.update(e),i=n.clippingPlanesState),this._clippingPlanesState!==i&&(this._clippingPlanesState=i,r=!0);const s=this._styleDirty;this._styleDirty=!1,(r||s)&&z(this,r,s),Y.timeSinceLoad=t,Y.isClipped=o;const c=this.shading,l=this._pointCloudEyeDomeLighting,h=e.commandList,d=h.length;let m=this._previousInterval,p=this._nextInterval;const g=j(this);if(!Object(a["a"])(g))return;let f=!1;const y=v(this),b=0===y;y!==this._clockMultiplier&&(f=!0,this._clockMultiplier=y),Object(a["a"])(m)&&!b||(m=g),(!Object(a["a"])(p)||f||N(this,g,p))&&(p=S(this,g)),m=V(this,m,g,Y,e);let O=H(this,m);Object(a["a"])(O)||(M(this,m,Y,e),O=this._lastRenderedFrame),Object(a["a"])(O)&&L(this,O,Y,e),Object(a["a"])(p)&&M(this,p,Y,e);const w=this;Object(a["a"])(O)&&!Object(a["a"])(this._lastRenderedFrame)&&e.afterRender.push((function(){w._resolveReadyPromise(w)})),Object(a["a"])(O)&&O!==this._lastRenderedFrame&&w.frameChanged.numberOfListeners>0&&e.afterRender.push((function(){w.frameChanged.raiseEvent(w)})),this._previousInterval=m,this._nextInterval=p,this._lastRenderedFrame=O;const x=this._totalMemoryUsageInBytes,P=1024*this.maximumMemoryUsage*1024;x>P&&q(this,k(e));const I=h.length,C=I-d;Object(a["a"])(c)&&c.attenuation&&c.eyeDomeLighting&&C>0&&l.update(e,d,c,this.boundingSphere)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return q(this),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),Object(o["a"])(this)},t["a"]=b},7596:function(e,t,n){"use strict";var i=n("535a"),r=n("2f63"),a=n("5ed2"),o=n("de66"),s=n("b82e");function c(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT),this._tileCache={},this._tilesRequestedForInterval=[];const t=this._clock=e.clock;this._times=e.times,this._requestImageFunction=e.requestImageFunction,this._reloadFunction=e.reloadFunction,this._currentIntervalIndex=-1,t.onTick.addEventListener(this._clockOnTick,this),this._clockOnTick(t)}function u(e,t,n){return`${e}-${t}-${n}`}function l(e){const t=e.split("-");if(3===t.length)return{x:Number(t[0]),y:Number(t[1]),level:Number(t[2])}}function h(e){const t=e._times;if(!Object(r["a"])(t))return;const n=e._clock,i=n.currentTime,o=n.canAnimate&&n.shouldAnimate,s=n.multiplier;if(!o&&0!==s)return;let c,u=t.indexOf(i);if(u<0)return;const l=t.get(u);return s>0?(c=a["a"].secondsDifference(l.stop,i),++u):(c=a["a"].secondsDifference(l.start,i),--u),c/=s,u>=0&&c<=5?t.get(u):void 0}function d(e,t,n){const i=e._times.indexOf(n.start),a=e._tileCache;let c=a[i];Object(r["a"])(c)||(c=a[i]={});const u=t.key;if(Object(r["a"])(c[u]))return!0;const h=l(u),d=new o["a"]({throttle:!1,throttleByServer:!0,type:s["a"].IMAGERY,priorityFunction:t.priorityFunction}),m=e._requestImageFunction(h.x,h.y,h.level,d,n);return!!Object(r["a"])(m)&&(c[u]={promise:m,request:d},!0)}Object.defineProperties(c.prototype,{clock:{get:function(){return this._clock},set:function(e){this._clock!==e&&(this._clock=e,this._clockOnTick(e),this._reloadFunction())}},times:{get:function(){return this._times},set:function(e){this._times!==e&&(this._times=e,this._clockOnTick(this._clock),this._reloadFunction())}},currentInterval:{get:function(){return this._times.get(this._currentIntervalIndex)}}}),c.prototype.getFromCache=function(e,t,n,i){const a=u(e,t,n);let o;const s=this._tileCache[this._currentIntervalIndex];if(Object(r["a"])(s)&&Object(r["a"])(s[a])){const e=s[a];o=e.promise.catch((function(t){throw i.state=e.request.state,t})),delete s[a]}return o},c.prototype.checkApproachingInterval=function(e,t,n,i){const a=u(e,t,n),o=this._tilesRequestedForInterval,s=h(this),c={key:a,priorityFunction:i.priorityFunction};Object(r["a"])(s)&&d(this,c,s)||o.push(c),o.length>=512&&o.splice(0,256)},c.prototype._clockOnTick=function(e){const t=e.currentTime,n=this._times,i=n.indexOf(t),a=this._currentIntervalIndex;if(i!==a){const e=this._tileCache[a];for(const t in e)e.hasOwnProperty(t)&&e[t].request.cancel();return delete this._tileCache[a],this._tilesRequestedForInterval=[],this._currentIntervalIndex=i,void this._reloadFunction()}const o=h(this);if(Object(r["a"])(o)){const e=this._tilesRequestedForInterval;let t=!0;while(t){if(0===e.length)break;const n=e.pop();t=d(this,n,o),t||e.push(n)}}},t["a"]=c},"8cfb":function(e,t,n){"use strict";var i=n("cef5"),r=n("b081"),a=n("be18"),o=n("9541"),s=n("d940"),c=n("df07"),u=n("52f0"),l=n("93da"),h=n("78e5"),d=n("3a8e"),m=n("894b");const p=new a["a"],g=new a["a"],f=new a["a"],_=new a["a"];function y(e,t,n){n=a["a"].cross(e,t,n);const i=a["a"].magnitude(n);return a["a"].multiplyByScalar(n,l["a"].EPSILON7/i,n)}function b(e,t){const n=a["a"].normalize(e,_),i=a["a"].equalsEpsilon(n,a["a"].UNIT_X,l["a"].EPSILON6)?a["a"].UNIT_Y:a["a"].UNIT_X;return y(e,i,t)}function O(e){let t=c["a"].getColumn(e,0,p),n=c["a"].getColumn(e,1,g),i=c["a"].getColumn(e,2,f);const r=a["a"].equals(t,a["a"].ZERO),o=a["a"].equals(n,a["a"].ZERO),s=a["a"].equals(i,a["a"].ZERO);return r||o||s?r&&o&&s?(e[0]=l["a"].EPSILON7,e[4]=l["a"].EPSILON7,e[8]=l["a"].EPSILON7,e):(!r||o||s?r||!o||s?r||o||!s?r?o?s||(t=b(i,t),n=y(i,t,n)):(t=b(n,t),i=y(n,t,i)):(n=b(t,n),i=y(n,t,i)):i=y(n,t,i):n=y(t,i,n):t=y(n,i,t),c["a"].setColumn(e,0,t,e),c["a"].setColumn(e,1,n,e),c["a"].setColumn(e,2,i,e),e):e}function w(e,t){t=O(t),this._orientedBoundingBox=new h["a"](e,t),this._boundingSphere=i["a"].fromOrientedBoundingBox(this._orientedBoundingBox)}Object.defineProperties(w.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),w.prototype.distanceToCamera=function(e){return Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC))},w.prototype.intersectPlane=function(e){return this._orientedBoundingBox.intersectPlane(e)},w.prototype.update=function(e,t){a["a"].clone(e,this._orientedBoundingBox.center),t=O(t),c["a"].clone(t,this._orientedBoundingBox.halfAxes),i["a"].fromOrientedBoundingBox(this._orientedBoundingBox,this._boundingSphere)},w.prototype.createDebugVolume=function(e){const t=new r["a"]({minimum:new a["a"](-1,-1,-1),maximum:new a["a"](1,1,1)}),n=u["a"].fromRotationTranslation(this.boundingVolume.halfAxes,this.boundingVolume.center),i=new s["a"]({geometry:t,id:"outline",modelMatrix:n,attributes:{color:o["a"].fromColor(e)}});return new m["a"]({geometryInstances:i,appearance:new d["a"]({translucent:!1,flat:!0}),asynchronous:!1})},t["a"]=w},c3f4:function(e,t,n){"use strict";const i={REINHARD:0,MODIFIED_REINHARD:1,FILMIC:2,ACES:3,validate:function(e){return e===i.REINHARD||e===i.MODIFIED_REINHARD||e===i.FILMIC||e===i.ACES}};t["a"]=Object.freeze(i)},e7f1:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("535a"),r=n("72b0");function a(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT);const t=e.tile,n=e.class;this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(a.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.hasProperty=function(e){return r["a"].hasProperty(e,this._properties,this._class)},a.prototype.hasPropertyBySemantic=function(e){return r["a"].hasPropertyBySemantic(e,this._properties,this._class)},a.prototype.getPropertyIds=function(e){return r["a"].getPropertyIds(this._properties,this._class,e)},a.prototype.getProperty=function(e){return r["a"].getProperty(e,this._properties,this._class)},a.prototype.setProperty=function(e,t){return r["a"].setProperty(e,t,this._properties,this._class)},a.prototype.getPropertyBySemantic=function(e){return r["a"].getPropertyBySemantic(e,this._properties,this._class)},a.prototype.setPropertyBySemantic=function(e,t){return r["a"].setPropertyBySemantic(e,t,this._properties,this._class)}},eb1f:function(e,t,n){"use strict";var i=n("cef5"),r=n("be18"),a=n("9541"),o=n("d940"),s=n("93da"),c=n("52f0"),u=n("98f6"),l=n("3a8e"),h=n("894b");function d(e,t){0===t&&(t=s["a"].EPSILON7),this._boundingSphere=new i["a"](e,t)}Object.defineProperties(d.prototype,{center:{get:function(){return this._boundingSphere.center}},radius:{get:function(){return this._boundingSphere.radius}},boundingVolume:{get:function(){return this._boundingSphere}},boundingSphere:{get:function(){return this._boundingSphere}}}),d.prototype.distanceToCamera=function(e){const t=this._boundingSphere;return Math.max(0,r["a"].distance(t.center,e.camera.positionWC)-t.radius)},d.prototype.intersectPlane=function(e){return i["a"].intersectPlane(this._boundingSphere,e)},d.prototype.update=function(e,t){r["a"].clone(e,this._boundingSphere.center),this._boundingSphere.radius=t},d.prototype.createDebugVolume=function(e){const t=new u["a"]({radius:this.radius}),n=c["a"].fromTranslation(this.center,new c["a"].clone(c["a"].IDENTITY)),i=new o["a"]({geometry:t,id:"outline",modelMatrix:n,attributes:{color:a["a"].fromColor(e)}});return new h["a"]({geometryInstances:i,appearance:new l["a"]({translucent:!1,flat:!0}),asynchronous:!1})},t["a"]=d},ed98:function(e,t,n){"use strict";var i=n("670c"),r=n("bef8"),a=n("535a"),o=n("2f63"),s=n("3d7f"),c=n("5d5c"),u=n("eace"),l=n("4ca2"),h=n("d4ed"),d=n("283e"),m=n("a89b"),p=n("d3a0"),g=n("e288");function f(e){let t;e=Object(a["a"])(e,a["a"].EMPTY_OBJECT),this._tmsResource=void 0,this._xmlResource=void 0,this._options=e,this._metadataError=void 0,this._metadataSuccess=this._metadataSuccess.bind(this),this._metadataFailure=this._metadataFailure.bind(this),this._requestMetadata=this._requestMetadata.bind(this);const n=this,i=Promise.resolve(e.url).then((function(e){return t=h["a"].createIfNeeded(e),t.appendForwardSlash(),n._tmsResource=t,n._xmlResource=t.getDerivedResource({url:"tilemapresource.xml"}),n._requestMetadata()})).catch(e=>Promise.reject(e));g["a"].call(this,i),this._promise=i}function _(e,t){return e.west<t.rectangle.west&&(e.west=t.rectangle.west),e.east>t.rectangle.east&&(e.east=t.rectangle.east),e.south<t.rectangle.south&&(e.south=t.rectangle.south),e.north>t.rectangle.north&&(e.north=t.rectangle.north),e}function y(e,t,n){const i=e.positionToTileXY(u["a"].southwest(t),n),r=e.positionToTileXY(u["a"].northeast(t),n),a=(Math.abs(r.x-i.x)+1)*(Math.abs(r.y-i.y)+1);return a>4?0:n}Object(o["a"])(Object.create)&&(f.prototype=Object.create(g["a"].prototype),f.prototype.constructor=f),f.prototype._requestMetadata=function(){return this._xmlResource.fetchXML().then(this._metadataSuccess).catch(e=>e instanceof l["a"]?this._metadataFailure():Promise.reject(e))},f.prototype._metadataSuccess=function(e){const t=/tileformat/i,n=/tileset/i,l=/tilesets/i,h=/boundingbox/i;let g,f,b;const O=[],w=this._xmlResource;let x=this._metadataError;const P=this._requestMetadata,v=e.childNodes[0].childNodes;for(let i=0;i<v.length;i++)if(t.test(v.item(i).nodeName))g=v.item(i);else if(l.test(v.item(i).nodeName)){b=v.item(i);const e=v.item(i).childNodes;for(let t=0;t<e.length;t++)n.test(e.item(t).nodeName)&&O.push(e.item(t))}else h.test(v.item(i).nodeName)&&(f=v.item(i));let I;if(!Object(o["a"])(b)||!Object(o["a"])(f))return I=`Unable to find expected tilesets or bbox attributes in ${w.url}.`,x=m["a"].reportError(x,this,this.errorEvent,I),x.retry?(this._metadataError=x,P()):Promise.reject(new d["a"](I));const S=this._options,j=Object(a["a"])(S.fileExtension,g.getAttribute("extension")),N=Object(a["a"])(S.tileWidth,parseInt(g.getAttribute("width"),10)),C=Object(a["a"])(S.tileHeight,parseInt(g.getAttribute("height"),10));let E=Object(a["a"])(S.minimumLevel,parseInt(O[0].getAttribute("order"),10));const T=Object(a["a"])(S.maximumLevel,parseInt(O[O.length-1].getAttribute("order"),10)),B=b.getAttribute("profile");let D=S.tilingScheme;if(!Object(o["a"])(D))if("geodetic"===B||"global-geodetic"===B)D=new c["a"]({ellipsoid:S.ellipsoid});else{if("mercator"!==B&&"global-mercator"!==B)return I=`${w.url}specifies an unsupported profile attribute, ${B}.`,x=m["a"].reportError(x,this,this.errorEvent,I),x.retry?(this._metadataError=x,P()):Promise.reject(new d["a"](I));D=new p["a"]({ellipsoid:S.ellipsoid})}let F=u["a"].clone(S.rectangle);if(!Object(o["a"])(F)){let e,t,n,o;const c=Object(a["a"])(S.flipXY,!1);c?(n=new i["a"](parseFloat(f.getAttribute("miny")),parseFloat(f.getAttribute("minx"))),o=new i["a"](parseFloat(f.getAttribute("maxy")),parseFloat(f.getAttribute("maxx")))):(n=new i["a"](parseFloat(f.getAttribute("minx")),parseFloat(f.getAttribute("miny"))),o=new i["a"](parseFloat(f.getAttribute("maxx")),parseFloat(f.getAttribute("maxy"))));const l="geodetic"===B||"mercator"===B;if(D.projection instanceof s["a"]||l)e=r["a"].fromDegrees(n.x,n.y),t=r["a"].fromDegrees(o.x,o.y);else{const i=D.projection;e=i.unproject(n),t=i.unproject(o)}F=new u["a"](e.longitude,e.latitude,t.longitude,t.latitude)}F=_(F,D),E=y(D,F,E);const R=this._tmsResource.getDerivedResource({url:"{z}/{x}/{reverseY}."+j});return Promise.resolve({url:R,tilingScheme:D,rectangle:F,tileWidth:N,tileHeight:C,minimumLevel:E,maximumLevel:T,tileDiscardPolicy:S.tileDiscardPolicy,credit:S.credit})},f.prototype._metadataFailure=function(){const e=this._options,t=Object(a["a"])(e.fileExtension,"png"),n=Object(a["a"])(e.tileWidth,256),i=Object(a["a"])(e.tileHeight,256),r=e.maximumLevel,s=Object(o["a"])(e.tilingScheme)?e.tilingScheme:new p["a"]({ellipsoid:e.ellipsoid});let c=Object(a["a"])(e.rectangle,s.rectangle);c=_(c,s);const u=y(s,c,e.minimumLevel),l=this._tmsResource.getDerivedResource({url:"{z}/{x}/{reverseY}."+t});return Promise.resolve({url:l,tilingScheme:s,rectangle:c,tileWidth:n,tileHeight:i,minimumLevel:u,maximumLevel:r,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit})},t["a"]=f},ee78:function(e,t,n){"use strict";const i={NONE:0,CULLED:1,RENDERED:2,REFINED:3,RENDERED_AND_KICKED:6,REFINED_AND_KICKED:7,CULLED_BUT_NEEDED:9,wasKicked:function(e){return e>=i.RENDERED_AND_KICKED},originalResult:function(e){return 3&e},kick:function(e){return 4|e}};t["a"]=i}}]);