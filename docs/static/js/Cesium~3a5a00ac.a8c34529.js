(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~3a5a00ac"],{"49c4":function(e,t,i){"use strict";var n=i("dd06"),s=i("670c"),r=i("be18"),a=i("bef8"),o=i("dc1c"),c=i("bd8d"),l=i("8dfe"),u=i("535a"),h=i("2f63"),d=i("45c5"),m=i("7d62"),_=i("c52f"),p=i("21d7"),f=i("f50f"),g=i("8bd8"),b=i("5ed2"),y=i("7524"),O=i("93da"),S=i("52f0"),L=i("d4ed"),x=i("283e"),T=i("f806"),v=i("f845"),M=i("d289"),E=i("6dc0"),C=i("b08e"),P=i("c0a9"),D=i("656b"),w=i("7abe"),j=i("6d42"),A=i("5d12");function F(e){e=Object(u["a"])(e,u["a"].EMPTY_OBJECT);const t=e.metadataJson,i=e.schema,n=Object(u["a"])(t.metadata,t.tileset);let s;Object(h["a"])(n)&&(s=new A["a"]({tileset:n,class:i.classes[n.class]}));let r=[];const a=[],o=t.groups;if(Array.isArray(o)){const e=o.length;for(let t=0;t<e;t++){const e=o[t];a.push(new j["a"]({group:e,class:i.classes[e.class]}))}}else if(Object(h["a"])(o)){r=Object.keys(o).sort();const e=r.length;for(let t=0;t<e;t++){const e=r[t];if(o.hasOwnProperty(e)){const t=o[e];a.push(new j["a"]({id:e,group:o[e],class:i.classes[t.class]}))}}}this._schema=i,this._groups=a,this._groupIds=r,this._tileset=s,this._statistics=t.statistics,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(F.prototype,{schema:{get:function(){return this._schema}},groups:{get:function(){return this._groups}},groupIds:{get:function(){return this._groupIds}},tileset:{get:function(){return this._tileset}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var k=F,I=i("9f0f"),U=i("d150"),R=i("c4a1"),N=i("8f14");function V(){this._list=new N["a"],this._sentinel=this._list.add(),this._trimTiles=!1}V.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},V.prototype.touch=function(e){const t=e.cacheNode;Object(h["a"])(t)&&this._list.splice(this._sentinel,t)},V.prototype.add=function(e){Object(h["a"])(e.cacheNode)||(e.cacheNode=this._list.add(e))},V.prototype.unloadTile=function(e,t,i){const n=t.cacheNode;Object(h["a"])(n)&&(this._list.remove(n),t.cacheNode=void 0,i(e,t))},V.prototype.unloadTiles=function(e,t){const i=this._trimTiles;this._trimTiles=!1;const n=this._list,s=1024*e.maximumMemoryUsage*1024,r=this._sentinel;let a=n.head;while(a!==r&&(e.totalMemoryUsageInBytes>s||i)){const i=a.item;a=a.next,this.unloadTile(e,i,t)}},V.prototype.trim=function(){this._trimTiles=!0};var B=V;function W(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function q(e,t){let i;return i="_loadTimestamp"===t?b["a"].toDate(e).getTime():e,i}function H(e,t){const i=e.tilePropertyName;if(Object(h["a"])(i)){const n=q(t[i],i);return Object(h["a"])(n)?(e._maximum=Math.max(n,e._maximum),e._minimum=Math.min(n,e._minimum),n):(e.tilePropertyName=void 0,n)}}W.prototype.setReferenceMinimumMaximum=function(e,t,i){this._referenceMinimum[i]=q(e,i),this._referenceMaximum[i]=q(t,i)};const X=[new c["a"](.1,.1,.1,1),new c["a"](.153,.278,.878,1),new c["a"](.827,.231,.49,1),new c["a"](.827,.188,.22,1),new c["a"](1,.592,.259,1),new c["a"](1,.843,0,1)];W.prototype.colorize=function(e,t){const i=this.tilePropertyName;if(!Object(h["a"])(i)||!e.contentAvailable||e._selectedFrame!==t.frameNumber)return;const n=H(this,e),s=this._previousMinimum,r=this._previousMaximum;if(s===Number.MAX_VALUE||r===-Number.MAX_VALUE)return;const a=r-s+O["a"].EPSILON7,o=O["a"].clamp(n-s,0,a),l=o/a,u=X.length-1,d=l*u,m=Math.floor(d),_=Math.ceil(d),p=d-m,f=X[m],g=X[_],b=c["a"].clone(c["a"].WHITE);b.red=O["a"].lerp(f.red,g.red,p),b.green=O["a"].lerp(f.green,g.green,p),b.blue=O["a"].lerp(f.blue,g.blue,p),e._debugColor=b},W.prototype.resetMinimumMaximum=function(){const e=this.tilePropertyName;if(Object(h["a"])(e)){const t=this._referenceMinimum[e],i=this._referenceMaximum[e],n=Object(h["a"])(t)&&Object(h["a"])(i);this._previousMinimum=n?t:this._minimum,this._previousMaximum=n?i:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}};var z=W;function G(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfLoadedTilesTotal=0,this.numberOfFeaturesSelected=0,this.numberOfFeaturesLoaded=0,this.numberOfPointsSelected=0,this.numberOfPointsLoaded=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0,this.geometryByteLength=0,this.texturesByteLength=0,this.batchTableByteLength=0}function J(e,t,i,n){const s=t.innerContents,r=t.pointsLength,a=t.trianglesLength,o=t.featuresLength,c=t.geometryByteLength,l=t.texturesByteLength,u=t.batchTableByteLength;if(n?(e.numberOfFeaturesLoaded+=i?-o:o,e.numberOfPointsLoaded+=i?-r:r,e.geometryByteLength+=i?-c:c,e.texturesByteLength+=i?-l:l,e.batchTableByteLength+=i?-u:u):(e.numberOfFeaturesSelected+=i?-o:o,e.numberOfPointsSelected+=i?-r:r,e.numberOfTrianglesSelected+=i?-a:a),Object(h["a"])(s)){const t=s.length;for(let r=0;r<t;++r)J(e,s[r],i,n)}}G.prototype.clear=function(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfFeaturesSelected=0,this.numberOfPointsSelected=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0},G.prototype.incrementSelectionCounts=function(e){J(this,e,!1,!1)},G.prototype.incrementLoadCounts=function(e){J(this,e,!1,!0)},G.prototype.decrementLoadCounts=function(e){J(this,e,!0,!0)},G.clone=function(e,t){t.selected=e.selected,t.visited=e.visited,t.numberOfCommands=e.numberOfCommands,t.selected=e.selected,t.numberOfAttemptedRequests=e.numberOfAttemptedRequests,t.numberOfPendingRequests=e.numberOfPendingRequests,t.numberOfTilesProcessing=e.numberOfTilesProcessing,t.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,t.numberOfTilesTotal=e.numberOfTilesTotal,t.numberOfFeaturesSelected=e.numberOfFeaturesSelected,t.numberOfFeaturesLoaded=e.numberOfFeaturesLoaded,t.numberOfPointsSelected=e.numberOfPointsSelected,t.numberOfPointsLoaded=e.numberOfPointsLoaded,t.numberOfTrianglesSelected=e.numberOfTrianglesSelected,t.numberOfTilesStyled=e.numberOfTilesStyled,t.numberOfFeaturesStyled=e.numberOfFeaturesStyled,t.numberOfTilesCulledWithChildrenUnion=e.numberOfTilesCulledWithChildrenUnion,t.geometryByteLength=e.geometryByteLength,t.texturesByteLength=e.texturesByteLength,t.batchTableByteLength=e.batchTableByteLength};var K=G,Y=i("9e51"),Q=i("43ee"),Z=i("55d8"),$=i("edfc"),ee=i("1f48"),te=i("04e1"),ie=i("2ab8"),ne=i("7b4a"),se=i("17a9"),re=i("a307"),ae=i("c86b"),oe=i("3de6"),ce=i("3626"),le=i("1ec0"),ue=i("eb1f"),he=i("8cfb");function de(e){e=Object(u["a"])(e,u["a"].EMPTY_OBJECT),this._url=void 0,this._basePath=void 0,this._root=void 0,this._resource=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._extensionsUsed=void 0,this._extensions=void 0,this._modelUpAxis=void 0,this._modelForwardAxis=void 0,this._cache=new B,this._processingQueue=[],this._selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._updatedModelMatrixFrame=0,this._modelMatrixChanged=!1,this._previousModelMatrix=void 0,this._extras=void 0,this._credits=void 0,this._showCreditsOnScreen=Object(u["a"])(e.showCreditsOnScreen,!1),this._cullWithChildrenBounds=Object(u["a"])(e.cullWithChildrenBounds,!0),this._allTilesAdditive=!0,this._hasMixedContent=!1,this._stencilClearCommand=void 0,this._backfaceCommands=new y["a"],this._maximumScreenSpaceError=Object(u["a"])(e.maximumScreenSpaceError,16),this._maximumMemoryUsage=Object(u["a"])(e.maximumMemoryUsage,512),this._styleEngine=new Y["a"],this._styleApplied=!1,this._modelMatrix=Object(h["a"])(e.modelMatrix)?S["a"].clone(e.modelMatrix):S["a"].clone(S["a"].IDENTITY),this._statistics=new K,this._statisticsLast=new K,this._statisticsPerPass=new Array(U["a"].NUMBER_OF_PASSES);for(let n=0;n<U["a"].NUMBER_OF_PASSES;++n)this._statisticsPerPass[n]=new K;this._requestedTilesInFlight=[],this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,reverseScreenSpaceError:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,reverseScreenSpaceError:Number.MAX_VALUE},this._heatmap=new z(e.debugHeatmapTilePropertyName),this.cullRequestsWhileMoving=Object(u["a"])(e.cullRequestsWhileMoving,!0),this._cullRequestsWhileMoving=!1,this.cullRequestsWhileMovingMultiplier=Object(u["a"])(e.cullRequestsWhileMovingMultiplier,60),this.progressiveResolutionHeightFraction=O["a"].clamp(Object(u["a"])(e.progressiveResolutionHeightFraction,.3),0,.5),this.preferLeaves=Object(u["a"])(e.preferLeaves,!1),this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._tileDebugLabels=void 0,this._classificationType=e.classificationType,this._ellipsoid=Object(u["a"])(e.ellipsoid,_["a"].WGS84),this._initialClippingPlanesOriginMatrix=S["a"].IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!0,this._vectorClassificationOnly=Object(u["a"])(e.vectorClassificationOnly,!1),this._vectorKeepDecodedPositions=Object(u["a"])(e.vectorKeepDecodedPositions,!1),this.preloadWhenHidden=Object(u["a"])(e.preloadWhenHidden,!1),this.preloadFlightDestinations=Object(u["a"])(e.preloadFlightDestinations,!0),this._pass=void 0,this.dynamicScreenSpaceError=Object(u["a"])(e.dynamicScreenSpaceError,!1),this.foveatedScreenSpaceError=Object(u["a"])(e.foveatedScreenSpaceError,!0),this._foveatedConeSize=Object(u["a"])(e.foveatedConeSize,.1),this._foveatedMinimumScreenSpaceErrorRelaxation=Object(u["a"])(e.foveatedMinimumScreenSpaceErrorRelaxation,0),this.foveatedInterpolationCallback=Object(u["a"])(e.foveatedInterpolationCallback,O["a"].lerp),this.foveatedTimeDelay=Object(u["a"])(e.foveatedTimeDelay,.2),this.dynamicScreenSpaceErrorDensity=.00278,this.dynamicScreenSpaceErrorFactor=4,this.dynamicScreenSpaceErrorHeightFalloff=.25,this._dynamicScreenSpaceErrorComputedDensity=0,this.shadows=Object(u["a"])(e.shadows,ae["a"].ENABLED),this.show=Object(u["a"])(e.show,!0),this.colorBlendMode=D["a"].HIGHLIGHT,this.colorBlendAmount=.5,this._pointCloudShading=new ne["a"](e.pointCloudShading),this._pointCloudEyeDomeLighting=new ie["a"],this.loadProgress=new p["a"],this.allTilesLoaded=new p["a"],this.initialTilesLoaded=new p["a"],this.tileLoad=new p["a"],this.tileUnload=new p["a"],this.tileFailed=new p["a"],this.tileVisible=new p["a"],this.skipLevelOfDetail=Object(u["a"])(e.skipLevelOfDetail,!1),this._skipLevelOfDetail=this.skipLevelOfDetail,this._disableSkipLevelOfDetail=!1,this.baseScreenSpaceError=Object(u["a"])(e.baseScreenSpaceError,1024),this.skipScreenSpaceErrorFactor=Object(u["a"])(e.skipScreenSpaceErrorFactor,16),this.skipLevels=Object(u["a"])(e.skipLevels,1),this.immediatelyLoadDesiredLevelOfDetail=Object(u["a"])(e.immediatelyLoadDesiredLevelOfDetail,!1),this.loadSiblings=Object(u["a"])(e.loadSiblings,!1),this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,Object(h["a"])(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):(this._imageBasedLighting=new g["a"],this._shouldDestroyImageBasedLighting=!0),this.lightColor=e.lightColor,this.backFaceCulling=Object(u["a"])(e.backFaceCulling,!0),this._enableShowOutline=Object(u["a"])(e.enableShowOutline,!0),this.showOutline=Object(u["a"])(e.showOutline,!0),this.outlineColor=Object(u["a"])(e.outlineColor,c["a"].BLACK),this.splitDirection=Object(u["a"])(e.splitDirection,oe["a"].NONE),this._projectTo2D=Object(u["a"])(e.projectTo2D,!1),this.debugFreezeFrame=Object(u["a"])(e.debugFreezeFrame,!1),this.debugColorizeTiles=Object(u["a"])(e.debugColorizeTiles,!1),this._enableDebugWireframe=Object(u["a"])(e.enableDebugWireframe,!1),this.debugWireframe=Object(u["a"])(e.debugWireframe,!1),this.debugShowBoundingVolume=Object(u["a"])(e.debugShowBoundingVolume,!1),this.debugShowContentBoundingVolume=Object(u["a"])(e.debugShowContentBoundingVolume,!1),this.debugShowViewerRequestVolume=Object(u["a"])(e.debugShowViewerRequestVolume,!1),this._tileDebugLabels=void 0,this.debugPickedTileLabelOnly=!1,this.debugPickedTile=void 0,this.debugPickPosition=void 0,this.debugShowGeometricError=Object(u["a"])(e.debugShowGeometricError,!1),this.debugShowRenderingStatistics=Object(u["a"])(e.debugShowRenderingStatistics,!1),this.debugShowMemoryUsage=Object(u["a"])(e.debugShowMemoryUsage,!1),this.debugShowUrl=Object(u["a"])(e.debugShowUrl,!1),this.examineVectorLinesFunction=void 0,this._metadataExtension=void 0,this._customShader=e.customShader,this.enableModelExperimental=Object(u["a"])(e.enableModelExperimental,f["a"].enableModelExperimental);let t=Object(u["a"])(e.featureIdLabel,"featureId_0");"number"===typeof t&&(t="featureId_"+t),this._featureIdLabel=t;let i=Object(u["a"])(e.instanceFeatureIdLabel,"instanceFeatureId_0");"number"===typeof i&&(i="instanceFeatureId_"+i),this._instanceFeatureIdLabel=i,this._schemaLoader=void 0;const s=this;let r;this._readyPromise=Promise.resolve(e.url).then((function(e){let t;return r=L["a"].createIfNeeded(e),s._resource=r,s._credits=r.credits,"json"===r.extension?t=r.getBaseUri(!0):r.isDataUri&&(t=""),s._url=r.url,s._basePath=t,de.loadJson(r)})).then((function(e){if(!s.isDestroyed())return _e(s,e)})).then((function(t){if(s.isDestroyed())return;s._root=s.loadTileset(r,t);const i=Object(h["a"])(t.asset.gltfUpAxis)?C["a"].fromName(t.asset.gltfUpAxis):C["a"].Y,a=Object(u["a"])(e.modelUpAxis,i),o=Object(u["a"])(e.modelForwardAxis,C["a"].X),c=t.asset;s._asset=c,s._properties=t.properties,s._geometricError=t.geometricError,s._extensionsUsed=t.extensionsUsed,s._extensions=t.extensions,s._modelUpAxis=a,s._modelForwardAxis=o,s._extras=t.extras;const d=c.extras;if(Object(h["a"])(d)&&Object(h["a"])(d.cesium)&&Object(h["a"])(d.cesium.credits)){const e=d.cesium.credits;let t=s._credits;Object(h["a"])(t)||(t=[],s._credits=t);for(let i=0;i<e.length;++i){const n=e[i];t.push(new l["a"](n.html,s._showCreditsOnScreen))}}const m=s._root.createBoundingVolume(t.root.boundingVolume,S["a"].IDENTITY),_=m.boundingSphere.center,p=s._ellipsoid.cartesianToCartographic(_);return Object(h["a"])(p)&&p.height>n["a"]._defaultMinTerrainHeight&&(s._initialClippingPlanesOriginMatrix=T["a"].eastNorthUpToFixedFrame(_)),s._clippingPlanesOriginMatrix=S["a"].clone(s._initialClippingPlanesOriginMatrix),s}))}function me(e,t,i,n){const s=Object(h["a"])(i.implicitTiling)||Object(Z["a"])(i,"3DTILES_implicit_tiling");if(s){const s=e.schema,r=new $["a"](t,i,s),a=new ee["a"]({subdivisionScheme:r.subdivisionScheme,subtreeLevels:r.subtreeLevels,level:0,x:0,y:0,z:0}),c=r.subtreeUriTemplate.getDerivedResource({templateValues:a.getTemplateValues()}).url,l=!0,u=Object(o["a"])(i,l);u.contents=[{uri:c}],delete u.content,delete u.extensions;const h=new P["a"](e,t,u,n);return h.implicitTileset=r,h.implicitCoordinates=a,h}return new P["a"](e,t,i,n)}function _e(e,t){const i=Object(Z["a"])(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t;let n;if(Object(h["a"])(i.schemaUri)){const t=e._resource.getDerivedResource({url:i.schemaUri});n=se["a"].loadSchema({resource:t})}else{if(!Object(h["a"])(i.schema))return Promise.resolve(t);n=se["a"].loadSchema({schema:i.schema})}return e._schemaLoader=n,n.promise.then((function(n){return e._metadataExtension=new k({schema:n.schema,metadataJson:i}),t}))}Object.defineProperties(de.prototype,{isCesium3DTileset:{get:function(){return!0}},asset:{get:function(){return this._asset}},extensions:{get:function(){return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){Q["a"].setOwner(e,this,"_clippingPlanes")}},properties:{get:function(){return this._properties}},ready:{get:function(){return Object(h["a"])(this._root)}},readyPromise:{get:function(){return this._readyPromise}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return Object(d["a"])("Cesium3DTileset.basePath","Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead."),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},customShader:{get:function(){return this._customShader},set:function(e){this._customShader=e}},metadataExtension:{get:function(){return this._metadataExtension}},metadata:{get:function(){if(Object(h["a"])(this._metadataExtension))return this._metadataExtension.tileset}},schema:{get:function(){if(Object(h["a"])(this._metadataExtension))return this._metadataExtension.schema}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){this._maximumScreenSpaceError=e}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(e){this._maximumMemoryUsage=e}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){this._pointCloudShading=e}},root:{get:function(){return this._root}},boundingSphere:{get:function(){return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=S["a"].clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){const e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return Object(h["a"])(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(S["a"].multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):S["a"].IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){return this._extras}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}},vectorKeepDecodedPositions:{get:function(){return this._vectorKeepDecodedPositions}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){"number"===typeof e&&(e="featureId_"+e),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){"number"===typeof e&&(e="instanceFeatureId_"+e),this._instanceFeatureIdLabel=e}}}),de.loadJson=function(e){const t=L["a"].createIfNeeded(e);return t.fetchJson()},de.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()},de.prototype.loadTileset=function(e,t,i){const n=t.asset;if(!Object(h["a"])(n))throw new x["a"]("Tileset must have an asset property.");if("0.0"!==n.version&&"1.0"!==n.version&&"1.1"!==n.version)throw new x["a"]("The tileset must be 3D Tiles version 0.0, 1.0, or 1.1");Object(h["a"])(t.extensionsRequired)&&de.checkSupportedExtensions(t.extensionsRequired);const s=this._statistics,r=n.tilesetVersion;Object(h["a"])(r)&&(this._basePath+="?v="+r,e=e.clone(),e.setQueryParameters({v:r}));const a=me(this,e,t.root,i);Object(h["a"])(i)&&(i.children.push(a),a._depth=i._depth+1);const o=[];o.push(a);while(o.length>0){const t=o.pop();++s.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&t.refine===R["a"].ADD;const i=t._header.children;if(Object(h["a"])(i)){const n=i.length;for(let s=0;s<n;++s){const n=i[s],r=me(this,e,n,t);t.children.push(r),r._depth=t._depth+1,o.push(r)}}this._cullWithChildrenBounds&&I["a"].checkChildrenWithinParent(t)}return a};const pe=new r["a"],fe=new a["a"],ge=new S["a"],be=new r["a"],ye=new r["a"],Oe=new r["a"];function Se(e,t){let i,n,s,o,c;const l=t.camera,u=e._root,h=u.contentBoundingVolume;if(h instanceof le["a"])i=r["a"].normalize(l.positionWC,pe),n=l.directionWC,s=l.positionCartographic.height,o=h.minimumHeight,c=h.maximumHeight;else{const e=S["a"].inverseTransformation(u.computedTransform,ge),d=t.mapProjection.ellipsoid,m=h.boundingVolume,_=S["a"].multiplyByPoint(e,m.center,be);if(r["a"].magnitude(_)>d.minimumRadius){const e=a["a"].fromCartesian(_,d,fe);i=r["a"].normalize(l.positionWC,pe),n=l.directionWC,s=l.positionCartographic.height,o=0,c=2*e.height}else{const t=S["a"].multiplyByPoint(e,l.positionWC,ye);if(i=r["a"].UNIT_Z,n=S["a"].multiplyByPointAsVector(e,l.directionWC,Oe),n=r["a"].normalize(n,n),s=t.z,h instanceof he["a"]){const e=u._header.boundingVolume.box[11];o=_.z-e,c=_.z+e}else if(h instanceof ue["a"]){const e=m.radius;o=_.z-e,c=_.z+e}}}const d=e.dynamicScreenSpaceErrorHeightFalloff,m=o+(c-o)*d,_=c,p=O["a"].clamp((s-m)/(_-m),0,1),f=Math.abs(r["a"].dot(n,i));let g=1-f;g*=1-p;let b=e.dynamicScreenSpaceErrorDensity;b*=g,e._dynamicScreenSpaceErrorComputedDensity=b}function Le(e,t){if(t.hasEmptyContent)return;const i=e._statistics,n=t.contentExpired,s=t.requestContent();s>0?i.numberOfAttemptedRequests+=s:(n&&(t.hasTilesetContent||t.hasImplicitContent?Ne(e,t):(i.decrementLoadCounts(t.content),--i.numberOfTilesWithContentReady)),e._requestedTilesInFlight.push(t),t.contentReadyToProcessPromise.then(Me(e,t)).catch((function(e){})),t.contentReadyPromise.then(Ce(e,t)).catch(Ee(e,t)))}function xe(e,t){return e._priority-t._priority}function Te(e,t){const i=e._requestedTilesInFlight;let n=0;const s=i.length;for(let r=0;r<s;++r){const e=i[r],s=t.frameNumber-e._touchedFrame>=1;e._contentState===w["a"].LOADING?s?(e.cancelRequests(),++n):n>0&&(i[r-n]=e):++n}i.length-=n}function ve(e,t){const i=e._requestedTiles,n=i.length;i.sort(xe);for(let s=0;s<n;++s)Le(e,i[s])}function Me(e,t){return function(){e._processingQueue.push(t),++e._statistics.numberOfTilesProcessing}}function Ee(e,t){return function(i){if(t._contentState!==w["a"].FAILED)return;const n=t._contentResource.url,s=Object(h["a"])(i.message)?i.message:i.toString();e.tileFailed.numberOfListeners>0?e.tileFailed.raiseEvent({url:n,message:s}):(console.log("A 3D tile failed to load: "+n),console.log("Error: "+s))}}function Ce(e,t){return function(i){--e._statistics.numberOfTilesProcessing,Object(h["a"])(i)&&(t.hasTilesetContent||t.hasImplicitContent||(e._statistics.incrementLoadCounts(t.content),++e._statistics.numberOfTilesWithContentReady,++e._statistics.numberOfLoadedTilesTotal,e._cache.add(t)),e.tileLoad.raiseEvent(t))}}function Pe(e){const t=e._processingQueue,i=t.length;let n=0;for(let s=0;s<i;++s){const e=t[s];e._contentState===w["a"].PROCESSING?n>0&&(t[s-n]=e):++n}t.length-=n}function De(e,t){Pe(e);const i=e._processingQueue,n=i.length;for(let s=0;s<n;++s)i[s].process(e,t)}de.prototype.postPassesUpdate=function(e){this.ready&&(Te(this,e),We(this,e),this._cache.unloadTiles(this,Ve),this._styleApplied&&this._styleEngine.resetDirty(),this._styleApplied=!1)},de.prototype.prePassesUpdate=function(e){if(!this.ready)return;De(this,e);const t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,Object(h["a"])(t)&&t.enabled&&t.update(e),Object(h["a"])(this._loadTimestamp)||(this._loadTimestamp=b["a"].clone(e.time)),this._timeSinceLoad=Math.max(1e3*b["a"].secondsDifference(e.time,this._loadTimestamp),0),this._skipLevelOfDetail=this.skipLevelOfDetail&&!Object(h["a"])(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive,this.dynamicScreenSpaceError&&Se(this,e),e.newFrame&&this._cache.reset()};const we=new r["a"],je={maximumFractionDigits:3};function Ae(e){const t=e/1048576;return t<1?t.toLocaleString(void 0,je):Math.round(t).toLocaleString()}function Fe(e){const t=e.boundingVolume.boundingVolume,i=t.halfAxes,n=t.radius;let s=r["a"].clone(t.center,we);if(Object(h["a"])(i))s.x+=.75*(i[0]+i[3]+i[6]),s.y+=.75*(i[1]+i[4]+i[7]),s.z+=.75*(i[2]+i[5]+i[8]);else if(Object(h["a"])(n)){let e=r["a"].normalize(t.center,we);e=r["a"].multiplyByScalar(e,.75*n,we),s=r["a"].add(e,t.center,we)}return s}function ke(e,t,i){let n="",s=0;if(t.debugShowGeometricError&&(n+="\nGeometric error: "+e.geometricError,s++),t.debugShowRenderingStatistics){n+="\nCommands: "+e.commandsLength,s++;const t=e.content.pointsLength;t>0&&(n+="\nPoints: "+e.content.pointsLength,s++);const i=e.content.trianglesLength;i>0&&(n+="\nTriangles: "+e.content.trianglesLength,s++),n+="\nFeatures: "+e.content.featuresLength,s++}if(t.debugShowMemoryUsage&&(n+="\nTexture Memory: "+Ae(e.content.texturesByteLength),n+="\nGeometry Memory: "+Ae(e.content.geometryByteLength),s+=2),t.debugShowUrl)if(e.hasMultipleContents){n+="\nUrls:";const t=e.content.innerContentUrls;for(let e=0;e<t.length;e++)n+="\n- "+t[e];s+=t.length}else n+="\nUrl: "+e._contentHeader.uri,s++;const r={text:n.substring(1),position:i,font:19-s+"px sans-serif",showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(r)}function Ie(e,t){let i,n;const r=e._selectedTiles,a=r.length,o=e._emptyTiles,c=o.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if(Object(h["a"])(e.debugPickedTile)){const t=Object(h["a"])(e.debugPickPosition)?e.debugPickPosition:Fe(e.debugPickedTile),i=ke(e.debugPickedTile,e,t);i.pixelOffset=new s["a"](15,-15)}}else{for(i=0;i<a;++i)n=r[i],ke(n,e,Fe(n));for(i=0;i<c;++i)n=o[i],(n.hasTilesetContent||n.hasImplicitContent)&&ke(n,e,Fe(n))}e._tileDebugLabels.update(t)}function Ue(e,t,i){e._styleEngine.applyStyle(e),e._styleApplied=!0;const n=i.isRender,s=e._statistics,r=t.commandList,a=r.length,o=e._selectedTiles,c=o.length,l=e._emptyTiles,u=l.length,d=e.tileVisible;let m,_;const p=e._skipLevelOfDetail&&e._hasMixedContent&&t.context.stencilBuffer&&c>0;e._backfaceCommands.length=0,p&&(Object(h["a"])(e._stencilClearCommand)||(e._stencilClearCommand=new v["a"]({stencil:0,pass:M["a"].CESIUM_3D_TILE,renderState:E["a"].fromCache({stencilMask:ce["a"].SKIP_LOD_MASK})})),r.push(e._stencilClearCommand));const f=r.length;for(m=0;m<c;++m)_=o[m],n&&d.raiseEvent(_),_.update(e,t,i),s.incrementSelectionCounts(_.content),++s.selected;for(m=0;m<u;++m)_=l[m],_.update(e,t,i);let g=r.length-f;if(e._backfaceCommands.trim(),p){const t=e._backfaceCommands.values,i=t.length;for(r.length+=i,m=g-1;m>=0;--m)r[f+i+m]=r[f+m];for(m=0;m<i;++m)r[f+m]=t[m]}g=r.length-a,s.numberOfCommands=g,n&&e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&g>0&&e._pointCloudEyeDomeLighting.update(t,a,e.pointCloudShading,e.boundingSphere),n&&(e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?(Object(h["a"])(e._tileDebugLabels)||(e._tileDebugLabels=new te["a"]),Ie(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}const Re=[];function Ne(e,t){const i=t,n=Re;n.push(t);while(n.length>0){t=n.pop();const s=t.children,r=s.length;for(let e=0;e<r;++e)n.push(s[e]);t!==i&&(Be(e,t),--e._statistics.numberOfTilesTotal)}i.children=[]}function Ve(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function Be(e,t){e._cache.unloadTile(e,t,Ve),t.destroy()}function We(e,t){const i=e._statistics,n=e._statisticsLast,s=i.numberOfPendingRequests,r=i.numberOfTilesProcessing,a=n.numberOfPendingRequests,o=n.numberOfTilesProcessing;K.clone(i,n);const c=s!==a||r!==o;c&&t.afterRender.push((function(){e.loadProgress.raiseEvent(s,r)})),e._tilesLoaded=0===i.numberOfPendingRequests&&0===i.numberOfTilesProcessing&&0===i.numberOfAttemptedRequests,c&&e._tilesLoaded&&(t.afterRender.push((function(){e.allTilesLoaded.raiseEvent()})),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push((function(){e.initialTilesLoaded.raiseEvent()}))))}function qe(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}function He(e,t){t.frameNumber===e._updatedModelMatrixFrame&&Object(h["a"])(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!S["a"].equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=S["a"].clone(e.modelMatrix,e._previousModelMatrix)))}function Xe(e,t,i,n){if(t.mode===re["a"].MORPHING)return!1;if(!e.ready)return!1;const s=e._statistics;s.clear();const r=n.isRender;++e._updatedVisibilityFrame,qe(e),He(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;const a=n.traversal.selectTiles(e,t);if(n.requestTiles&&ve(e),Ue(e,t,n),K.clone(s,i),r){const i=e._credits;if(Object(h["a"])(i)&&0!==s.selected){const n=i.length;for(let s=0;s<n;++s){const n=i[s];n.showOnScreen=e._showCreditsOnScreen,t.creditDisplay.addCredit(n)}}}return a}de.prototype.trimLoadedTiles=function(){this._cache.trim()},de.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)},de.prototype.updateForPass=function(e,t){const i=t.pass;if(i===U["a"].PRELOAD&&(!this.preloadWhenHidden||this.show)||i===U["a"].PRELOAD_FLIGHT&&(!this.preloadFlightDestinations||!this.show&&!this.preloadWhenHidden)||i===U["a"].REQUEST_RENDER_MODE_DEFER_CHECK&&(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))return;const n=e.commandList,s=e.camera,r=e.cullingVolume;t.ready=!1;const a=U["a"].getPassOptions(i),o=a.ignoreCommands,c=Object(u["a"])(t.commandList,n),l=c.length;e.commandList=c,e.camera=Object(u["a"])(t.camera,s),e.cullingVolume=Object(u["a"])(t.cullingVolume,r);const h=this._statisticsPerPass[i];(this.show||o)&&(this._pass=i,t.ready=Xe(this,e,h,a)),o&&(c.length=l),e.commandList=n,e.camera=s,e.cullingVolume=r},de.prototype.hasExtension=function(e){return!!Object(h["a"])(this._extensionsUsed)&&this._extensionsUsed.indexOf(e)>-1},de.prototype.isDestroyed=function(){return!1},de.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),Object(h["a"])(this._schemaLoader)&&se["a"].unload(this._schemaLoader),Object(h["a"])(this._root)){const e=Re;e.push(this._root);while(e.length>0){const t=e.pop();t.destroy();const i=t.children,n=i.length;for(let s=0;s<n;++s)e.push(i[s])}}return this._root=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,Object(m["a"])(this)},de.supportedExtensions={"3DTILES_metadata":!0,"3DTILES_implicit_tiling":!0,"3DTILES_content_gltf":!0,"3DTILES_multiple_contents":!0,"3DTILES_bounding_volume_S2":!0,"3DTILES_batch_table_hierarchy":!0,"3DTILES_draco_point_compression":!0,MAXAR_content_geojson:!0},de.checkSupportedExtensions=function(e){for(let t=0;t<e.length;t++)if(!de.supportedExtensions[e[t]])throw new x["a"]("Unsupported 3D Tiles Extension: "+e[t])};t["a"]=de},"859c":function(e,t,i){"use strict";var n=i("2f63"),s=i("66bf"),r=i("7524"),a=i("6380"),o=i("c4a1");function c(){}function l(e){return e._visible&&e._inRequestVolume}const u={stack:new r["a"],stackMaximumLength:0},h={stack:new r["a"],stackMaximumLength:0},d={stack:new r["a"],stackMaximumLength:0},m={stack:new r["a"],stackMaximumLength:0,ancestorStack:new r["a"],ancestorStackMaximumLength:0},_=2;function p(e,t,i){const n=e._maximumScreenSpaceError,s=e._maximumScreenSpaceError;B(e,t,n,s,i)}function f(e,t,i){const n=Number.MAX_VALUE,s=e._maximumScreenSpaceError;B(e,t,n,s,i),q(e,t,i)}function g(e,t,i){const n=Math.max(e.baseScreenSpaceError,e.maximumScreenSpaceError),s=e.maximumScreenSpaceError;B(e,t,n,s,i),q(e,t,i)}function b(e){return e._skipLevelOfDetail}function y(e,t){e._emptyTiles.push(t)}function O(e,t,i){if(t.contentVisibility(i)!==s["a"].OUTSIDE){const n=t.content;n.featurePropertiesDirty?(n.featurePropertiesDirty=!1,t.lastStyleTime=0,e._selectedTilesToStyle.push(t)):t._selectedFrame<i.frameNumber-1&&e._selectedTilesToStyle.push(t),t._selectedFrame=i.frameNumber,e._selectedTiles.push(t)}}function S(e,t,i){const n=d.stack;n.push(t);while(n.length>0){d.stackMaximumLength=Math.max(d.stackMaximumLength,n.length);const s=n.pop(),r=s.children,a=r.length;for(let o=0;o<a;++o){const s=r[o];l(s)&&(s.contentAvailable?(j(e,s,i),T(e,s,i),O(e,s,i)):s._depth-t._depth<_&&n.push(s))}}}function L(e,t,i){if(!b(e))return void(t.contentAvailable&&O(e,t,i));const s=t.contentAvailable?t:t._ancestorWithContentAvailable;Object(n["a"])(s)?s._shouldSelect=!0:S(e,t,i)}function x(e,t,i){++e._statistics.visited,t._visitedFrame=i.frameNumber}function T(e,t,i){t._touchedFrame!==i.frameNumber&&(e._cache.touch(t),t._touchedFrame=i.frameNumber)}function v(e,t){e._maximumPriority.distance=Math.max(t._priorityHolder._distanceToCamera,e._maximumPriority.distance),e._minimumPriority.distance=Math.min(t._priorityHolder._distanceToCamera,e._minimumPriority.distance),e._maximumPriority.depth=Math.max(t._depth,e._maximumPriority.depth),e._minimumPriority.depth=Math.min(t._depth,e._minimumPriority.depth),e._maximumPriority.foveatedFactor=Math.max(t._priorityHolder._foveatedFactor,e._maximumPriority.foveatedFactor),e._minimumPriority.foveatedFactor=Math.min(t._priorityHolder._foveatedFactor,e._minimumPriority.foveatedFactor),e._maximumPriority.reverseScreenSpaceError=Math.max(t._priorityReverseScreenSpaceError,e._maximumPriority.reverseScreenSpaceError),e._minimumPriority.reverseScreenSpaceError=Math.min(t._priorityReverseScreenSpaceError,e._minimumPriority.reverseScreenSpaceError)}function M(e,t,i){if(!e._cullRequestsWhileMoving)return!0;const n=t.boundingSphere,s=Math.max(2*n.radius,1),r=i.camera,a=0!==r.positionWCDeltaMagnitude?r.positionWCDeltaMagnitude:r.positionWCDeltaMagnitudeLastFrame,o=e.cullRequestsWhileMovingMultiplier*a/s;return o<1}function E(e,t,i){if(t._requestedFrame===i.frameNumber||!k(t)&&!t.contentExpired)return;if(!M(e,t,i))return;const n=i.camera.timeSinceMoved<e.foveatedTimeDelay;t.priorityDeferred&&n||(t._requestedFrame=i.frameNumber,e._requestedTiles.push(t))}function C(e,t,i){t._updatedVisibilityFrame!==e._updatedVisibilityFrame&&(t.updateVisibility(i),t._updatedVisibilityFrame=e._updatedVisibilityFrame)}function P(e,t,i){let n=!1;const s=t.children,r=s.length;for(let a=0;a<r;++a){const t=s[a];C(e,t,i),n=n||l(t)}return n}function D(e,t,i){const s=t.parent;return!(!Object(n["a"])(s)||s.hasTilesetContent||s.hasImplicitContent||s.refine!==o["a"].ADD)&&t.getScreenSpaceError(i,!0)<=e._maximumScreenSpaceError}function w(e,t,i){if(C(e,t,i),!l(t))return;const n=t.children.length>0;if((t.hasTilesetContent||t.hasImplicitContent)&&n){const n=t.children[0];return w(e,n,i),void(t._visible=n._visible)}if(D(e,t,i))return void(t._visible=!1);const s=t.refine===o["a"].REPLACE,r=t._optimChildrenWithinParent===a["a"].USE_OPTIMIZATION;return s&&r&&n&&!P(e,t,i)?(++e._statistics.numberOfTilesCulledWithChildrenUnion,void(t._visible=!1)):void 0}function j(e,t,i){w(e,t,i),t.updateExpiration(),t._wasMinPriorityChild=!1,t._priorityHolder=t,v(e,t),t._shouldSelect=!1,t._finalResolution=!0}function A(e,t){e._ancestorWithContent=void 0,e._ancestorWithContentAvailable=void 0;const i=e.parent;if(Object(n["a"])(i)){const n=!k(i)||i._requestedFrame===t.frameNumber;e._ancestorWithContent=n?i:i._ancestorWithContent,e._ancestorWithContentAvailable=i.contentAvailable?i:i._ancestorWithContentAvailable}}function F(e){return e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent}function k(e){return!F(e)&&e.contentUnloaded}function I(e,t){const i=t._ancestorWithContent;return!e.immediatelyLoadDesiredLevelOfDetail&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf||Object(n["a"])(i)&&t._screenSpaceError<i._screenSpaceError/e.skipScreenSpaceErrorFactor&&t._depth>i._depth+e.skipLevels)}function U(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera}function R(e,t,i,n){let s;const r=t.refine===o["a"].REPLACE,a=t.children,c=a.length;for(s=0;s<c;++s)j(e,a[s],n);a.sort(U);const u=!b(e)&&r&&!F(t);let h,d=!0,m=!1,_=-1,p=Number.MAX_VALUE;for(s=0;s<c;++s)if(h=a[s],l(h)?(i.push(h),h._foveatedFactor<p&&(_=s,p=h._foveatedFactor),m=!0):(u||e.loadSiblings)&&(h._foveatedFactor<p&&(_=s,p=h._foveatedFactor),E(e,h,n),T(e,h,n)),u){let t;t=!!h._inRequestVolume&&(F(h)?W(e,h,n):h.contentAvailable),d=d&&t}if(m||(d=!1),-1!==_&&!b(e)&&r){const i=a[_];i._wasMinPriorityChild=!0;const n=(t._wasMinPriorityChild||t===e.root)&&p<=t._priorityHolder._foveatedFactor?t._priorityHolder:t;for(n._foveatedFactor=Math.min(i._foveatedFactor,n._foveatedFactor),n._distanceToCamera=Math.min(i._distanceToCamera,n._distanceToCamera),s=0;s<c;++s)h=a[s],h._priorityHolder=n}return d}function N(e,t,i){return!b(e)||!e.immediatelyLoadDesiredLevelOfDetail&&(!Object(n["a"])(t._ancestorWithContent)||(0===t._screenSpaceError?t.parent._screenSpaceError>i:t._screenSpaceError>i))}function V(e,t){return 0!==t.children.length&&(t.hasTilesetContent||t.hasImplicitContent?!t.contentExpired:t._screenSpaceError>e._maximumScreenSpaceError)}function B(e,t,i,s,r){const a=u.stack;a.push(t);while(a.length>0){u.stackMaximumLength=Math.max(u.stackMaximumLength,a.length);const t=a.pop();A(t,r);const s=N(e,t,i),c=t.refine===o["a"].ADD,l=t.refine===o["a"].REPLACE,h=t.parent,d=!Object(n["a"])(h)||h._refines;let m=!1;V(e,t)&&(m=R(e,t,a,r)&&d);const _=!m&&d;F(t)?(y(e,t,r),E(e,t,r),_&&L(e,t,r)):c?(L(e,t,r),E(e,t,r)):l&&(s?(E(e,t,r),_&&L(e,t,r)):_?(L(e,t,r),E(e,t,r)):I(e,t)&&E(e,t,r)),x(e,t,r),T(e,t,r),t._refines=m}}function W(e,t,i){let n=!0;const s=h.stack;s.push(t);while(s.length>0){h.stackMaximumLength=Math.max(h.stackMaximumLength,s.length);const t=s.pop(),r=t.children,a=r.length,o=F(t),c=o&&V(e,t),u=o&&0===t.children.length;if(c||t.contentAvailable||u||(n=!1),j(e,t,i),l(t)||(E(e,t,i),T(e,t,i)),c)for(let e=0;e<a;++e){const t=r[e];s.push(t)}}return n}function q(e,t,i){const s=m.stack,r=m.ancestorStack;let a;s.push(t);while(s.length>0||r.length>0){if(m.stackMaximumLength=Math.max(m.stackMaximumLength,s.length),m.ancestorStackMaximumLength=Math.max(m.ancestorStackMaximumLength,r.length),r.length>0){const t=r.peek();if(t._stackLength===s.length){r.pop(),t!==a&&(t._finalResolution=!1),O(e,t,i);continue}}const t=s.pop();if(!Object(n["a"])(t))continue;const c=t.refine===o["a"].ADD,u=t._shouldSelect,h=t.children,d=h.length,_=V(e,t);if(u)if(c)O(e,t,i);else{if(t._selectionDepth=r.length,t._selectionDepth>0&&(e._hasMixedContent=!0),a=t,!_){O(e,t,i);continue}r.push(t),t._stackLength=s.length}if(_)for(let e=0;e<d;++e){const t=h[e];l(t)&&s.push(t)}}}c.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e._hasMixedContent=!1;const i=e.root;if(j(e,i,t),!l(i))return;if(i.getScreenSpaceError(t,!0)<=e._maximumScreenSpaceError)return;b(e)?e.immediatelyLoadDesiredLevelOfDetail?f(e,i,t):g(e,i,t):p(e,i,t),u.stack.trim(u.stackMaximumLength),h.stack.trim(h.stackMaximumLength),d.stack.trim(d.stackMaximumLength),m.stack.trim(m.stackMaximumLength),m.ancestorStack.trim(m.ancestorStackMaximumLength);const n=e._requestedTiles,s=n.length;for(let r=0;r<s;++r)n[r].updatePriority()},t["a"]=c},8981:function(e,t,i){"use strict";var n=i("66bf"),s=i("7524"),r=i("c4a1");function a(){}const o={stack:new s["a"],stackMaximumLength:0};function c(e){return e._visible&&e._inRequestVolume}function l(e){return e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent}function u(e){return!l(e)&&e.contentUnloaded}function h(e,t){return 0!==t.children.length&&(t.hasTilesetContent||t.hasImplicitContent?!t.contentExpired:(t.hasEmptyContent,!0))}function d(e,t,i,n){const s=t.children,r=s.length;for(let a=0;a<r;++a){const e=s[a];e.updateVisibility(n),c(e)&&i.push(e)}}function m(e,t){(u(t)||t.contentExpired)&&(t._priority=0,e._requestedTiles.push(t))}function _(e,t,i){t._touchedFrame!==i.frameNumber&&(e._cache.touch(t),t._touchedFrame=i.frameNumber)}function p(e){++e.statistics.visited}function f(e,t,i){t.contentAvailable&&t.contentVisibility(i)!==n["a"].OUTSIDE&&e._selectedTiles.push(t)}a.selectTiles=function(e,t){e._selectedTiles.length=0,e._requestedTiles.length=0,e._hasMixedContent=!1;let i=!0;const n=e.root;if(n.updateVisibility(t),!c(n))return i;const s=o.stack;s.push(e.root);while(s.length>0){o.stackMaximumLength=Math.max(o.stackMaximumLength,s.length);const n=s.pop(),a=n.refine===r["a"].ADD,c=n.refine===r["a"].REPLACE,u=h(e,n);u&&d(e,n,s,t),(a||c&&!u)&&(m(e,n),_(e,n,t),f(e,n,t),l(n)||n.contentAvailable||(i=!1)),p(e)}return o.stack.trim(o.stackMaximumLength),i},t["a"]=a}}]);