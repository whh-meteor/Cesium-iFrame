(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~ca33e35a"],{"2d75":function(e,t,a){"use strict";const i={NONE:0,CLAMP_TO_GROUND:1,RELATIVE_TO_GROUND:2};t["a"]=Object.freeze(i)},"3e5e":function(e,t,a){"use strict";var i=a("2f63");function r(){this.name=void 0,this.description=void 0,this.position=void 0,this.data=void 0,this.imageryLayer=void 0}r.prototype.configureNameFromProperties=function(e){let t,a=10;for(const i in e)if(e.hasOwnProperty(i)&&e[i]){const e=i.toLowerCase();a>1&&"name"===e?(a=1,t=i):a>2&&"title"===e?(a=2,t=i):a>3&&/name/i.test(i)?(a=3,t=i):a>4&&/title/i.test(i)&&(a=4,t=i)}Object(i["a"])(t)&&(this.name=e[t])},r.prototype.configureDescriptionFromProperties=function(e){function t(e){let a='<table class="cesium-infoBox-defaultTable">';for(const r in e)if(e.hasOwnProperty(r)){const n=e[r];Object(i["a"])(n)&&(a+="object"===typeof n?`<tr><td>${r}</td><td>${t(n)}</td></tr>`:`<tr><td>${r}</td><td>${n}</td></tr>`)}return a+="</table>",a}this.description=t(e)},t["a"]=r},"506f":function(e,t,a){"use strict";var i=a("535a"),r=a("2f63"),n=a("7d62"),s=a("21d7"),o=a("93da"),c=a("eace"),h=a("ad4a");function l(){this._layers=[],this.layerAdded=new s["a"],this.layerRemoved=new s["a"],this.layerMoved=new s["a"],this.layerShownOrHidden=new s["a"]}function u(e,t){const a=e.indexOf(t);return a}function p(e,t,a){const i=e._layers;if(t=o["a"].clamp(t,0,i.length-1),a=o["a"].clamp(a,0,i.length-1),t===a)return;const r=i[t];i[t]=i[a],i[a]=r,e._update(),e.layerMoved.raiseEvent(r,a,t)}Object.defineProperties(l.prototype,{length:{get:function(){return this._layers.length}}}),l.prototype.add=function(e,t){const a=Object(r["a"])(t);a?this._layers.splice(t,0,e):(t=this._layers.length,this._layers.push(e)),this._update(),this.layerAdded.raiseEvent(e,t)},l.prototype.addImageryProvider=function(e,t){const a=new h["a"](e);return this.add(a,t),a},l.prototype.remove=function(e,t){t=Object(i["a"])(t,!0);const a=this._layers.indexOf(e);return-1!==a&&(this._layers.splice(a,1),this._update(),this.layerRemoved.raiseEvent(e,a),t&&e.destroy(),!0)},l.prototype.removeAll=function(e){e=Object(i["a"])(e,!0);const t=this._layers;for(let a=0,i=t.length;a<i;a++){const i=t[a];this.layerRemoved.raiseEvent(i,a),e&&i.destroy()}this._layers=[]},l.prototype.contains=function(e){return-1!==this.indexOf(e)},l.prototype.indexOf=function(e){return this._layers.indexOf(e)},l.prototype.get=function(e){return this._layers[e]},l.prototype.raise=function(e){const t=u(this._layers,e);p(this,t,t+1)},l.prototype.lower=function(e){const t=u(this._layers,e);p(this,t,t-1)},l.prototype.raiseToTop=function(e){const t=u(this._layers,e);t!==this._layers.length-1&&(this._layers.splice(t,1),this._layers.push(e),this._update(),this.layerMoved.raiseEvent(e,this._layers.length-1,t))},l.prototype.lowerToBottom=function(e){const t=u(this._layers,e);0!==t&&(this._layers.splice(t,1),this._layers.splice(0,0,e),this._update(),this.layerMoved.raiseEvent(e,0,t))};const m=new c["a"];function d(e,t,a,i){const n=e.globe._surface._tilesToRender;let s;for(let o=0;!Object(r["a"])(s)&&o<n.length;++o){const e=n[o];c["a"].contains(e.rectangle,t)&&(s=e)}if(!Object(r["a"])(s))return;const h=s.data.imagery;for(let l=h.length-1;l>=0;--l){const e=h[l],n=e.readyImagery;if(!Object(r["a"])(n))continue;const u=n.imageryLayer.imageryProvider;if(a&&!Object(r["a"])(u.pickFeatures))continue;if(!c["a"].contains(n.rectangle,t))continue;const p=m,d=1/1024;p.west=o["a"].lerp(s.rectangle.west,s.rectangle.east,e.textureCoordinateRectangle.x-d),p.east=o["a"].lerp(s.rectangle.west,s.rectangle.east,e.textureCoordinateRectangle.z+d),p.south=o["a"].lerp(s.rectangle.south,s.rectangle.north,e.textureCoordinateRectangle.y-d),p.north=o["a"].lerp(s.rectangle.south,s.rectangle.north,e.textureCoordinateRectangle.w+d),c["a"].contains(p,t)&&i(n)}}l.prototype.pickImageryLayers=function(e,t){const a=t.globe.pick(e,t);if(!Object(r["a"])(a))return;const i=t.globe.ellipsoid.cartesianToCartographic(a),n=[];return d(t,i,!1,(function(e){n.push(e.imageryLayer)})),0!==n.length?n:void 0},l.prototype.pickImageryLayerFeatures=function(e,t){const a=t.globe.pick(e,t);if(!Object(r["a"])(a))return;const i=t.globe.ellipsoid.cartesianToCartographic(a),n=[],s=[];return d(t,i,!0,(function(e){const t=e.imageryLayer.imageryProvider,a=t.pickFeatures(e.x,e.y,e.level,i.longitude,i.latitude);Object(r["a"])(a)&&(n.push(a),s.push(e.imageryLayer))})),0!==n.length?Promise.all(n).then((function(e){const t=[];for(let a=0;a<e.length;++a){const n=e[a],o=s[a];if(Object(r["a"])(n)&&n.length>0)for(let e=0;e<n.length;++e){const a=n[e];a.imageryLayer=o,Object(r["a"])(a.position)||(a.position=i),t.push(a)}}return t})):void 0},l.prototype.queueReprojectionCommands=function(e){const t=this._layers;for(let a=0,i=t.length;a<i;++a)t[a].queueReprojectionCommands(e)},l.prototype.cancelReprojections=function(){const e=this._layers;for(let t=0,a=e.length;t<a;++t)e[t].cancelReprojections()},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this.removeAll(!0),Object(n["a"])(this)},l.prototype._update=function(){let e=!0;const t=this._layers;let a,i,n,s;for(n=0,s=t.length;n<s;++n)i=t[n],i._layerIndex=n,i.show?(i._isBaseLayer=e,e=!1):i._isBaseLayer=!1,i.show!==i._show&&(Object(r["a"])(i._show)&&(Object(r["a"])(a)||(a=[]),a.push(i)),i._show=i.show);if(Object(r["a"])(a))for(n=0,s=a.length;n<s;++n)i=a[n],this.layerShownOrHidden.raiseEvent(i,i._layerIndex,i.show)},t["a"]=l},"64ac":function(e,t,a){"use strict";var i=a("2f63"),r=a("4f04"),n=a("7ceb"),s=a("d4ed");function o(){this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,r["a"].throwInstantiationError()}Object.defineProperties(o.prototype,{ready:{get:r["a"].throwInstantiationError},readyPromise:{get:r["a"].throwInstantiationError},rectangle:{get:r["a"].throwInstantiationError},tileWidth:{get:r["a"].throwInstantiationError},tileHeight:{get:r["a"].throwInstantiationError},maximumLevel:{get:r["a"].throwInstantiationError},minimumLevel:{get:r["a"].throwInstantiationError},tilingScheme:{get:r["a"].throwInstantiationError},tileDiscardPolicy:{get:r["a"].throwInstantiationError},errorEvent:{get:r["a"].throwInstantiationError},credit:{get:r["a"].throwInstantiationError},proxy:{get:r["a"].throwInstantiationError},hasAlphaChannel:{get:r["a"].throwInstantiationError}}),o.prototype.getTileCredits=function(e,t,a){r["a"].throwInstantiationError()},o.prototype.requestImage=function(e,t,a,i){r["a"].throwInstantiationError()},o.prototype.pickFeatures=function(e,t,a,i,n){r["a"].throwInstantiationError()};const c=/\.ktx2$/i;o.loadImage=function(e,t){const a=s["a"].createIfNeeded(t);return c.test(a.url)?Object(n["a"])(a):Object(i["a"])(e)&&Object(i["a"])(e.tileDiscardPolicy)?a.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}):a.fetchImage({preferImageBitmap:!0,flipY:!0})},t["a"]=o},"8bd8":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var i=a("670c"),r=a("2f63"),n=a("535a"),s=a("7d62"),o=a("1b40");function c(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);const t=Object(r["a"])(e.imageBasedLightingFactor)?i["a"].clone(e.imageBasedLightingFactor):new i["a"](1,1);this._imageBasedLightingFactor=t;const a=Object(n["a"])(e.luminanceAtZenith,.2);this._luminanceAtZenith=a;const s=e.sphericalHarmonicCoefficients;this._sphericalHarmonicCoefficients=s,this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapAtlas=void 0,this._specularEnvironmentMapAtlasDirty=!0,this._specularEnvironmentMapLoaded=!1,this._previousSpecularEnvironmentMapLoaded=!1,this._useDefaultSpecularMaps=!1,this._useDefaultSphericalHarmonics=!1,this._shouldRegenerateShaders=!1,this._previousFrameNumber=void 0,this._previousImageBasedLightingFactor=i["a"].clone(t),this._previousLuminanceAtZenith=a,this._previousSphericalHarmonicCoefficients=s}function h(e,t){if(o["a"].isSupported(t)){if(e._specularEnvironmentMapAtlas=e._specularEnvironmentMapAtlas&&e._specularEnvironmentMapAtlas.destroy(),Object(r["a"])(e._specularEnvironmentMaps)){const t=new o["a"](e._specularEnvironmentMaps);e._specularEnvironmentMapAtlas=t,t.readyPromise.then((function(){e._specularEnvironmentMapLoaded=!0})).catch((function(e){console.error("Error loading specularEnvironmentMaps: "+e)}))}e._shouldRegenerateShaders=!0}}Object.defineProperties(c.prototype,{imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){this._previousImageBasedLightingFactor=i["a"].clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor),this._imageBasedLightingFactor=i["a"].clone(e,this._imageBasedLightingFactor)}},luminanceAtZenith:{get:function(){return this._luminanceAtZenith},set:function(e){this._previousLuminanceAtZenith=this._luminanceAtZenith,this._luminanceAtZenith=e}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients},set:function(e){this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients,this._sphericalHarmonicCoefficients=e}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps},set:function(e){e!==this._specularEnvironmentMaps&&(this._specularEnvironmentMapAtlasDirty=this._specularEnvironmentMapAtlasDirty||e!==this._specularEnvironmentMaps,this._specularEnvironmentMapLoaded=!1),this._specularEnvironmentMaps=e}},enabled:{get:function(){return this._imageBasedLightingFactor.x>0||this._imageBasedLightingFactor.y>0}},shouldRegenerateShaders:{get:function(){return this._shouldRegenerateShaders}},useDefaultSphericalHarmonics:{get:function(){return this._useDefaultSphericalHarmonics}},useSphericalHarmonicCoefficients:{get:function(){return Object(r["a"])(this._sphericalHarmonicCoefficients)||this._useDefaultSphericalHarmonics}},specularEnvironmentMapAtlas:{get:function(){return this._specularEnvironmentMapAtlas}},useDefaultSpecularMaps:{get:function(){return this._useDefaultSpecularMaps}},useSpecularEnvironmentMaps:{get:function(){return Object(r["a"])(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.ready||this._useDefaultSpecularMaps}}}),c.prototype.update=function(e){if(e.frameNumber===this._previousFrameNumber)return;this._previousFrameNumber=e.frameNumber;const t=e.context;e.brdfLutGenerator.update(e),this._shouldRegenerateShaders=!1;const a=this._imageBasedLightingFactor,n=this._previousImageBasedLightingFactor;i["a"].equals(a,n)||(this._shouldRegenerateShaders=a.x>0&&0===n.x||0===a.x&&n.x>0,this._shouldRegenerateShaders=this._shouldRegenerateShaders||a.y>0&&0===n.y||0===a.y&&n.y>0,this._previousImageBasedLightingFactor=i["a"].clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor)),this._luminanceAtZenith!==this._previousLuminanceAtZenith&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||Object(r["a"])(this._luminanceAtZenith)!==Object(r["a"])(this._previousLuminanceAtZenith),this._previousLuminanceAtZenith=this._luminanceAtZenith),this._previousSphericalHarmonicCoefficients!==this._sphericalHarmonicCoefficients&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||Object(r["a"])(this._previousSphericalHarmonicCoefficients)!==Object(r["a"])(this._sphericalHarmonicCoefficients),this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients),this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._previousSpecularEnvironmentMapLoaded!==this._specularEnvironmentMapLoaded,this._previousSpecularEnvironmentMapLoaded=this._specularEnvironmentMapLoaded,this._specularEnvironmentMapAtlasDirty&&(h(this,t),this._specularEnvironmentMapAtlasDirty=!1),Object(r["a"])(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.update(e);const s=!Object(r["a"])(this._specularEnvironmentMapAtlas)&&Object(r["a"])(e.specularEnvironmentMaps)&&!this._useDefaultSpecularMaps,o=!Object(r["a"])(e.specularEnvironmentMaps)&&this._useDefaultSpecularMaps,c=!Object(r["a"])(this._sphericalHarmonicCoefficients)&&Object(r["a"])(e.sphericalHarmonicCoefficients)&&!this._useDefaultSphericalHarmonics,l=!Object(r["a"])(e.sphericalHarmonicCoefficients)&&this._useDefaultSphericalHarmonics;this._shouldRegenerateShaders=this._shouldRegenerateShaders||s||o||c||l,this._useDefaultSpecularMaps=!Object(r["a"])(this._specularEnvironmentMapAtlas)&&Object(r["a"])(e.specularEnvironmentMaps),this._useDefaultSphericalHarmonics=!Object(r["a"])(this._sphericalHarmonicCoefficients)&&Object(r["a"])(e.sphericalHarmonicCoefficients)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._specularEnvironmentMapAtlas=this._specularEnvironmentMapAtlas&&this._specularEnvironmentMapAtlas.destroy(),Object(s["a"])(this)}},ad4a:function(e,t,a){"use strict";var i=a("670c"),r=a("a561"),n=a("535a"),s=a("2f63"),o=a("7d62"),c=a("5e57"),h=a("3d7f"),l=a("0123"),u=a("93da"),p=a("e42d"),m=a("eace"),d=a("de66"),f=a("8a39"),g=a("b82e"),y=a("1ee6"),_=a("a89b"),v=a("1184"),b=a("f20a"),E=a("8b68"),A=a("5b54"),O=a("b997"),T=a("b0e6"),L=a("6c84"),w=a("e90c"),j=a("5770"),x=a("a913"),M=a("3022"),I=a("03f1"),R=a("23b6"),D=a("7c5e"),F=a("7027"),S=a("c730"),C=a("dddf");function N(e,t,a,i,r){if(this.imageryLayer=e,this.x=t,this.y=a,this.level=i,this.request=void 0,0!==i){const r=t/2|0,n=a/2|0,s=i-1;this.parent=e.getImageryFromCache(r,n,s)}if(this.state=C["a"].UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this.textureWebMercator=void 0,this.credits=void 0,this.referenceCount=0,!Object(s["a"])(r)&&e.imageryProvider.ready){const n=e.imageryProvider.tilingScheme;r=n.tileXYToRectangle(t,a,i)}this.rectangle=r}N.createPlaceholder=function(e){const t=new N(e,0,0,0);return t.addReference(),t.state=C["a"].PLACEHOLDER,t},N.prototype.addReference=function(){++this.referenceCount},N.prototype.releaseReference=function(){return--this.referenceCount,0===this.referenceCount?(this.imageryLayer.removeImageryFromCache(this),Object(s["a"])(this.parent)&&this.parent.releaseReference(),Object(s["a"])(this.image)&&Object(s["a"])(this.image.destroy)&&this.image.destroy(),Object(s["a"])(this.texture)&&this.texture.destroy(),Object(s["a"])(this.textureWebMercator)&&this.texture!==this.textureWebMercator&&this.textureWebMercator.destroy(),Object(o["a"])(this),0):this.referenceCount},N.prototype.processStateMachine=function(e,t,a){this.state!==C["a"].UNLOADED||a||(this.state=C["a"].TRANSITIONING,this.imageryLayer._requestImagery(this)),this.state===C["a"].RECEIVED&&(this.state=C["a"].TRANSITIONING,this.imageryLayer._createTexture(e.context,this));const i=this.state===C["a"].READY&&t&&!this.texture;(this.state===C["a"].TEXTURE_LOADED||i)&&(this.state=C["a"].TRANSITIONING,this.imageryLayer._reprojectTexture(e,this,t))};var P=N,B=a("3de6"),U=a("663d");function H(e,t){this._imageryProvider=e,t=Object(n["a"])(t,n["a"].EMPTY_OBJECT),this.alpha=Object(n["a"])(t.alpha,Object(n["a"])(e.defaultAlpha,1)),this.nightAlpha=Object(n["a"])(t.nightAlpha,Object(n["a"])(e.defaultNightAlpha,1)),this.dayAlpha=Object(n["a"])(t.dayAlpha,Object(n["a"])(e.defaultDayAlpha,1)),this.brightness=Object(n["a"])(t.brightness,Object(n["a"])(e.defaultBrightness,H.DEFAULT_BRIGHTNESS)),this.contrast=Object(n["a"])(t.contrast,Object(n["a"])(e.defaultContrast,H.DEFAULT_CONTRAST)),this.hue=Object(n["a"])(t.hue,Object(n["a"])(e.defaultHue,H.DEFAULT_HUE)),this.saturation=Object(n["a"])(t.saturation,Object(n["a"])(e.defaultSaturation,H.DEFAULT_SATURATION)),this.gamma=Object(n["a"])(t.gamma,Object(n["a"])(e.defaultGamma,H.DEFAULT_GAMMA)),this.splitDirection=Object(n["a"])(t.splitDirection,Object(n["a"])(e.defaultSplit,H.DEFAULT_SPLIT)),this.minificationFilter=Object(n["a"])(t.minificationFilter,Object(n["a"])(e.defaultMinificationFilter,H.DEFAULT_MINIFICATION_FILTER)),this.magnificationFilter=Object(n["a"])(t.magnificationFilter,Object(n["a"])(e.defaultMagnificationFilter,H.DEFAULT_MAGNIFICATION_FILTER)),this.show=Object(n["a"])(t.show,!0),this._minimumTerrainLevel=t.minimumTerrainLevel,this._maximumTerrainLevel=t.maximumTerrainLevel,this._rectangle=Object(n["a"])(t.rectangle,m["a"].MAX_VALUE),this._maximumAnisotropy=t.maximumAnisotropy,this._imageryCache={},this._skeletonPlaceholder=new U["a"](P.createPlaceholder(this)),this._show=!0,this._layerIndex=-1,this._isBaseLayer=!1,this._requestImageError=void 0,this._reprojectComputeCommands=[],this.cutoutRectangle=t.cutoutRectangle,this.colorToAlpha=t.colorToAlpha,this.colorToAlphaThreshold=Object(n["a"])(t.colorToAlphaThreshold,H.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD)}Object.defineProperties(H.prototype,{imageryProvider:{get:function(){return this._imageryProvider}},rectangle:{get:function(){return this._rectangle}}}),H.DEFAULT_BRIGHTNESS=1,H.DEFAULT_CONTRAST=1,H.DEFAULT_HUE=0,H.DEFAULT_SATURATION=1,H.DEFAULT_GAMMA=1,H.DEFAULT_SPLIT=B["a"].NONE,H.DEFAULT_MINIFICATION_FILTER=I["a"].LINEAR,H.DEFAULT_MAGNIFICATION_FILTER=M["a"].LINEAR,H.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD=.004,H.prototype.isBaseLayer=function(){return this._isBaseLayer},H.prototype.isDestroyed=function(){return!1},H.prototype.destroy=function(){return Object(o["a"])(this)};const G=new m["a"],Y=new m["a"],q=new m["a"],V=new m["a"];function W(e,t,a){return`${e}:${t}:${a}`}function X(e,t,a){return JSON.stringify([e,t,a])}H.prototype.getViewableRectangle=function(){const e=this._imageryProvider,t=this._rectangle;return e.readyPromise.then((function(){return m["a"].intersection(e.rectangle,t)}))},H.prototype._createTileImagerySkeletons=function(e,t,a){const i=e.data;if(Object(s["a"])(this._minimumTerrainLevel)&&e.level<this._minimumTerrainLevel)return!1;if(Object(s["a"])(this._maximumTerrainLevel)&&e.level>this._maximumTerrainLevel)return!1;const n=this._imageryProvider;if(Object(s["a"])(a)||(a=i.imagery.length),!n.ready)return this._skeletonPlaceholder.loadingImagery.addReference(),i.imagery.splice(a,0,this._skeletonPlaceholder),!0;const o=n.tilingScheme.projection instanceof v["a"]&&e.rectangle.north<v["a"].MaximumLatitude&&e.rectangle.south>-v["a"].MaximumLatitude,c=m["a"].intersection(n.rectangle,this._rectangle,G);let h=m["a"].intersection(e.rectangle,c,Y);if(!Object(s["a"])(h)){if(!this.isBaseLayer())return!1;const t=c,a=e.rectangle;h=Y,a.south>=t.north?h.north=h.south=t.north:a.north<=t.south?h.north=h.south=t.south:(h.south=Math.max(a.south,t.south),h.north=Math.min(a.north,t.north)),a.west>=t.east?h.west=h.east=t.east:a.east<=t.west?h.west=h.east=t.west:(h.west=Math.max(a.west,t.west),h.east=Math.min(a.east,t.east))}let l=0;h.south>0?l=h.south:h.north<0&&(l=h.north);const u=1,p=u*t.getLevelMaximumGeometricError(e.level);let d=z(this,p,l);d=Math.max(0,d);const f=n.maximumLevel;if(d>f&&(d=f),Object(s["a"])(n.minimumLevel)){const e=n.minimumLevel;d<e&&(d=e)}const g=n.tilingScheme,y=g.positionToTileXY(m["a"].northwest(h),d),_=g.positionToTileXY(m["a"].southeast(h),d);let b=e.rectangle.width/512,E=e.rectangle.height/512;const A=g.tileXYToRectangle(y.x,y.y,d);Math.abs(A.south-e.rectangle.north)<E&&y.y<_.y&&++y.y,Math.abs(A.east-e.rectangle.west)<b&&y.x<_.x&&++y.x;const O=g.tileXYToRectangle(_.x,_.y,d);Math.abs(O.north-e.rectangle.south)<E&&_.y>y.y&&--_.y,Math.abs(O.west-e.rectangle.east)<b&&_.x>y.x&&--_.x;const T=m["a"].clone(e.rectangle,V);let L,w,j=g.tileXYToRectangle(y.x,y.y,d),x=m["a"].intersection(j,c,q);o?(g.rectangleToNativeRectangle(T,T),g.rectangleToNativeRectangle(j,j),g.rectangleToNativeRectangle(x,x),g.rectangleToNativeRectangle(c,c),L=g.tileXYToNativeRectangle.bind(g),b=T.width/512,E=T.height/512):L=g.tileXYToRectangle.bind(g);let M,I=0,R=1;!this.isBaseLayer()&&Math.abs(x.west-T.west)>=b&&(I=Math.min(1,(x.west-T.west)/T.width)),!this.isBaseLayer()&&Math.abs(x.north-T.north)>=E&&(R=Math.max(0,(x.north-T.south)/T.height));const D=R;for(let v=y.x;v<=_.x;v++)if(w=I,j=L(v,y.y,d),x=m["a"].simpleIntersection(j,c,q),Object(s["a"])(x)){I=Math.min(1,(x.east-T.west)/T.width),v===_.x&&(this.isBaseLayer()||Math.abs(x.east-T.east)<b)&&(I=1),R=D;for(let e=y.y;e<=_.y;e++){if(M=R,j=L(v,e,d),x=m["a"].simpleIntersection(j,c,q),!Object(s["a"])(x))continue;R=Math.max(0,(x.south-T.south)/T.height),e===_.y&&(this.isBaseLayer()||Math.abs(x.south-T.south)<E)&&(R=0);const t=new r["a"](w,R,I,M),n=this.getImageryFromCache(v,e,d);i.imagery.splice(a,0,new U["a"](n,t,o)),++a}}return!0},H.prototype._calculateTextureTranslationAndScale=function(e,t){let a=t.readyImagery.rectangle,i=e.rectangle;if(t.useWebMercatorT){const e=t.readyImagery.imageryLayer.imageryProvider.tilingScheme;a=e.rectangleToNativeRectangle(a,G),i=e.rectangleToNativeRectangle(i,V)}const n=i.width,s=i.height,o=n/a.width,c=s/a.height;return new r["a"](o*(i.west-a.west)/n,c*(i.south-a.south)/s,o,c)},H.prototype._requestImagery=function(e){const t=this._imageryProvider,a=this;function i(t){if(!Object(s["a"])(t))return r();e.image=t,e.state=C["a"].RECEIVED,e.request=void 0,_["a"].reportSuccess(a._requestImageError)}function r(i){if(e.request.state===f["a"].CANCELLED)return e.state=C["a"].UNLOADED,void(e.request=void 0);e.state=C["a"].FAILED,e.request=void 0;const r=`Failed to obtain image tile X: ${e.x} Y: ${e.y} Level: ${e.level}.`;a._requestImageError=_["a"].reportError(a._requestImageError,t,t.errorEvent,r,e.x,e.y,e.level,i),a._requestImageError.retry&&n()}function n(){const a=new d["a"]({throttle:!1,throttleByServer:!0,type:g["a"].IMAGERY});e.request=a,e.state=C["a"].TRANSITIONING;const n=t.requestImage(e.x,e.y,e.level,a);if(!Object(s["a"])(n))return e.state=C["a"].UNLOADED,void(e.request=void 0);Object(s["a"])(t.getTileCredits)&&(e.credits=t.getTileCredits(e.x,e.y,e.level)),n.then((function(e){i(e)})).catch((function(e){r(e)}))}n()},H.prototype._createTextureWebGL=function(e,t){const a=new L["a"]({minificationFilter:this.minificationFilter,magnificationFilter:this.magnificationFilter}),i=t.image;return Object(s["a"])(i.internalFormat)?new x["a"]({context:e,pixelFormat:i.internalFormat,width:i.width,height:i.height,source:{arrayBufferView:i.bufferView},sampler:a}):new x["a"]({context:e,source:i,pixelFormat:this._imageryProvider.hasAlphaChannel?p["a"].RGBA:p["a"].RGB,sampler:a})},H.prototype._createTexture=function(e,t){const a=this._imageryProvider,i=t.image;if(Object(s["a"])(a.tileDiscardPolicy)){const e=a.tileDiscardPolicy;if(Object(s["a"])(e)){if(!e.isReady())return void(t.state=C["a"].RECEIVED);if(e.shouldDiscardImage(i))return void(t.state=C["a"].INVALID)}}const r=this._createTextureWebGL(e,t);a.tilingScheme.projection instanceof v["a"]?t.textureWebMercator=r:t.texture=r,t.image=void 0,t.state=C["a"].TEXTURE_LOADED},H.prototype._finalizeReprojectTexture=function(e,t){let a=this.minificationFilter;const i=this.magnificationFilter,r=a===I["a"].LINEAR&&i===M["a"].LINEAR;if(r&&!p["a"].isCompressedFormat(t.pixelFormat)&&u["a"].isPowerOfTwo(t.width)&&u["a"].isPowerOfTwo(t.height)){a=I["a"].LINEAR_MIPMAP_LINEAR;const r=O["a"].maximumTextureFilterAnisotropy,o=Math.min(r,Object(n["a"])(this._maximumAnisotropy,r)),c=W(a,i,o);let h=e.cache.imageryLayerMipmapSamplers;Object(s["a"])(h)||(h={},e.cache.imageryLayerMipmapSamplers=h);let l=h[c];Object(s["a"])(l)||(l=h[c]=new L["a"]({wrapS:R["a"].CLAMP_TO_EDGE,wrapT:R["a"].CLAMP_TO_EDGE,minificationFilter:a,magnificationFilter:i,maximumAnisotropy:o})),t.generateMipmap(T["a"].NICEST),t.sampler=l}else{const r=W(a,i,0);let n=e.cache.imageryLayerNonMipmapSamplers;Object(s["a"])(n)||(n={},e.cache.imageryLayerNonMipmapSamplers=n);let o=n[r];Object(s["a"])(o)||(o=n[r]=new L["a"]({wrapS:R["a"].CLAMP_TO_EDGE,wrapT:R["a"].CLAMP_TO_EDGE,minificationFilter:a,magnificationFilter:i})),t.sampler=o}},H.prototype._reprojectTexture=function(e,t,a){const i=t.textureWebMercator||t.texture,r=t.rectangle,s=e.context;if(a=Object(n["a"])(a,!0),a&&!(this._imageryProvider.tilingScheme.projection instanceof h["a"])&&r.width/i.width>1e-5){const e=this;t.addReference();const a=new A["a"]({persists:!0,owner:this,preExecute:function(e){$(e,s,i,t.rectangle)},postExecute:function(a){t.texture=a,e._finalizeReprojectTexture(s,a),t.state=C["a"].READY,t.releaseReference()},canceled:function(){t.state=C["a"].TEXTURE_LOADED,t.releaseReference()}});this._reprojectComputeCommands.push(a)}else a&&(t.texture=i),this._finalizeReprojectTexture(s,i),t.state=C["a"].READY},H.prototype.queueReprojectionCommands=function(e){const t=this._reprojectComputeCommands,a=t.length;for(let i=0;i<a;++i)e.commandList.push(t[i]);t.length=0},H.prototype.cancelReprojections=function(){this._reprojectComputeCommands.forEach((function(e){Object(s["a"])(e.canceled)&&e.canceled()})),this._reprojectComputeCommands.length=0},H.prototype.getImageryFromCache=function(e,t,a,i){const r=X(e,t,a);let n=this._imageryCache[r];return Object(s["a"])(n)||(n=new P(this,e,t,a,i),this._imageryCache[r]=n),n.addReference(),n},H.prototype.removeImageryFromCache=function(e){const t=X(e.x,e.y,e.level);delete this._imageryCache[t]};const k={u_textureDimensions:function(){return this.textureDimensions},u_texture:function(){return this.texture},textureDimensions:new i["a"],texture:void 0},Z=c["a"].supportsTypedArrays()?new Float32Array(128):void 0;function $(e,t,a,i){let r=t.cache.imageryLayer_reproject;if(!Object(s["a"])(r)){r=t.cache.imageryLayer_reproject={vertexArray:void 0,shaderProgram:void 0,sampler:void 0,destroy:function(){Object(s["a"])(this.framebuffer)&&this.framebuffer.destroy(),Object(s["a"])(this.vertexArray)&&this.vertexArray.destroy(),Object(s["a"])(this.shaderProgram)&&this.shaderProgram.destroy()}};const e=new Float32Array(256);let a=0;for(let t=0;t<64;++t){const i=t/63;e[a++]=0,e[a++]=i,e[a++]=1,e[a++]=i}const i={position:0,webMercatorT:1},n=y["a"].getRegularGridIndices(2,64),o=b["a"].createIndexBuffer({context:t,typedArray:n,usage:E["a"].STATIC_DRAW,indexDatatype:l["a"].UNSIGNED_SHORT});r.vertexArray=new D["a"]({context:t,attributes:[{index:i.position,vertexBuffer:b["a"].createVertexBuffer({context:t,typedArray:e,usage:E["a"].STATIC_DRAW}),componentsPerAttribute:2},{index:i.webMercatorT,vertexBuffer:b["a"].createVertexBuffer({context:t,sizeInBytes:512,usage:E["a"].STREAM_DRAW}),componentsPerAttribute:1}],indexBuffer:o});const c=new j["a"]({sources:[S["a"]]});r.shaderProgram=w["a"].fromCache({context:t,vertexShaderSource:c,fragmentShaderSource:F["a"],attributeLocations:i}),r.sampler=new L["a"]({wrapS:R["a"].CLAMP_TO_EDGE,wrapT:R["a"].CLAMP_TO_EDGE,minificationFilter:I["a"].LINEAR,magnificationFilter:M["a"].LINEAR})}a.sampler=r.sampler;const n=a.width,o=a.height;k.textureDimensions.x=n,k.textureDimensions.y=o,k.texture=a;let c=Math.sin(i.south);const h=.5*Math.log((1+c)/(1-c));c=Math.sin(i.north);const p=.5*Math.log((1+c)/(1-c)),m=1/(p-h),d=new x["a"]({context:t,width:n,height:o,pixelFormat:a.pixelFormat,pixelDatatype:a.pixelDatatype,preMultiplyAlpha:a.preMultiplyAlpha});u["a"].isPowerOfTwo(n)&&u["a"].isPowerOfTwo(o)&&d.generateMipmap(T["a"].NICEST);const f=i.south,g=i.north,_=Z;let v=0;for(let s=0;s<64;++s){const e=s/63,t=u["a"].lerp(f,g,e);c=Math.sin(t);const a=.5*Math.log((1+c)/(1-c)),i=(a-h)*m;_[v++]=i,_[v++]=i}r.vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(_),e.shaderProgram=r.shaderProgram,e.outputTexture=d,e.uniformMap=k,e.vertexArray=r.vertexArray}function z(e,t,a){const i=e._imageryProvider,r=i.tilingScheme,n=r.ellipsoid,s=e._imageryProvider.tilingScheme.projection instanceof h["a"]?1:Math.cos(a),o=r.rectangle,c=n.maximumRadius*o.width*s/(i.tileWidth*r.getNumberOfXTilesAtLevel(0)),l=c/t,u=Math.log(l)/Math.log(2),p=Math.round(u);return 0|p}t["a"]=H},ce94:function(e,t,a){"use strict";var i=a("535a"),r=a("45c5"),n=a("e856"),s=a("283e");const o={};o._deprecationWarning=r["a"];const c=Uint32Array.BYTES_PER_ELEMENT;o.parse=function(e,t){const a=Object(i["a"])(t,0);t=a;const r=new Uint8Array(e),h=new DataView(e);t+=c;const l=h.getUint32(t,!0);if(1!==l)throw new s["a"](`Only Instanced 3D Model version 1 is supported. Version ${l} is not.`);t+=c;const u=h.getUint32(t,!0);t+=c;const p=h.getUint32(t,!0);if(0===p)throw new s["a"]("featureTableJsonByteLength is zero, the feature table must be defined.");t+=c;const m=h.getUint32(t,!0);t+=c;const d=h.getUint32(t,!0);t+=c;const f=h.getUint32(t,!0);t+=c;const g=h.getUint32(t,!0);if(1!==g&&0!==g)throw new s["a"](`Only glTF format 0 (uri) or 1 (embedded) are supported. Format ${g} is not.`);t+=c;const y=Object(n["a"])(r,t,p);t+=p;const _=new Uint8Array(e,t,m);let v,b;t+=m,d>0&&(v=Object(n["a"])(r,t,d),t+=d,f>0&&(b=new Uint8Array(e,t,f),b=new Uint8Array(b),t+=f));const E=a+u-t;if(0===E)throw new s["a"]("glTF byte length must be greater than 0.");let A;return t%4===0?A=new Uint8Array(e,t,E):(o._deprecationWarning("i3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),A=new Uint8Array(r.subarray(t,t+E))),{gltfFormat:g,featureTableJson:y,featureTableBinary:_,batchTableJson:v,batchTableBinary:b,gltf:A}},t["a"]=o},dddf:function(e,t,a){"use strict";const i={UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7};t["a"]=Object.freeze(i)},f61d:function(e,t,a){"use strict";const i={CENTER:0,LEFT:1,RIGHT:-1};t["a"]=Object.freeze(i)}}]);