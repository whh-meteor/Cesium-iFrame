(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~698e6a34"],{4820:function(t,e,i){"use strict";var o=i("77af"),n=i("670c"),s=i("be18"),l=i("535a"),a=i("2f63"),c=i("82d9"),r=i("21d7"),d=i("52f0"),h=i("3e44"),u=i("8f7c"),_=i("c26f"),b=i("04e1"),p=i("bdd0"),f=i("44bf"),y=i("a307"),m=i("7977");function v(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT),this._enabled=Object(l["a"])(t.enabled,!1),this._pixelRange=Object(l["a"])(t.pixelRange,80),this._minimumClusterSize=Object(l["a"])(t.minimumClusterSize,2),this._clusterBillboards=Object(l["a"])(t.clusterBillboards,!0),this._clusterLabels=Object(l["a"])(t.clusterLabels,!0),this._clusterPoints=Object(l["a"])(t.clusterPoints,!0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity={},this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._clusterDirty=!1,this._cluster=void 0,this._removeEventListener=void 0,this._clusterEvent=new r["a"],this.show=Object(l["a"])(t.show,!0)}function g(t){return t.coord.x}function O(t){return t.coord.y}function C(t,e){t.x-=e,t.y-=e,t.width+=2*e,t.height+=2*e}const j=new o["a"];function w(t,e,i,n,s){if(Object(a["a"])(t._labelCollection)&&n._clusterLabels?s=_["a"].getScreenSpaceBoundingBox(t,e,s):Object(a["a"])(t._billboardCollection)&&n._clusterBillboards?s=h["a"].getScreenSpaceBoundingBox(t,e,s):Object(a["a"])(t._pointPrimitiveCollection)&&n._clusterPoints&&(s=p["a"].getScreenSpaceBoundingBox(t,e,s)),C(s,i),n._clusterLabels&&!Object(a["a"])(t._labelCollection)&&Object(a["a"])(t.id)&&x(n,t.id.id)&&Object(a["a"])(t.id._label)){const l=n._collectionIndicesByEntity[t.id.id].labelIndex,a=n._labelCollection.get(l),c=_["a"].getScreenSpaceBoundingBox(a,e,j);C(c,i),s=o["a"].union(s,c,s)}return s}function E(t,e){if(t.clusterShow=!0,!Object(a["a"])(t._labelCollection)&&Object(a["a"])(t.id)&&x(e,t.id.id)&&Object(a["a"])(t.id._label)){const i=e._collectionIndicesByEntity[t.id.id].labelIndex,o=e._labelCollection.get(i);o.clusterShow=!0}}function I(t,e,i,o){const n={billboard:o._clusterBillboardCollection.add(),label:o._clusterLabelCollection.add(),point:o._clusterPointCollection.add()};n.billboard.show=!1,n.point.show=!1,n.label.show=!0,n.label.text=e.toLocaleString(),n.label.id=i,n.billboard.position=n.label.position=n.point.position=t,o._clusterEvent.raiseEvent(i,n)}function x(t,e){return Object(a["a"])(t)&&Object(a["a"])(t._collectionIndicesByEntity[e])&&Object(a["a"])(t._collectionIndicesByEntity[e].labelIndex)}function S(t,e,i,o,n){if(!Object(a["a"])(t))return;const s=t.length;for(let l=0;l<s;++l){const s=t.get(l);if(s.clusterShow=!1,!s.show||n._scene.mode===y["a"].SCENE3D&&!o.isPointVisible(s.position))continue;const c=n._clusterLabels&&Object(a["a"])(s._labelCollection),r=n._clusterBillboards&&Object(a["a"])(s.id._billboard),d=n._clusterPoints&&Object(a["a"])(s.id._point);if(c&&(d||r))continue;const h=s.computeScreenSpacePosition(i);Object(a["a"])(h)&&e.push({index:l,collection:t,clustered:!1,coord:h})}}const B=new o["a"],L=new o["a"],P=new o["a"];function D(t){return function(e){if(Object(a["a"])(e)&&e<.05||!t.enabled)return;const i=t._scene,l=t._labelCollection,r=t._billboardCollection,_=t._pointCollection;if(!Object(a["a"])(l)&&!Object(a["a"])(r)&&!Object(a["a"])(_)||!t._clusterBillboards&&!t._clusterLabels&&!t._clusterPoints)return;let p=t._clusterLabelCollection,y=t._clusterBillboardCollection,v=t._clusterPointCollection;Object(a["a"])(p)?p.removeAll():p=t._clusterLabelCollection=new b["a"]({scene:i}),Object(a["a"])(y)?y.removeAll():y=t._clusterBillboardCollection=new u["a"]({scene:i}),Object(a["a"])(v)?v.removeAll():v=t._clusterPointCollection=new f["a"];const C=t._pixelRange,j=t._minimumClusterSize,x=t._previousClusters,D=[],M=t._previousHeight,A=i.camera.positionCartographic.height,N=i.mapProjection.ellipsoid,V=i.camera.positionWC,T=new c["a"](N,V),U=[];let R,z,F,q,H,Z,k,G,J,W,X,Y;t._clusterLabels&&S(l,U,i,T,t),t._clusterBillboards&&S(r,U,i,T,t),t._clusterPoints&&S(_,U,i,T,t);const Q=new m["a"](U,g,O,64,Int32Array);if(A<M)for(F=x.length,R=0;R<F;++R){const e=x[R];if(!T.isPointVisible(e.position))continue;const o=h["a"]._computeScreenSpacePosition(d["a"].IDENTITY,e.position,s["a"].ZERO,n["a"].ZERO,i);if(!Object(a["a"])(o))continue;const l=1-A/M;let c=e.width=e.width*l,r=e.height=e.height*l;c=Math.max(c,e.minimumWidth),r=Math.max(r,e.minimumHeight);const u=o.x-.5*c,_=o.y-.5*r,b=o.x+c,p=o.y+r;for(H=Q.range(u,_,b,p),Z=H.length,W=0,J=[],z=0;z<Z;++z)k=H[z],G=U[k],G.clustered||(++W,X=G.collection,Y=G.index,J.push(X.get(Y).id));if(W>=j)for(I(e.position,W,J,t),D.push(e),z=0;z<Z;++z)U[H[z]].clustered=!0}for(F=U.length,R=0;R<F;++R){const e=U[R];if(e.clustered)continue;e.clustered=!0,X=e.collection,Y=e.index;const i=X.get(Y);q=w(i,e.coord,C,t,B);const n=o["a"].clone(q,L);H=Q.range(q.x,q.y,q.x+q.width,q.y+q.height),Z=H.length;const l=s["a"].clone(i.position);for(W=1,J=[i.id],z=0;z<Z;++z)if(k=H[z],G=U[k],!G.clustered){const e=G.collection.get(G.index),i=w(e,G.coord,C,t,P);s["a"].add(e.position,l,l),o["a"].union(n,i,n),++W,J.push(e.id)}if(W>=j){const e=s["a"].multiplyByScalar(l,1/W,l);for(I(e,W,J,t),D.push({position:e,width:n.width,height:n.height,minimumWidth:q.width,minimumHeight:q.height}),z=0;z<Z;++z)U[H[z]].clustered=!0}else E(i,t)}0===p.length&&(p.destroy(),t._clusterLabelCollection=void 0),0===y.length&&(y.destroy(),t._clusterBillboardCollection=void 0),0===v.length&&(v.destroy(),t._clusterPointCollection=void 0),t._previousClusters=D,t._previousHeight=A}}function M(t,e,i,o){return function(n){let s=this[t];Object(a["a"])(this._collectionIndicesByEntity)||(this._collectionIndicesByEntity={});let l,c,r=this._collectionIndicesByEntity[n.id];if(Object(a["a"])(r)||(r=this._collectionIndicesByEntity[n.id]={billboardIndex:void 0,labelIndex:void 0,pointIndex:void 0}),Object(a["a"])(s)&&Object(a["a"])(r[o]))return s.get(r[o]);Object(a["a"])(s)||(s=this[t]=new e({scene:this._scene}));const d=this[i];d.length>0?(l=d.pop(),c=s.get(l)):(c=s.add(),l=s.length-1),r[o]=l;const h=this;return Promise.resolve().then((function(){h._clusterDirty=!0})),c}}function A(t,e){const i=t._collectionIndicesByEntity[e];Object(a["a"])(i.billboardIndex)||Object(a["a"])(i.labelIndex)||Object(a["a"])(i.pointIndex)||delete t._collectionIndicesByEntity[e]}function N(t){if(!Object(a["a"])(t))return;const e=t.length;for(let i=0;i<e;++i)t.get(i).clusterShow=!0}function V(t){t.enabled||(Object(a["a"])(t._clusterLabelCollection)&&t._clusterLabelCollection.destroy(),Object(a["a"])(t._clusterBillboardCollection)&&t._clusterBillboardCollection.destroy(),Object(a["a"])(t._clusterPointCollection)&&t._clusterPointCollection.destroy(),t._clusterLabelCollection=void 0,t._clusterBillboardCollection=void 0,t._clusterPointCollection=void 0,N(t._labelCollection),N(t._billboardCollection),N(t._pointCollection))}v.prototype._initialize=function(t){this._scene=t;const e=D(this);this._cluster=e,this._removeEventListener=t.camera.changed.addEventListener(e)},Object.defineProperties(v.prototype,{enabled:{get:function(){return this._enabled},set:function(t){this._enabledDirty=t!==this._enabled,this._enabled=t}},pixelRange:{get:function(){return this._pixelRange},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._pixelRange,this._pixelRange=t}},minimumClusterSize:{get:function(){return this._minimumClusterSize},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._minimumClusterSize,this._minimumClusterSize=t}},clusterEvent:{get:function(){return this._clusterEvent}},clusterBillboards:{get:function(){return this._clusterBillboards},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterBillboards,this._clusterBillboards=t}},clusterLabels:{get:function(){return this._clusterLabels},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterLabels,this._clusterLabels=t}},clusterPoints:{get:function(){return this._clusterPoints},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterPoints,this._clusterPoints=t}}}),v.prototype.getLabel=M("_labelCollection",b["a"],"_unusedLabelIndices","labelIndex"),v.prototype.removeLabel=function(t){const e=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!Object(a["a"])(this._labelCollection)||!Object(a["a"])(e)||!Object(a["a"])(e.labelIndex))return;const i=e.labelIndex;e.labelIndex=void 0,A(this,t.id);const o=this._labelCollection.get(i);o.show=!1,o.text="",o.id=void 0,this._unusedLabelIndices.push(i),this._clusterDirty=!0},v.prototype.getBillboard=M("_billboardCollection",u["a"],"_unusedBillboardIndices","billboardIndex"),v.prototype.removeBillboard=function(t){const e=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!Object(a["a"])(this._billboardCollection)||!Object(a["a"])(e)||!Object(a["a"])(e.billboardIndex))return;const i=e.billboardIndex;e.billboardIndex=void 0,A(this,t.id);const o=this._billboardCollection.get(i);o.id=void 0,o.show=!1,o.image=void 0,this._unusedBillboardIndices.push(i),this._clusterDirty=!0},v.prototype.getPoint=M("_pointCollection",f["a"],"_unusedPointIndices","pointIndex"),v.prototype.removePoint=function(t){const e=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!Object(a["a"])(this._pointCollection)||!Object(a["a"])(e)||!Object(a["a"])(e.pointIndex))return;const i=e.pointIndex;e.pointIndex=void 0,A(this,t.id);const o=this._pointCollection.get(i);o.show=!1,o.id=void 0,this._unusedPointIndices.push(i),this._clusterDirty=!0},v.prototype.update=function(t){if(!this.show)return;let e;Object(a["a"])(this._labelCollection)&&this._labelCollection.length>0&&0===this._labelCollection.get(0)._glyphs.length&&(e=t.commandList,t.commandList=[],this._labelCollection.update(t),t.commandList=e),Object(a["a"])(this._billboardCollection)&&this._billboardCollection.length>0&&!Object(a["a"])(this._billboardCollection.get(0).width)&&(e=t.commandList,t.commandList=[],this._billboardCollection.update(t),t.commandList=e),this._enabledDirty&&(this._enabledDirty=!1,V(this),this._clusterDirty=!0),this._clusterDirty&&(this._clusterDirty=!1,this._cluster()),Object(a["a"])(this._clusterLabelCollection)&&this._clusterLabelCollection.update(t),Object(a["a"])(this._clusterBillboardCollection)&&this._clusterBillboardCollection.update(t),Object(a["a"])(this._clusterPointCollection)&&this._clusterPointCollection.update(t),Object(a["a"])(this._labelCollection)&&this._labelCollection.update(t),Object(a["a"])(this._billboardCollection)&&this._billboardCollection.update(t),Object(a["a"])(this._pointCollection)&&this._pointCollection.update(t)},v.prototype.destroy=function(){this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._pointCollection=this._pointCollection&&this._pointCollection.destroy(),this._clusterLabelCollection=this._clusterLabelCollection&&this._clusterLabelCollection.destroy(),this._clusterBillboardCollection=this._clusterBillboardCollection&&this._clusterBillboardCollection.destroy(),this._clusterPointCollection=this._clusterPointCollection&&this._clusterPointCollection.destroy(),Object(a["a"])(this._removeEventListener)&&(this._removeEventListener(),this._removeEventListener=void 0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity=void 0,this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._pixelRangeDirty=!1,this._minimumClusterSizeDirty=!1},e["a"]=v},"509b":function(t,e,i){"use strict";var o=i("be18"),n=i("bef8"),s=i("71ce"),l=i("535a"),a=i("2f63"),c=i("21d7"),r=i("93da"),d=i("df07"),h=i("52f0"),u=i("0260"),_=i("f806"),b=i("a0f5"),p=i("acad"),f=i("2d75"),y=i("99f6"),m=i("4b92"),v=i("2bbe"),g=i("3422"),O=i("0a43"),C=i("108c"),j=i("1ce0"),w=i("474a"),E=i("bd0e"),I=i("e0b6"),x=i("d888"),S=i("7aa6"),B=i("bd04"),L=i("7fcb"),P=i("a796"),D=i("d9c4"),M=i("05b6"),A=i("8f3e"),N=i("ea07"),V=i("f0a0"),T=i("298a"),U=i("9816");const R=new n["a"];function z(t){return new v["a"](t)}function F(t){return Object(O["a"])(t,void 0,z)}function q(t,e){return Object(O["a"])(t,void 0,(function(t){return t instanceof e?t:new e(t)}))}function H(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT);let e=t.id;Object(a["a"])(e)||(e=Object(s["a"])()),this._availability=void 0,this._id=e,this._definitionChanged=new c["a"],this._name=t.name,this._show=Object(l["a"])(t.show,!0),this._parent=void 0,this._propertyNames=["billboard","box","corridor","cylinder","description","ellipse","ellipsoid","label","model","tileset","orientation","path","plane","point","polygon","polyline","polylineVolume","position","properties","rectangle","viewFrom","wall"],this._billboard=void 0,this._billboardSubscription=void 0,this._box=void 0,this._boxSubscription=void 0,this._corridor=void 0,this._corridorSubscription=void 0,this._cylinder=void 0,this._cylinderSubscription=void 0,this._description=void 0,this._descriptionSubscription=void 0,this._ellipse=void 0,this._ellipseSubscription=void 0,this._ellipsoid=void 0,this._ellipsoidSubscription=void 0,this._label=void 0,this._labelSubscription=void 0,this._model=void 0,this._modelSubscription=void 0,this._tileset=void 0,this._tilesetSubscription=void 0,this._orientation=void 0,this._orientationSubscription=void 0,this._path=void 0,this._pathSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._point=void 0,this._pointSubscription=void 0,this._polygon=void 0,this._polygonSubscription=void 0,this._polyline=void 0,this._polylineSubscription=void 0,this._polylineVolume=void 0,this._polylineVolumeSubscription=void 0,this._position=void 0,this._positionSubscription=void 0,this._properties=void 0,this._propertiesSubscription=void 0,this._rectangle=void 0,this._rectangleSubscription=void 0,this._viewFrom=void 0,this._viewFromSubscription=void 0,this._wall=void 0,this._wallSubscription=void 0,this._children=[],this.entityCollection=void 0,this.parent=t.parent,this.merge(t)}function Z(t,e,i){const o=e.length;for(let n=0;n<o;n++){const t=e[n],o=t._show,s=!i&&o,l=i&&o;s!==l&&Z(t,t._children,i)}t._definitionChanged.raiseEvent(t,"isShowing",i,!i)}Object.defineProperties(H.prototype,{availability:Object(C["a"])("availability"),id:{get:function(){return this._id}},definitionChanged:{get:function(){return this._definitionChanged}},name:Object(C["a"])("name"),show:{get:function(){return this._show},set:function(t){if(t===this._show)return;const e=this.isShowing;this._show=t;const i=this.isShowing;e!==i&&Z(this,this._children,i),this._definitionChanged.raiseEvent(this,"show",t,!t)}},isShowing:{get:function(){return this._show&&(!Object(a["a"])(this.entityCollection)||this.entityCollection.show)&&(!Object(a["a"])(this._parent)||this._parent.isShowing)}},parent:{get:function(){return this._parent},set:function(t){const e=this._parent;if(e===t)return;const i=this.isShowing;if(Object(a["a"])(e)){const t=e._children.indexOf(this);e._children.splice(t,1)}this._parent=t,Object(a["a"])(t)&&t._children.push(this);const o=this.isShowing;i!==o&&Z(this,this._children,o),this._definitionChanged.raiseEvent(this,"parent",t,e)}},propertyNames:{get:function(){return this._propertyNames}},billboard:q("billboard",y["a"]),box:q("box",m["a"]),corridor:q("corridor",g["a"]),cylinder:q("cylinder",j["a"]),description:Object(O["a"])("description"),ellipse:q("ellipse",w["a"]),ellipsoid:q("ellipsoid",E["a"]),label:q("label",I["a"]),model:q("model",x["a"]),tileset:q("tileset",S["a"]),orientation:Object(O["a"])("orientation"),path:q("path",B["a"]),plane:q("plane",L["a"]),point:q("point",P["a"]),polygon:q("polygon",D["a"]),polyline:q("polyline",M["a"]),polylineVolume:q("polylineVolume",A["a"]),properties:q("properties",V["a"]),position:F("position"),rectangle:q("rectangle",T["a"]),viewFrom:Object(O["a"])("viewFrom"),wall:q("wall",U["a"])}),H.prototype.isAvailable=function(t){const e=this._availability;return!Object(a["a"])(e)||e.contains(t)},H.prototype.addProperty=function(t){const e=this._propertyNames;e.push(t),Object.defineProperty(this,t,Object(C["a"])(t,!0))},H.prototype.removeProperty=function(t){const e=this._propertyNames,i=e.indexOf(t);this._propertyNames.splice(i,1),delete this[t]},H.prototype.merge=function(t){this.name=Object(l["a"])(this.name,t.name),this.availability=Object(l["a"])(this.availability,t.availability);const e=this._propertyNames,i=Object(a["a"])(t._propertyNames)?t._propertyNames:Object.keys(t),o=i.length;for(let n=0;n<o;n++){const o=i[n];if("parent"===o||"name"===o||"availability"===o)continue;const s=this[o],l=t[o];Object(a["a"])(s)||-1!==e.indexOf(o)||this.addProperty(o),Object(a["a"])(l)&&(Object(a["a"])(s)?Object(a["a"])(s.merge)&&s.merge(l):Object(a["a"])(l.merge)&&Object(a["a"])(l.clone)?this[o]=l.clone():this[o]=l)}};const k=new d["a"],G=new o["a"],J=new u["a"];H.prototype.computeModelMatrix=function(t,e){const i=N["a"].getValueOrUndefined(this._position,t,G);if(!Object(a["a"])(i))return;const o=N["a"].getValueOrUndefined(this._orientation,t,J);return e=Object(a["a"])(o)?h["a"].fromRotationTranslation(d["a"].fromQuaternion(o,k),i,e):_["a"].eastNorthUpToFixedFrame(i,void 0,e),e},H.prototype.computeModelMatrixForHeightReference=function(t,e,i,n,s){const l=N["a"].getValueOrDefault(e,t,f["a"].NONE);let c=N["a"].getValueOrUndefined(this._position,t,G);if(l===f["a"].NONE||!Object(a["a"])(c)||o["a"].equalsEpsilon(c,o["a"].ZERO,r["a"].EPSILON8))return this.computeModelMatrix(t,s);const u=n.cartesianToCartographic(c,R);l===f["a"].CLAMP_TO_GROUND?u.height=i:u.height+=i,c=n.cartographicToCartesian(u,c);const b=N["a"].getValueOrUndefined(this._orientation,t,J);return s=Object(a["a"])(b)?h["a"].fromRotationTranslation(d["a"].fromQuaternion(b,k),c,s):_["a"].eastNorthUpToFixedFrame(c,void 0,s),s},H.supportsMaterialsforEntitiesOnTerrain=function(t){return p["a"].supportsMaterials(t)},H.supportsPolylinesOnTerrain=function(t){return b["a"].isSupported(t)},e["a"]=H},"7d5d":function(t,e,i){"use strict";var o=i("933b"),n=i("71ce"),s=i("2f63"),l=i("21d7"),a=i("452d"),c=i("5ed2"),r=i("283e"),d=i("ea72"),h=i("509b");const u={id:void 0};function _(t){if(t._firing)t._refire=!0;else if(0===t._suspendCount){const e=t._addedEntities,i=t._removedEntities,o=t._changedEntities;if(0!==o.length||0!==e.length||0!==i.length){t._firing=!0;do{t._refire=!1;const n=e.values.slice(0),s=i.values.slice(0),l=o.values.slice(0);e.removeAll(),i.removeAll(),o.removeAll(),t._collectionChanged.raiseEvent(t,n,s,l)}while(t._refire);t._firing=!1}}}function b(t){this._owner=t,this._entities=new o["a"],this._addedEntities=new o["a"],this._removedEntities=new o["a"],this._changedEntities=new o["a"],this._suspendCount=0,this._collectionChanged=new l["a"],this._id=Object(n["a"])(),this._show=!0,this._firing=!1,this._refire=!1}b.prototype.suspendEvents=function(){this._suspendCount++},b.prototype.resumeEvents=function(){this._suspendCount--,_(this)},Object.defineProperties(b.prototype,{collectionChanged:{get:function(){return this._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._entities.values}},show:{get:function(){return this._show},set:function(t){if(t===this._show)return;let e;this.suspendEvents();const i=[],o=this._entities.values,n=o.length;for(e=0;e<n;e++)i.push(o[e].isShowing);for(this._show=t,e=0;e<n;e++){const t=i[e],n=o[e];t!==n.isShowing&&n.definitionChanged.raiseEvent(n,"isShowing",n.isShowing,t)}this.resumeEvents()}},owner:{get:function(){return this._owner}}}),b.prototype.computeAvailability=function(){let t=a["a"].MAXIMUM_VALUE,e=a["a"].MINIMUM_VALUE;const i=this._entities.values;for(let o=0,n=i.length;o<n;o++){const n=i[o],l=n.availability;if(Object(s["a"])(l)){const i=l.start,o=l.stop;c["a"].lessThan(i,t)&&!i.equals(a["a"].MINIMUM_VALUE)&&(t=i),c["a"].greaterThan(o,e)&&!o.equals(a["a"].MAXIMUM_VALUE)&&(e=o)}}return a["a"].MAXIMUM_VALUE.equals(t)&&(t=a["a"].MINIMUM_VALUE),a["a"].MINIMUM_VALUE.equals(e)&&(e=a["a"].MAXIMUM_VALUE),new d["a"]({start:t,stop:e})},b.prototype.add=function(t){t instanceof h["a"]||(t=new h["a"](t));const e=t.id,i=this._entities;if(i.contains(e))throw new r["a"](`An entity with id ${e} already exists in this collection.`);return t.entityCollection=this,i.set(e,t),this._removedEntities.remove(e)||this._addedEntities.set(e,t),t.definitionChanged.addEventListener(b.prototype._onEntityDefinitionChanged,this),_(this),t},b.prototype.remove=function(t){return!!Object(s["a"])(t)&&this.removeById(t.id)},b.prototype.contains=function(t){return this._entities.get(t.id)===t},b.prototype.removeById=function(t){if(!Object(s["a"])(t))return!1;const e=this._entities,i=e.get(t);return!!this._entities.remove(t)&&(this._addedEntities.remove(t)||(this._removedEntities.set(t,i),this._changedEntities.remove(t)),this._entities.remove(t),i.definitionChanged.removeEventListener(b.prototype._onEntityDefinitionChanged,this),_(this),!0)},b.prototype.removeAll=function(){const t=this._entities,e=t.length,i=t.values,o=this._addedEntities,n=this._removedEntities;for(let l=0;l<e;l++){const t=i[l],e=t.id,a=o.get(e);Object(s["a"])(a)||(t.definitionChanged.removeEventListener(b.prototype._onEntityDefinitionChanged,this),n.set(e,t))}t.removeAll(),o.removeAll(),this._changedEntities.removeAll(),_(this)},b.prototype.getById=function(t){return this._entities.get(t)},b.prototype.getOrCreateEntity=function(t){let e=this._entities.get(t);return Object(s["a"])(e)||(u.id=t,e=new h["a"](u),this.add(e)),e},b.prototype._onEntityDefinitionChanged=function(t){const e=t.id;this._addedEntities.contains(e)||this._changedEntities.set(e,t),_(this)},e["a"]=b},a64a:function(t,e,i){"use strict";var o=i("be18"),n=i("535a"),s=i("2f63"),l=i("c52f"),a=i("4f77"),c=i("5ed2"),r=i("93da"),d=i("df07"),h=i("52f0"),u=i("f806"),_=i("a307");const b=new d["a"],p=new d["a"],f=new d["a"],y=new h["a"],m=new o["a"],v=new o["a"],g=new o["a"],O=new o["a"],C=new o["a"],j=new o["a"],w=new c["a"],E=1.25;function I(t,e,i,n,l,a,h){const I=t.scene.mode;let x=l.getValue(a,t._lastCartesian);if(Object(s["a"])(x)){let i,S,B,L,P,D,M=!1,A=!1;if(I===_["a"].SCENE3D){c["a"].addSeconds(a,.001,w);let t=l.getValue(w,m);if(Object(s["a"])(t)||(c["a"].addSeconds(a,-.001,w),t=l.getValue(w,m),A=!0),Object(s["a"])(t)){let e,n=u["a"].computeFixedToIcrfMatrix(a,b),l=u["a"].computeFixedToIcrfMatrix(w,p);Object(s["a"])(n)&&Object(s["a"])(l)?e=d["a"].transpose(n,f):(e=u["a"].computeTemeToPseudoFixedMatrix(a,f),n=d["a"].transpose(e,b),l=u["a"].computeTemeToPseudoFixedMatrix(w,p),d["a"].transpose(l,l));const c=d["a"].multiplyByVector(n,x,C),_=d["a"].multiplyByVector(l,t,j);o["a"].subtract(c,_,O);const y=1e3*o["a"].magnitude(O),I=r["a"].GRAVITATIONALPARAMETER,L=-I/(y*y-2*I/o["a"].magnitude(c));L<0||L>E*h.maximumRadius?(i=v,o["a"].normalize(x,i),o["a"].negate(i,i),B=o["a"].clone(o["a"].UNIT_Z,g),S=o["a"].cross(B,i,m),o["a"].magnitude(S)>r["a"].EPSILON7&&(o["a"].normalize(i,i),o["a"].normalize(S,S),B=o["a"].cross(i,S,g),o["a"].normalize(B,B),M=!0)):o["a"].equalsEpsilon(x,t,r["a"].EPSILON7)||(B=v,o["a"].normalize(c,B),o["a"].normalize(_,_),S=o["a"].cross(B,_,g),A&&(S=o["a"].multiplyByScalar(S,-1,S)),o["a"].equalsEpsilon(S,o["a"].ZERO,r["a"].EPSILON7)||(i=o["a"].cross(S,B,m),d["a"].multiplyByVector(e,i,i),d["a"].multiplyByVector(e,S,S),d["a"].multiplyByVector(e,B,B),o["a"].normalize(i,i),o["a"].normalize(S,S),o["a"].normalize(B,B),M=!0))}}Object(s["a"])(t.boundingSphere)&&(x=t.boundingSphere.center),n&&(L=o["a"].clone(e.position,O),P=o["a"].clone(e.direction,C),D=o["a"].clone(e.up,j));const N=y;M?(N[0]=i.x,N[1]=i.y,N[2]=i.z,N[3]=0,N[4]=S.x,N[5]=S.y,N[6]=S.z,N[7]=0,N[8]=B.x,N[9]=B.y,N[10]=B.z,N[11]=0,N[12]=x.x,N[13]=x.y,N[14]=x.z,N[15]=0):u["a"].eastNorthUpToFixedFrame(x,h,N),e._setTransform(N),n&&(o["a"].clone(L,e.position),o["a"].clone(P,e.direction),o["a"].clone(D,e.up),o["a"].cross(P,D,e.right))}if(i){const i=I===_["a"].SCENE2D||o["a"].equals(t._offset3D,o["a"].ZERO)?void 0:t._offset3D;e.lookAtTransform(e.transform,i)}}function x(t,e,i){this.entity=t,this.scene=e,this.ellipsoid=Object(n["a"])(i,l["a"].WGS84),this.boundingSphere=void 0,this._lastEntity=void 0,this._mode=void 0,this._lastCartesian=new o["a"],this._defaultOffset3D=void 0,this._offset3D=new o["a"]}Object.defineProperties(x,{defaultOffset3D:{get:function(){return this._defaultOffset3D},set:function(t){this._defaultOffset3D=o["a"].clone(t,new o["a"])}}}),x.defaultOffset3D=new o["a"](-14e3,3500,3500);const S=new a["a"],B=new o["a"];x.prototype.update=function(t,e){const i=this.scene,n=this.ellipsoid,l=i.mode;if(l===_["a"].MORPHING)return;const a=this.entity,c=a.position;if(!Object(s["a"])(c))return;const d=a!==this._lastEntity,h=l!==this._mode,u=i.camera;let b=d||h,p=!0;if(d){const i=a.viewFrom,l=Object(s["a"])(i);if(!l&&Object(s["a"])(e)){S.pitch=-r["a"].PI_OVER_FOUR,S.range=0;const i=c.getValue(t,B);if(Object(s["a"])(i)){const t=2-1/Math.max(1,o["a"].magnitude(i)/n.maximumRadius);S.pitch*=t}u.viewBoundingSphere(e,S),this.boundingSphere=e,b=!1,p=!1}else l&&Object(s["a"])(i.getValue(t,this._offset3D))||o["a"].clone(x._defaultOffset3D,this._offset3D)}else h||this._mode===_["a"].SCENE2D||o["a"].clone(u.position,this._offset3D);this._lastEntity=a,this._mode=l,I(this,u,b,p,c,t,n)},e["a"]=x}}]);