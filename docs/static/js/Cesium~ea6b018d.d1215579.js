(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~ea6b018d"],{2695:function(e,t,n){"use strict";var i=n("2f63"),a=n("1b8d"),o=n("8bde"),r=n("60e0");const s={};function c(e,t){const n=Object(i["a"])(t.indices)?t.indices.count:r["a"].getAttributeBySemantic(t,"POSITION").count,o=t.primitiveType;o===a["a"].POINTS?e.pointsLength+=n:a["a"].isTriangles(o)&&(e.trianglesLength+=u(o,n));const s=t.attributes,c=s.length;for(let a=0;a<c;a++){const t=s[a];if(Object(i["a"])(t.buffer)){const n=Object(i["a"])(t.typedArray);e.addBuffer(t.buffer,n)}}const d=t.outlineCoordinates;if(Object(i["a"])(d)&&Object(i["a"])(d.buffer)){const t=!1;e.addBuffer(d.buffer,t)}const l=t.indices;if(Object(i["a"])(l)&&Object(i["a"])(l.buffer)){const t=Object(i["a"])(l.typedArray);e.addBuffer(l.buffer,t)}}function u(e,t){switch(e){case a["a"].TRIANGLES:return t/3;case a["a"].TRIANGLE_STRIP:case a["a"].TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}function d(e,t){const n=t.positionBuffer2D;if(Object(i["a"])(n)){const t=!0;e.addBuffer(n,t)}}function l(e,t){const n=t.morphTargets;if(!Object(i["a"])(n))return;const a=!1,o=n.length;for(let r=0;r<o;r++){const t=n[r].attributes,o=t.length;for(let n=0;n<o;n++){const o=t[n];Object(i["a"])(o.buffer)&&e.addBuffer(o.buffer,a)}}}function f(e,t){const n=m(t),a=n.length;for(let o=0;o<a;o++){const t=n[o];Object(i["a"])(t)&&Object(i["a"])(t.texture)&&e.addTexture(t.texture)}}function m(e){const t=e.metallicRoughness,n=[e.emissiveTexture,e.normalTexture,e.occlusionTexture,t.baseColorTexture,t.metallicRoughnessTexture],a=e.specularGlossiness;return Object(i["a"])(a)&&(n.push(a.diffuseTexture),n.push(a.specularGlossinessTexture)),n}function T(e,t){const n=t.length;for(let a=0;a<n;a++){const n=t[a];if(n instanceof o["a"].FeatureIdTexture){const t=n.textureReader;Object(i["a"])(t.texture)&&e.addTexture(t.texture)}}}function p(e,t){const n=t.structuralMetadata;Object(i["a"])(n)&&(_(e,n),e.propertyTablesByteLength+=n.propertyTablesByteLength);const a=t.featureTables;if(!Object(i["a"])(a))return;const o=a.length;for(let i=0;i<o;i++){const t=a[i];e.addBatchTexture(t.batchTexture)}}function _(e,t){const n=t.propertyTextures;if(!Object(i["a"])(n))return;const a=n.length;for(let o=0;o<a;o++){const t=n[o],a=t.properties;for(const n in a)if(a.hasOwnProperty(n)){const t=a[n],o=t.textureReader;Object(i["a"])(o.texture)&&e.addTexture(o.texture)}}}s.name="PrimitiveStatisticsPipelineStage",s.process=function(e,t,n){const i=e.model,a=i.statistics;c(a,t),d(a,e.runtimePrimitive),l(a,t),f(a,t.material),T(a,t.featureIds),p(a,i)},s._countGeometry=c,s._count2DPositions=d,s._countMorphTargetAttributes=l,s._countMaterialTextures=f,s._countFeatureIdTextures=T,s._countBinaryMetadata=p,t["a"]=s},"33ee":function(e,t,n){"use strict";var i=n("cef5"),a=n("f20a"),o=n("8b68"),r=n("be18"),s=n("dc1c"),c=n("2bb9"),u=n("2f63"),d=n("52f0"),l=n("60e0"),f=n("a307"),m=n("ef54"),T=n("a141"),p=n("0c80");const _=new d["a"],b=new d["a"],S={name:"SceneMode2DPipelineStage",process:function(e,t,n){const i=l["a"].getAttributeBySemantic(t,T["a"].POSITION),a=e.shaderBuilder,o=e.model,r=o.sceneGraph.computedModelMatrix,s=e.runtimeNode.computedTransform,f=d["a"].multiplyTransformation(r,s,_),p=I(e,f,n),S=e.runtimePrimitive;S.boundingSphere2D=p;const h=e.runtimeNode.node.instances;if(Object(u["a"])(h))return;if(Object(u["a"])(i.typedArray)){const e=N(i,f,p,n);S.positionBuffer2D=e,o._modelResources.push(e),i.typedArray=void 0}a.addDefine("USE_2D_POSITIONS",void 0,m["a"].VERTEX),a.addUniform("mat4","u_modelView2D",m["a"].VERTEX);const E=d["a"].fromTranslation(p.center,new d["a"]),O=n.context,y={u_modelView2D:function(){return d["a"].multiplyTransformation(O.uniformState.view,E,b)}};e.uniformMap=Object(c["a"])(y,e.uniformMap)}},h=new r["a"],E=new r["a"];function I(e,t,n){const a=d["a"].multiplyByPoint(t,e.positionMin,h),o=p["a"].computeActualWgs84Position(n,a,a),r=d["a"].multiplyByPoint(t,e.positionMax,E),s=p["a"].computeActualWgs84Position(n,r,r);return i["a"].fromCornerPoints(o,s,new i["a"])}const O=new r["a"];function y(e,t){const n=e.length,i=new Float32Array(n),a=t.quantizedVolumeOffset,o=t.quantizedVolumeStepSize;for(let s=0;s<n;s+=3){const t=r["a"].fromArray(e,s,O),n=r["a"].multiplyComponents(t,o,t),c=r["a"].add(n,a,n);i[s]=c.x,i[s+1]=c.y,i[s+2]=c.z}return i}function A(e,t,n,i){let a;a=Object(u["a"])(e.quantization)?y(e.typedArray,e.quantization):e.typedArray.slice();const o=e.byteOffset/Float32Array.BYTES_PER_ELEMENT,s=a.length,c=Object(u["a"])(e.byteStride)?e.byteStride/Float32Array.BYTES_PER_ELEMENT:3;for(let u=o;u<s;u+=c){const e=r["a"].fromArray(a,u,O);if(isNaN(e.x)||isNaN(e.y)||isNaN(e.z))continue;const o=d["a"].multiplyByPoint(t,e,e),s=p["a"].computeActualWgs84Position(i,o,o),c=r["a"].subtract(s,n,s);a[u]=c.x,a[u+1]=c.y,a[u+2]=c.z}return a}function N(e,t,n,i){const r=Object(s["a"])(i);r.mode=f["a"].COLUMBUS_VIEW;const c=n.center,u=A(e,t,c,r),d=a["a"].createVertexBuffer({context:i.context,typedArray:u,usage:o["a"].STATIC_DRAW});return d.vertexArrayDestroyable=!1,d}t["a"]=S},6471:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("cef5"),a=n("dc1c"),o=n("2f63"),r=n("a894"),s=n("52f0"),c=n("bd39"),u=n("6b0e"),d=n("c92c"),l=n("60e0"),f=n("d289"),m=n("6dc0"),T=n("a307"),p=n("c86b"),_=n("3626"),b=n("7c5e");function S(e,t){const n=e.shaderBuilder;n.addVertexLines([d["a"]]),n.addFragmentLines([u["a"]]);const o=e.model,S=t.context,E=h(e),I=new b["a"]({context:S,indexBuffer:E,attributes:e.attributes});o._pipelineResources.push(I);const O=n.buildShaderProgram(t.context);o._pipelineResources.push(O);const y=e.alphaOptions.pass,A=o.sceneGraph,N=s["a"].multiplyTransformation(A.computedModelMatrix,e.runtimeNode.computedTransform,new s["a"]);let g;if(t.mode!==T["a"].SCENE3D&&!t.scene3DOnly&&o._projectTo2D){const t=e.runtimePrimitive;g=t.boundingSphere2D}else g=i["a"].transform(e.boundingSphere,N,e.boundingSphere);let x=Object(a["a"])(m["a"].fromCache(e.renderStateOptions),!0);o.opaquePass===f["a"].CESIUM_3D_TILE&&(x.stencilTest=_["a"].setCesium3DTileBit(),x.stencilMask=_["a"].CESIUM_3D_TILE_MASK),x.cull.face=l["a"].getCullFace(N,e.primitiveType),x=m["a"].fromCache(x);const C=e.count,F=new r["a"]({boundingVolume:g,modelMatrix:N,uniformMap:e.uniformMap,renderState:x,vertexArray:I,shaderProgram:O,cull:o.cull,pass:y,count:C,pickId:e.pickId,instanceCount:e.instanceCount,primitiveType:e.primitiveType,debugShowBoundingVolume:o.debugShowBoundingVolume,castShadows:p["a"].castShadows(o.shadows),receiveShadows:p["a"].receiveShadows(o.shadows)}),M=o.hasSilhouette(t);return new c["a"]({primitiveRenderResources:e,command:F,useSilhouetteCommands:M})}function h(e){const t=e.wireframeIndexBuffer;if(Object(o["a"])(t))return t;const n=e.indices;return Object(o["a"])(n)?n.buffer:void 0}},6942:function(e,t,n){"use strict";var i=n("1da3"),a=n("ef54"),o=n("9e17"),r=n("1df3"),s=n("7693");const c={name:"PrimitiveOutlinePipelineStage",process:function(e,t,n){const c=e.shaderBuilder,u=e.uniformMap;c.addDefine("HAS_PRIMITIVE_OUTLINE",void 0,a["a"].BOTH),c.addAttribute("vec3","a_outlineCoordinates"),c.addVarying("vec3","v_outlineCoordinates");const d=t.outlineCoordinates,l={index:e.attributeIndex++,vertexBuffer:d.buffer,componentsPerAttribute:i["a"].getNumberOfComponents(d.type),componentDatatype:d.componentDatatype,offsetInBytes:d.byteOffset,strideInBytes:d.byteStride,normalize:d.normalized};e.attributes.push(l),c.addUniform("sampler2D","model_outlineTexture",a["a"].FRAGMENT);const f=o["a"].createTexture(n.context);u.model_outlineTexture=function(){return f};const m=e.model;c.addUniform("vec4","model_outlineColor",a["a"].FRAGMENT),u.model_outlineColor=function(){return m.outlineColor},c.addUniform("bool","model_showOutline",a["a"].FRAGMENT),u.model_showOutline=function(){return m.showOutline},c.addVertexLines([r["a"]]),c.addFragmentLines([s["a"]])}};t["a"]=c},"794a":function(e,t,n){"use strict";var i=n("2bb9"),a=n("ef54"),o=n("b8b3"),r=n("a141");const s={};function c(e){let t=-1;const n=e.attributes,i=n.length;for(let a=0;a<i;a++){const e=n[a],i=e.semantic===r["a"].JOINTS||e.semantic===r["a"].WEIGHTS;i&&(t=Math.max(t,e.setIndex))}return t}function u(e,t){e.addFunction(s.FUNCTION_ID_GET_SKINNING_MATRIX,s.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX,a["a"].VERTEX);const n="mat4 skinnedMatrix = mat4(0);";let i,o;e.addFunctionLines(s.FUNCTION_ID_GET_SKINNING_MATRIX,[n]);const r=["x","y","z","w"],u=c(t);for(i=0;i<=u;i++)for(o=0;o<=3;o++){const t=r[o],n=`skinnedMatrix += a_weights_${i}.${t} * u_jointMatrices[int(a_joints_${i}.${t})];`;e.addFunctionLines(s.FUNCTION_ID_GET_SKINNING_MATRIX,[n])}const d="return skinnedMatrix;";e.addFunctionLines(s.FUNCTION_ID_GET_SKINNING_MATRIX,[d])}s.name="SkinningPipelineStage",s.FUNCTION_ID_GET_SKINNING_MATRIX="getSkinningMatrix",s.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX="mat4 getSkinningMatrix()",s.process=function(e,t){const n=e.shaderBuilder;n.addDefine("HAS_SKINNING",void 0,a["a"].VERTEX),u(n,t);const r=e.runtimeNode,s=r.computedJointMatrices;n.addUniform("mat4",`u_jointMatrices[${s.length}]`,a["a"].VERTEX),n.addVertexLines([o["a"]]);const c={u_jointMatrices:function(){return r.computedJointMatrices}};e.uniformMap=Object(i["a"])(c,e.uniformMap)},t["a"]=s},9693:function(e,t,n){"use strict";const i={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2,getStyleCommandsNeeded:function(e,t){return 0===t?i.ALL_OPAQUE:t===e?i.ALL_TRANSLUCENT:i.OPAQUE_AND_TRANSLUCENT}};t["a"]=Object.freeze(i)},"9e17":function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var i=n("2f63"),a=n("535a"),o=n("e42d"),r=n("b997"),s=n("6c84"),c=n("a913"),u=n("3022"),d=n("03f1"),l=n("23b6");const f=65534,m=255;function T(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);const t=e.triangleIndices,n=e.outlineIndices,i=e.originalVertexCount;this._triangleIndices=t,this._originalVertexCount=i,this._edges=new E(n,i),this._outlineCoordinatesTypedArray=void 0,this._extraVertices=[],p(this)}function p(e){let t=e._triangleIndices;const n=e._edges,a=[],o=e._extraVertices,r=e._originalVertexCount,s={};for(let c=0;c<t.length;c+=3){let e=t[c],u=t[c+1],d=t[c+2];const l=!1,T=l||n.hasEdge(e,u),p=l||n.hasEdge(u,d),b=l||n.hasEdge(d,e);let S=_(a,e,u,d,T,p,b);while(Object(i["a"])(S)){let n=s[S];if(!Object(i["a"])(n)){n=r+o.length;let e=S;while(e>=r)e=o[e-r];o.push(e),s[S]=n}n>f&&(t instanceof Uint16Array||t instanceof Uint8Array)?t=new Uint32Array(t):n>m&&t instanceof Uint8Array&&(t=new Uint16Array(t)),S===e?(e=n,t[c]=n):S===u?(u=n,t[c+1]=n):(d=n,t[c+2]=n),S=_(a,e,u,d,T,p,b)}}e._triangleIndices=t,e._outlineCoordinatesTypedArray=new Float32Array(a)}function _(e,t,n,i,a,o,r){const s=r?1:0,c=a?1:0,u=0,d=b(e,t,s,c,u);if(0===d)return t;const l=0,f=a?1:0,m=o?1:0,T=b(e,n,l,f,m);if(0===T)return n;const p=r?1:0,_=0,h=o?1:0,E=b(e,i,p,_,h);if(0===E)return i;const I=d&T&E;let O,y,A;if(1&I)O=0,y=1,A=2;else if(2&I)O=0,A=1,y=2;else if(4&I)y=0,O=1,A=2;else if(8&I)y=0,A=1,O=2;else if(16&I)A=0,O=1,y=2;else{if(!(32&I)){const e=S(d),a=S(T),o=S(E);return e<a&&e<o?t:a<o?n:i}A=0,y=1,O=2}const N=3*t;e[N+O]=s,e[N+y]=c,e[N+A]=u;const g=3*n;e[g+O]=l,e[g+y]=f,e[g+A]=m;const x=3*i;e[x+O]=p,e[x+y]=_,e[x+A]=h}function b(e,t,n,a,o){const r=3*t,s=e[r],c=e[r+1],u=e[r+2];return Object(i["a"])(s)?(s===n&&c===a&&u===o)<<0|(s===n&&c===o&&u===a)<<1|(s===a&&c===n&&u===o)<<2|(s===a&&c===o&&u===n)<<3|(s===o&&c===n&&u===a)<<4|(s===o&&c===a&&u===n)<<5:63}function S(e){return(1&e)+(e>>1&1)+(e>>2&1)+(e>>3&1)+(e>>4&1)+(e>>5&1)}function h(e){const t=new Uint8Array(e);return t[e-1]=192,8===e?t[e-1]=96:4===e?t[e-1]=48:2===e?t[e-1]=24:1===e&&(t[e-1]=12),t}function E(e,t){this._originalVertexCount=t,this._edges=new Set;for(let n=0;n<e.length;n+=2){const t=e[n],i=e[n+1],a=Math.min(t,i),o=Math.max(t,i),r=a*this._originalVertexCount+o;this._edges.add(r)}}Object.defineProperties(T.prototype,{updatedTriangleIndices:{get:function(){return this._triangleIndices}},outlineCoordinates:{get:function(){return this._outlineCoordinatesTypedArray}}}),T.prototype.updateAttribute=function(e){const t=this._extraVertices,n=e.length,i=n/this._originalVertexCount,a=t.length,o=e.constructor,r=new o(e.length+a*i);r.set(e);for(let s=0;s<a;s++){const e=t[s]*i,a=n+s*i;for(let t=0;t<i;t++)r[a+t]=r[e+t]}return r},T.createTexture=function(e){let t=e.cache.modelOutliningCache;if(Object(i["a"])(t)||(t=e.cache.modelOutliningCache={}),Object(i["a"])(t.outlineTexture))return t.outlineTexture;const n=Math.min(4096,r["a"].maximumTextureSize);let a=n;const f=h(a),m=[];while(a>1)a>>=1,m.push(h(a));const T=new c["a"]({context:e,source:{arrayBufferView:f,mipLevels:m},width:n,height:1,pixelFormat:o["a"].LUMINANCE,sampler:new s["a"]({wrapS:l["a"].CLAMP_TO_EDGE,wrapT:l["a"].CLAMP_TO_EDGE,minificationFilter:d["a"].LINEAR_MIPMAP_LINEAR,magnificationFilter:u["a"].LINEAR})});return t.outlineTexture=T,T},E.prototype.hasEdge=function(e,t){const n=Math.min(e,t),i=Math.max(e,t),a=n*this._originalVertexCount+i;return this._edges.has(a)}},ae91:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("cef5"),a=n("be18"),o=n("dc1c"),r=n("2f63"),s=n("60e0"),c=n("ed6f");function u(e,t){this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.featureIdVertexAttributeSetIndex=e.featureIdVertexAttributeSetIndex,this.hasPropertyTable=!1,this.uniformMap=Object(o["a"])(e.uniformMap),this.alphaOptions=Object(o["a"])(e.alphaOptions),this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;const n=t.primitive;this.count=Object(r["a"])(n.indices)?n.indices.count:s["a"].getAttributeBySemantic(n,"POSITION").count,this.indices=n.indices,this.wireframeIndexBuffer=void 0,this.primitiveType=n.primitiveType;const u=s["a"].getPositionMinMax(n,e.instancingTranslationMin,e.instancingTranslationMax);this.positionMin=a["a"].clone(u.min,new a["a"]),this.positionMax=a["a"].clone(u.max,new a["a"]),this.boundingSphere=i["a"].fromCornerPoints(this.positionMin,this.positionMax,new i["a"]),this.lightingOptions=new c["a"],this.pickId=void 0,this.renderStateOptions=Object(o["a"])(e.renderStateOptions,!0),this.styleCommandsNeeded=void 0}},cf22:function(e,t,n){"use strict";var i=n("f20a"),a=n("8b68"),o=n("2f63"),r=n("0123"),s=n("60e0"),c=n("1b8d"),u=n("ef54"),d=n("a141"),l=n("1842");const f={};function m(e,t,n){const c=s["a"].getAttributeBySemantic(e,d["a"].POSITION),u=c.count,f=n.context.webgl2;let m;if(Object(o["a"])(t)){const e=t.buffer,n=t.count;if(Object(o["a"])(e)&&f){const t=e.sizeInBytes===n;m=t?new Uint8Array(n):r["a"].createTypedArray(u,n),e.getBufferData(m)}else m=t.typedArray}const T=e.primitiveType,p=l["a"].createWireframeIndices(T,u,m),_=r["a"].fromSizeInBytes(p.BYTES_PER_ELEMENT);return i["a"].createIndexBuffer({context:n.context,typedArray:p,usage:a["a"].STATIC_DRAW,indexDatatype:_})}f.name="WireframePipelineStage",f.process=function(e,t,n){const i=e.shaderBuilder;i.addDefine("HAS_WIREFRAME",void 0,u["a"].FRAGMENT);const a=e.model,o=m(t,e.indices,n);a._pipelineResources.push(o),e.wireframeIndexBuffer=o;const r=!1;a.statistics.addBuffer(o,r);const s=e.primitiveType,d=e.count;e.primitiveType=c["a"].LINES,e.count=l["a"].getWireframeIndicesCount(s,d)},t["a"]=f},dabf:function(e,t,n){"use strict";var i=n("be18"),a=n("a561"),o=n("93da"),r=n("c4a1"),s=n("dc1c"),c=n("535a"),u=n("2f63"),d=n("52f0"),l=n("d887"),f=n("60e0"),m=n("713f"),T=n("d289"),p=n("d373"),_=n("283e"),b=n("a307"),S=n("ef54"),h=n("a141");const E=new a["a"],I={name:"PointCloudStylingPipelineStage",process:function(e,t,n){const i=e.shaderBuilder,a=e.model,o=a.style,s=a.structuralMetadata,d=Object(u["a"])(s)?s.propertyAttributes:void 0,I=Object(u["a"])(a.featureTableId)&&a.featureTables[a.featureTableId].featuresLength>0,O=!Object(u["a"])(d)&&I;if(Object(u["a"])(o)&&!O){const n=g(d),a=C(o,n);F(i,a);const r=R(a),s=r.indexOf("normalMC")>=0,c=f["a"].getAttributeBySemantic(t,h["a"].NORMAL);if(s&&!c)throw new _["a"]("Style references the NORMAL semantic but the point cloud does not have normals");i.addDefine("COMPUTE_POSITION_WC_STYLE",void 0,S["a"].VERTEX);const u=a.styleTranslucent;u&&(e.alphaOptions.pass=T["a"].TRANSLUCENT)}const A=a.pointCloudShading;let N,x,M;a._attenuation&&i.addDefine("HAS_POINT_CLOUD_ATTENUATION",void 0,S["a"].VERTEX),l["a"].is3DTiles(a.type)&&(x=!0,N=a.content,M=N.tile.refine===r["a"].ADD),i.addUniform("vec4","model_pointCloudParameters",S["a"].VERTEX),i.addVertexLines([p["a"]]);const D=e.uniformMap;D.model_pointCloudParameters=function(){const i=E;let a=1;x&&(a=M?5:N.tileset.maximumScreenSpaceError),i.x=Object(c["a"])(A.maximumAttenuation,a),i.x*=n.pixelRatio;const o=y(e,t,A,N);i.y=o*A.geometricErrorScale;const r=n.context,s=n.camera.frustum;let u;return u=n.mode===b["a"].SCENE2D||s instanceof m["a"]?Number.POSITIVE_INFINITY:r.drawingBufferHeight/n.camera.frustum.sseDenominator,i.z=u,x&&(i.w=N.tileset.timeSinceLoad),i}}},O=new i["a"];function y(e,t,n,a){if(Object(u["a"])(a)){const e=a.tile.geometricError;if(e>0)return e}if(Object(u["a"])(n.baseResolution))return n.baseResolution;const r=f["a"].getAttributeBySemantic(t,h["a"].POSITION),s=r.count,c=e.runtimeNode.transform;let l=i["a"].subtract(r.max,r.min,O);l=d["a"].multiplyByPointAsVector(c,l,O);const m=l.x*l.y*l.z,T=o["a"].cbrt(m/s);return T}const A={colorStyleFunction:void 0,showStyleFunction:void 0,pointSizeStyleFunction:void 0,styleTranslucent:!1},N={POSITION:"attributes.positionMC",POSITION_ABSOLUTE:"v_positionWC",COLOR:"attributes.color_0",NORMAL:"attributes.normalMC"};function g(e){const t=Object(s["a"])(N);if(!Object(u["a"])(e))return t;for(let n=0;n<e.length;n++){const i=e[n],a=i.properties;for(const e in a)a.hasOwnProperty(e)&&(t[e]="metadata."+e)}return t}const x="ProcessedAttributes attributes, Metadata metadata, float tiles3d_tileset_time";function C(e,t){const n=A,i={translucent:!1};return n.colorStyleFunction=e.getColorShaderFunction(`getColorFromStyle(${x})`,t,i),n.showStyleFunction=e.getShowShaderFunction(`getShowFromStyle(${x})`,t,i),n.pointSizeStyleFunction=e.getPointSizeShaderFunction(`getPointSizeFromStyle(${x})`,t,i),n.styleTranslucent=Object(u["a"])(n.colorStyleFunction)&&i.translucent,n}function F(e,t){const n=t.colorStyleFunction;Object(u["a"])(n)&&(e.addDefine("HAS_POINT_CLOUD_COLOR_STYLE",void 0,S["a"].BOTH),e.addVertexLines([n]),e.addVarying("vec4","v_pointCloudColor"));const i=t.showStyleFunction;Object(u["a"])(i)&&(e.addDefine("HAS_POINT_CLOUD_SHOW_STYLE",void 0,S["a"].VERTEX),e.addVertexLines([i]));const a=t.pointSizeStyleFunction;Object(u["a"])(a)&&(e.addDefine("HAS_POINT_CLOUD_POINT_SIZE_STYLE",void 0,S["a"].VERTEX),e.addVertexLines([a]))}function M(e,t){const n=/attributes\.(\w+)/g;let i=n.exec(e);while(null!==i){const a=i[1];-1===t.indexOf(a)&&t.push(a),i=n.exec(e)}}function R(e){const t=e.colorStyleFunction,n=e.showStyleFunction,i=e.pointSizeStyleFunction,a=[];return Object(u["a"])(t)&&M(t,a),Object(u["a"])(n)&&M(n,a),Object(u["a"])(i)&&M(i,a),a}t["a"]=I},f23e:function(e,t,n){"use strict";var i=n("535a"),a=n("2f63"),o=n("ef54"),r=n("fcb6"),s=n("8bde"),c=n("60e0");const u={};function d(e){return e instanceof s["a"].FeatureIdTexture?"HAS_SELECTED_FEATURE_ID_TEXTURE":"HAS_SELECTED_FEATURE_ID_ATTRIBUTE"}function l(e){return e instanceof s["a"].FeatureIdTexture?o["a"].FRAGMENT:o["a"].BOTH}function f(e,t,n){let o,r;return Object(a["a"])(t.instances)&&(r=c["a"].getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),Object(a["a"])(r))?(o=Object(i["a"])(r.label,r.positionalLabel),{featureIds:r,variableName:o,shaderDestination:l(r),featureIdDefine:d(r)}):(r=c["a"].getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),o=Object(i["a"])(r.label,r.positionalLabel),{featureIds:r,variableName:o,shaderDestination:l(r),featureIdDefine:d(r)})}function m(e){e.addStructField(u.STRUCT_ID_SELECTED_FEATURE,"int","id"),e.addStructField(u.STRUCT_ID_SELECTED_FEATURE,"vec2","st"),e.addStructField(u.STRUCT_ID_SELECTED_FEATURE,"vec4","color")}u.name="SelectedFeatureIdPipelineStage",u.STRUCT_ID_SELECTED_FEATURE="SelectedFeature",u.STRUCT_NAME_SELECTED_FEATURE="SelectedFeature",u.FUNCTION_ID_FEATURE_VARYINGS_VS="updateFeatureStructVS",u.FUNCTION_ID_FEATURE_VARYINGS_FS="updateFeatureStructFS",u.FUNCTION_SIGNATURE_UPDATE_FEATURE="void updateFeatureStruct(inout SelectedFeature feature)",u.process=function(e,t,n){const i=e.shaderBuilder;e.hasPropertyTable=!0;const s=e.model,c=e.runtimeNode.node,u=f(s,c,t),d=u.shaderDestination;i.addDefine("HAS_SELECTED_FEATURE_ID",void 0,d),i.addDefine("SELECTED_FEATURE_ID",u.variableName,d),i.addDefine(u.featureIdDefine,void 0,d),m(i);const l=u.featureIds.nullFeatureId,T=e.uniformMap;Object(a["a"])(l)&&(i.addDefine("HAS_NULL_FEATURE_ID",void 0,d),i.addUniform("int","model_nullFeatureId",d),T.model_nullFeatureId=function(){return l}),u.shaderDestination===o["a"].BOTH&&i.addVertexLines([r["a"]]),i.addFragmentLines([r["a"]])},t["a"]=u}}]);