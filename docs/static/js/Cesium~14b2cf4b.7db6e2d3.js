(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~14b2cf4b"],{"02a7":function(t,e,i){"use strict";var s=i("933b"),o=i("be18"),n=i("bd8d"),a=i("9541"),r=i("2f63"),h=i("aee6"),l=i("77bc"),c=i("c2eb"),d=i("ac9c"),p=i("894b"),u=i("2d19"),f=i("b83c"),m=i("40b2"),g=i("ea07");const y=new n["a"],v=new h["a"],b=new h["a"],_=o["a"].ZERO,O=new o["a"];function w(t,e,i,o,n,a,h){let l;this.translucent=e,this.appearanceType=i,this.depthFailAppearanceType=o,this.depthFailMaterialProperty=n,this.depthFailMaterial=void 0,this.closed=a,this.shadows=h,this.primitives=t,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new s["a"],this.updaters=new s["a"],this.updatersWithAttributes=new s["a"],this.attributes=new s["a"],this.subscriptions=new s["a"],this.showsUpdated=new s["a"],this.itemsToRemove=[],this.invalidated=!1,Object(r["a"])(n)&&(l=n.definitionChanged.addEventListener(w.prototype.onMaterialChanged,this)),this.removeMaterialSubscription=l}function C(t,e,i,s,o){this._solidItems=[],this._translucentItems=[],this._primitives=t,this._appearanceType=e,this._depthFailAppearanceType=i,this._closed=s,this._shadows=o}function j(t,e){const i=t.length;for(let s=i-1;s>=0;s--){const i=t[s];if(i.remove(e))return 0===i.updaters.length&&(t.splice(s,1),i.destroy()),!0}return!1}function P(t,e,i){let s=!1;const o=e.length;for(let n=0;n<o;++n){const o=e[n],a=o.itemsToRemove,r=a.length;if(r>0)for(n=0;n<r;n++){const e=a[n];o.remove(e),t.add(i,e),s=!0}}return s}function D(t,e,i,s){let o,n=e.length;for(o=n-1;o>=0;o--){const s=e[o];if(s.invalidated){e.splice(o,1);const n=s.updaters.values,a=n.length;for(let e=0;e<a;e++)t.add(i,n[e]);s.destroy()}}for(n=e.length,o=0;o<n;++o)s=e[o].update(i)&&s;return s}function E(t,e,i){const s=t.length;for(let o=0;o<s;o++){const s=t[o];if(s.contains(e))return s.getBoundingSphere(e,i)}return u["a"].FAILED}function I(t){const e=t.length;for(let i=0;i<e;i++)t[i].destroy();t.length=0}w.prototype.onMaterialChanged=function(){this.invalidated=!0},w.prototype.isMaterial=function(t){const e=this.depthFailMaterialProperty,i=t.depthFailMaterialProperty;return i===e||!!Object(r["a"])(e)&&e.equals(i)},w.prototype.add=function(t,e){const i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&g["a"].isConstant(t.distanceDisplayConditionProperty)&&g["a"].isConstant(t.terrainOffsetProperty)){const e=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(i,s,o,n){"isShowing"===s&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t)},w.prototype.remove=function(t){const e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);const t=this.subscriptions.get(e);return Object(r["a"])(t)&&(t(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1},w.prototype.update=function(t){let e=!0,i=0,s=this.primitive;const u=this.primitives;let w;if(this.createPrimitive){const i=this.geometry.values,o=i.length;if(o>0){let o;Object(r["a"])(s)&&(Object(r["a"])(this.oldPrimitive)?u.remove(s):this.oldPrimitive=s),Object(r["a"])(this.depthFailAppearanceType)&&(Object(r["a"])(this.depthFailMaterialProperty)&&(this.depthFailMaterial=m["a"].getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial)),o=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.translucent,closed:this.closed})),s=new p["a"]({show:!1,asynchronous:!0,geometryInstances:i.slice(),appearance:new this.appearanceType({translucent:this.translucent,closed:this.closed}),depthFailAppearance:o,shadows:this.shadows}),u.add(s),e=!1}else{Object(r["a"])(s)&&(u.remove(s),s=void 0);const t=this.oldPrimitive;Object(r["a"])(t)&&(u.remove(t),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=s,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(Object(r["a"])(s)&&s.ready){s.show=!0,Object(r["a"])(this.oldPrimitive)&&(u.remove(this.oldPrimitive),this.oldPrimitive=void 0),!Object(r["a"])(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof f["a"]||(this.depthFailMaterial=m["a"].getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);const e=this.updatersWithAttributes.values,p=e.length,C=this.waitingOnCreate;for(w=0;w<p;w++){const p=e[w],u=this.geometry.get(p.id);let m=this.attributes.get(u.id.id);if(Object(r["a"])(m)||(m=s.getGeometryInstanceAttributes(u.id),this.attributes.set(u.id.id,m)),!p.fillMaterialProperty.isConstant||C){const e=p.fillMaterialProperty.color,s=g["a"].getValueOrDefault(e,t,n["a"].WHITE,y);n["a"].equals(m._lastColor,s)||(m._lastColor=n["a"].clone(s,m._lastColor),m.color=a["a"].toValue(s,m.color),(this.translucent&&255===m.color[3]||!this.translucent&&255!==m.color[3])&&(this.itemsToRemove[i++]=p))}if(Object(r["a"])(this.depthFailAppearanceType)&&p.depthFailMaterialProperty instanceof f["a"]&&(!p.depthFailMaterialProperty.isConstant||C)){const e=p.depthFailMaterialProperty.color,i=g["a"].getValueOrDefault(e,t,n["a"].WHITE,y);n["a"].equals(m._lastDepthFailColor,i)||(m._lastDepthFailColor=n["a"].clone(i,m._lastDepthFailColor),m.depthFailColor=a["a"].toValue(i,m.depthFailColor))}const j=p.entity.isShowing&&(p.hasConstantFill||p.isFilled(t)),P=1===m.show[0];j!==P&&(m.show=d["a"].toValue(j,m.show));const D=p.distanceDisplayConditionProperty;if(!g["a"].isConstant(D)){const e=g["a"].getValueOrDefault(D,t,b,v);h["a"].equals(e,m._lastDistanceDisplayCondition)||(m._lastDistanceDisplayCondition=h["a"].clone(e,m._lastDistanceDisplayCondition),m.distanceDisplayCondition=l["a"].toValue(e,m.distanceDisplayCondition))}const E=p.terrainOffsetProperty;if(!g["a"].isConstant(E)){const e=g["a"].getValueOrDefault(E,t,_,O);o["a"].equals(e,m._lastOffset)||(m._lastOffset=o["a"].clone(e,m._lastOffset),m.offset=c["a"].toValue(e,m.offset))}}this.updateShows(s),this.waitingOnCreate=!1}else Object(r["a"])(s)&&!s.ready&&(e=!1);return this.itemsToRemove.length=i,e},w.prototype.updateShows=function(t){const e=this.showsUpdated.values,i=e.length;for(let s=0;s<i;s++){const i=e[s],o=this.geometry.get(i.id);let n=this.attributes.get(o.id.id);Object(r["a"])(n)||(n=t.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,n));const a=i.entity.isShowing,h=1===n.show[0];a!==h&&(n.show=d["a"].toValue(a,n.show),o.attributes.show.value[0]=n.show[0])}this.showsUpdated.removeAll()},w.prototype.contains=function(t){return this.updaters.contains(t.id)},w.prototype.getBoundingSphere=function(t,e){const i=this.primitive;if(!i.ready)return u["a"].PENDING;const s=i.getGeometryInstanceAttributes(t.entity);return!Object(r["a"])(s)||!Object(r["a"])(s.boundingSphere)||Object(r["a"])(s.show)&&0===s.show[0]?u["a"].FAILED:(s.boundingSphere.clone(e),u["a"].DONE)},w.prototype.destroy=function(){const t=this.primitive,e=this.primitives;Object(r["a"])(t)&&e.remove(t);const i=this.oldPrimitive;Object(r["a"])(i)&&e.remove(i),Object(r["a"])(this.removeMaterialSubscription)&&this.removeMaterialSubscription()},C.prototype.add=function(t,e){let i,s;const o=e.createFillGeometryInstance(t);255===o.attributes.color.value[3]?(i=this._solidItems,s=!1):(i=this._translucentItems,s=!0);const n=i.length;for(let r=0;r<n;r++){const t=i[r];if(t.isMaterial(e))return void t.add(e,o)}const a=new w(this._primitives,s,this._appearanceType,this._depthFailAppearanceType,e.depthFailMaterialProperty,this._closed,this._shadows);a.add(e,o),i.push(a)},C.prototype.remove=function(t){j(this._solidItems,t)||j(this._translucentItems,t)},C.prototype.update=function(t){let e=D(this,this._solidItems,t,!0);e=D(this,this._translucentItems,t,e)&&e;const i=P(this,this._solidItems,t),s=P(this,this._translucentItems,t);return(i||s)&&(e=D(this,this._solidItems,t,e)&&e,e=D(this,this._translucentItems,t,e)&&e),e},C.prototype.getBoundingSphere=function(t,e){const i=E(this._solidItems,t,e);return i===u["a"].FAILED?E(this._translucentItems,t,e):i},C.prototype.removeAllPrimitives=function(){I(this._solidItems),I(this._translucentItems)},e["a"]=C},1142:function(t,e,i){"use strict";var s=i("2f63"),o=i("21d7"),n=i("ea07");function a(t){let e=t._targetProperty;if(!Object(s["a"])(e)){let i=t._targetEntity;if(!Object(s["a"])(i)){if(i=t._targetCollection.getById(t._targetId),!Object(s["a"])(i))return void(t._targetEntity=t._targetProperty=void 0);i.definitionChanged.addEventListener(r.prototype._onTargetEntityDefinitionChanged,t),t._targetEntity=i}const o=t._targetPropertyNames;e=t._targetEntity;for(let t=0,n=o.length;t<n&&Object(s["a"])(e);++t)e=e[o[t]];t._targetProperty=e}return e}function r(t,e,i){this._targetCollection=t,this._targetId=e,this._targetPropertyNames=i,this._targetProperty=void 0,this._targetEntity=void 0,this._definitionChanged=new o["a"],t.collectionChanged.addEventListener(r.prototype._onCollectionChanged,this)}Object.defineProperties(r.prototype,{isConstant:{get:function(){return n["a"].isConstant(a(this))}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){const t=a(this);return Object(s["a"])(t)?t.referenceFrame:void 0}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},targetPropertyNames:{get:function(){return this._targetPropertyNames}},resolvedProperty:{get:function(){return a(this)}}}),r.fromString=function(t,e){let i;const s=[];let o=!0,n=!1,a="";for(let r=0;r<e.length;++r){const t=e.charAt(r);n?(a+=t,n=!1):"\\"===t?n=!0:o&&"#"===t?(i=a,o=!1,a=""):o||"."!==t?a+=t:(s.push(a),a="")}return s.push(a),new r(t,i,s)},r.prototype.getValue=function(t,e){const i=a(this);return Object(s["a"])(i)?i.getValue(t,e):void 0},r.prototype.getValueInReferenceFrame=function(t,e,i){const o=a(this);return Object(s["a"])(o)?o.getValueInReferenceFrame(t,e,i):void 0},r.prototype.getType=function(t){const e=a(this);return Object(s["a"])(e)?e.getType(t):void 0},r.prototype.equals=function(t){if(this===t)return!0;const e=this._targetPropertyNames,i=t._targetPropertyNames;if(this._targetCollection!==t._targetCollection||this._targetId!==t._targetId||e.length!==i.length)return!1;const s=this._targetPropertyNames.length;for(let o=0;o<s;o++)if(e[o]!==i[o])return!1;return!0},r.prototype._onTargetEntityDefinitionChanged=function(t,e,i,o){Object(s["a"])(this._targetProperty)&&this._targetPropertyNames[0]===e&&(this._targetProperty=void 0,this._definitionChanged.raiseEvent(this))},r.prototype._onCollectionChanged=function(t,e,i){let o=this._targetEntity;Object(s["a"])(o)&&-1!==i.indexOf(o)?(o.definitionChanged.removeEventListener(r.prototype._onTargetEntityDefinitionChanged,this),this._targetEntity=this._targetProperty=void 0):Object(s["a"])(o)||(o=a(this),Object(s["a"])(o)&&this._definitionChanged.raiseEvent(this))},e["a"]=r},2198:function(t,e,i){"use strict";var s=i("be18"),o=i("535a"),n=i("2f63"),a=i("21d7"),r=i("7749"),h=i("c21f"),l=i("ea07"),c=i("e438"),d=i("d8fa"),p=i("5ed2"),u=i("eb20");const f={packedLength:1,pack:function(t,e,i){i=Object(o["a"])(i,0),e[i]=t},unpack:function(t,e,i){return e=Object(o["a"])(e,0),t[e]}};function m(t,e,i){let s;const o=t.length,n=i.length,a=o+n;if(t.length=a,o!==e){let i=o-1;for(s=a-1;s>=e;s--)t[s]=t[i--]}for(s=0;s<n;s++)t[e++]=i[s]}function g(t,e){return t instanceof p["a"]?t:"string"===typeof t?p["a"].fromIso8601(t):p["a"].addSeconds(e,t,new p["a"])}const y=[],v=[];function b(t,e,i,s,o){let a,r,h,l,d,u,f=0;while(f<s.length){d=g(s[f],t),h=Object(c["a"])(e,d,p["a"].compare);let b=0,_=0;if(h<0){h=~h,l=h*o,r=void 0,u=e[h];while(f<s.length){if(d=g(s[f],t),Object(n["a"])(r)&&p["a"].compare(r,d)>=0||Object(n["a"])(u)&&p["a"].compare(d,u)>=0)break;for(y[b++]=d,f+=1,a=0;a<o;a++)v[_++]=s[f],f+=1;r=d}b>0&&(v.length=_,m(i,l,v),y.length=b,m(e,h,y))}else{for(a=0;a<o;a++)f++,i[h*o+a]=s[f];f++}}}function _(t,e){let i=t;i===Number&&(i=f);let s,r=i.packedLength,h=Object(o["a"])(i.packedInterpolationLength,r),l=0;if(Object(n["a"])(e)){const t=e.length;s=new Array(t);for(let i=0;i<t;i++){let t=e[i];t===Number&&(t=f);const n=t.packedLength;r+=n,h+=Object(o["a"])(t.packedInterpolationLength,n),s[i]=t}l=t}this._type=t,this._innerType=i,this._interpolationDegree=1,this._interpolationAlgorithm=u["a"],this._numberOfPoints=0,this._times=[],this._values=[],this._xTable=[],this._yTable=[],this._packedLength=r,this._packedInterpolationLength=h,this._updateTableLength=!0,this._interpolationResult=new Array(h),this._definitionChanged=new a["a"],this._derivativeTypes=e,this._innerDerivativeTypes=s,this._inputOrder=l,this._forwardExtrapolationType=d["a"].NONE,this._forwardExtrapolationDuration=0,this._backwardExtrapolationType=d["a"].NONE,this._backwardExtrapolationDuration=0}function O(t,e,i){const s=t._packedLength;t._times.splice(e,i),t._values.splice(e*s,i*s),t._updateTableLength=!0,t._definitionChanged.raiseEvent(t)}Object.defineProperties(_.prototype,{isConstant:{get:function(){return 0===this._values.length}},definitionChanged:{get:function(){return this._definitionChanged}},type:{get:function(){return this._type}},derivativeTypes:{get:function(){return this._derivativeTypes}},interpolationDegree:{get:function(){return this._interpolationDegree}},interpolationAlgorithm:{get:function(){return this._interpolationAlgorithm}},forwardExtrapolationType:{get:function(){return this._forwardExtrapolationType},set:function(t){this._forwardExtrapolationType!==t&&(this._forwardExtrapolationType=t,this._definitionChanged.raiseEvent(this))}},forwardExtrapolationDuration:{get:function(){return this._forwardExtrapolationDuration},set:function(t){this._forwardExtrapolationDuration!==t&&(this._forwardExtrapolationDuration=t,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationType:{get:function(){return this._backwardExtrapolationType},set:function(t){this._backwardExtrapolationType!==t&&(this._backwardExtrapolationType=t,this._definitionChanged.raiseEvent(this))}},backwardExtrapolationDuration:{get:function(){return this._backwardExtrapolationDuration},set:function(t){this._backwardExtrapolationDuration!==t&&(this._backwardExtrapolationDuration=t,this._definitionChanged.raiseEvent(this))}}}),_.prototype.getValue=function(t,e){const i=this._times,s=i.length;if(0===s)return;let o;const a=this._innerType,r=this._values;let h=Object(c["a"])(i,t,p["a"].compare);if(h<0){if(h=~h,0===h){const s=i[h];if(o=this._backwardExtrapolationDuration,this._backwardExtrapolationType===d["a"].NONE||0!==o&&p["a"].secondsDifference(s,t)>o)return;if(this._backwardExtrapolationType===d["a"].HOLD)return a.unpack(r,0,e)}if(h>=s){h=s-1;const n=i[h];if(o=this._forwardExtrapolationDuration,this._forwardExtrapolationType===d["a"].NONE||0!==o&&p["a"].secondsDifference(t,n)>o)return;if(this._forwardExtrapolationType===d["a"].HOLD)return h=s-1,a.unpack(r,h*a.packedLength,e)}const l=this._xTable,c=this._yTable,u=this._interpolationAlgorithm,f=this._packedInterpolationLength,m=this._inputOrder;if(this._updateTableLength){this._updateTableLength=!1;const t=Math.min(u.getRequiredDataPoints(this._interpolationDegree,m),s);t!==this._numberOfPoints&&(this._numberOfPoints=t,l.length=t,c.length=t*f)}const g=this._numberOfPoints-1;if(g<1)return;let y=0,v=s-1;const b=v-y+1;if(b>=g+1){let t=h-(g/2|0)-1;t<y&&(t=y);let e=t+g;e>v&&(e=v,t=e-g,t<y&&(t=y)),y=t,v=e}const _=v-y+1;for(let t=0;t<_;++t)l[t]=p["a"].secondsDifference(i[y+t],i[v]);if(Object(n["a"])(a.convertPackedArrayForInterpolation))a.convertPackedArrayForInterpolation(r,y,v,c);else{let t=0;const e=this._packedLength;let i=y*e;const s=(v+1)*e;while(i<s)c[t]=r[i],i++,t++}const O=p["a"].secondsDifference(t,i[v]);let w;if(0!==m&&Object(n["a"])(u.interpolate)){const t=Math.floor(f/(m+1));w=u.interpolate(O,l,c,t,m,m,this._interpolationResult)}else w=u.interpolateOrderZero(O,l,c,f,this._interpolationResult);return Object(n["a"])(a.unpackInterpolationResult)?a.unpackInterpolationResult(w,r,y,v,e):a.unpack(w,0,e)}return a.unpack(r,h*this._packedLength,e)},_.prototype.setInterpolationOptions=function(t){if(!Object(n["a"])(t))return;let e=!1;const i=t.interpolationAlgorithm,s=t.interpolationDegree;Object(n["a"])(i)&&this._interpolationAlgorithm!==i&&(this._interpolationAlgorithm=i,e=!0),Object(n["a"])(s)&&this._interpolationDegree!==s&&(this._interpolationDegree=s,e=!0),e&&(this._updateTableLength=!0,this._definitionChanged.raiseEvent(this))},_.prototype.addSample=function(t,e,i){const s=this._innerDerivativeTypes,o=Object(n["a"])(s),a=this._innerType,r=[];if(r.push(t),a.pack(e,r,r.length),o){const t=s.length;for(let e=0;e<t;e++)s[e].pack(i[e],r,r.length)}b(void 0,this._times,this._values,r,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},_.prototype.addSamples=function(t,e,i){const s=this._innerDerivativeTypes,o=Object(n["a"])(s),a=this._innerType,r=t.length,h=[];for(let n=0;n<r;n++)if(h.push(t[n]),a.pack(e[n],h,h.length),o){const t=i[n],e=s.length;for(let i=0;i<e;i++)s[i].pack(t[i],h,h.length)}b(void 0,this._times,this._values,h,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},_.prototype.addSamplesPackedArray=function(t,e){b(e,this._times,this._values,t,this._packedLength),this._updateTableLength=!0,this._definitionChanged.raiseEvent(this)},_.prototype.removeSample=function(t){const e=Object(c["a"])(this._times,t,p["a"].compare);return!(e<0)&&(O(this,e,1),!0)},_.prototype.removeSamples=function(t){const e=this._times;let i=Object(c["a"])(e,t.start,p["a"].compare);i<0?i=~i:t.isStartIncluded||++i;let s=Object(c["a"])(e,t.stop,p["a"].compare);s<0?s=~s:t.isStopIncluded&&++s,O(this,i,s-i)},_.prototype.equals=function(t){if(this===t)return!0;if(!Object(n["a"])(t))return!1;if(this._type!==t._type||this._interpolationDegree!==t._interpolationDegree||this._interpolationAlgorithm!==t._interpolationAlgorithm)return!1;const e=this._derivativeTypes,i=Object(n["a"])(e),s=t._derivativeTypes,o=Object(n["a"])(s);if(i!==o)return!1;let a,r;if(i){if(r=e.length,r!==s.length)return!1;for(a=0;a<r;a++)if(e[a]!==s[a])return!1}const h=this._times,l=t._times;if(r=h.length,r!==l.length)return!1;for(a=0;a<r;a++)if(!p["a"].equals(h[a],l[a]))return!1;const c=this._values,d=t._values;for(r=c.length,a=0;a<r;a++)if(c[a]!==d[a])return!1;return!0},_._mergeNewSamples=b;var w=_;function C(t,e){let i;if(e=Object(o["a"])(e,0),e>0){i=new Array(e);for(let t=0;t<e;t++)i[t]=s["a"]}this._numberOfDerivatives=e,this._property=new w(s["a"],i),this._definitionChanged=new a["a"],this._referenceFrame=Object(o["a"])(t,r["a"].FIXED),this._property._definitionChanged.addEventListener((function(){this._definitionChanged.raiseEvent(this)}),this)}Object.defineProperties(C.prototype,{isConstant:{get:function(){return this._property.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}},interpolationDegree:{get:function(){return this._property.interpolationDegree}},interpolationAlgorithm:{get:function(){return this._property.interpolationAlgorithm}},numberOfDerivatives:{get:function(){return this._numberOfDerivatives}},forwardExtrapolationType:{get:function(){return this._property.forwardExtrapolationType},set:function(t){this._property.forwardExtrapolationType=t}},forwardExtrapolationDuration:{get:function(){return this._property.forwardExtrapolationDuration},set:function(t){this._property.forwardExtrapolationDuration=t}},backwardExtrapolationType:{get:function(){return this._property.backwardExtrapolationType},set:function(t){this._property.backwardExtrapolationType=t}},backwardExtrapolationDuration:{get:function(){return this._property.backwardExtrapolationDuration},set:function(t){this._property.backwardExtrapolationDuration=t}}}),C.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,r["a"].FIXED,e)},C.prototype.getValueInReferenceFrame=function(t,e,i){if(i=this._property.getValue(t,i),Object(n["a"])(i))return h["a"].convertToReferenceFrame(t,i,this._referenceFrame,e,i)},C.prototype.setInterpolationOptions=function(t){this._property.setInterpolationOptions(t)},C.prototype.addSample=function(t,e,i){this._numberOfDerivatives;this._property.addSample(t,e,i)},C.prototype.addSamples=function(t,e,i){this._property.addSamples(t,e,i)},C.prototype.addSamplesPackedArray=function(t,e){this._property.addSamplesPackedArray(t,e)},C.prototype.removeSample=function(t){return this._property.removeSample(t)},C.prototype.removeSamples=function(t){this._property.removeSamples(t)},C.prototype.equals=function(t){return this===t||t instanceof C&&l["a"].equals(this._property,t._property)&&this._referenceFrame===t._referenceFrame};e["a"]=C},"298a":function(t,e,i){"use strict";var s=i("535a"),o=i("2f63"),n=i("21d7"),a=i("dde7"),r=i("0a43");function h(t){this._definitionChanged=new n["a"],this._show=void 0,this._showSubscription=void 0,this._coordinates=void 0,this._coordinatesSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distancedisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge(Object(s["a"])(t,s["a"].EMPTY_OBJECT))}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:Object(r["a"])("show"),coordinates:Object(r["a"])("coordinates"),height:Object(r["a"])("height"),heightReference:Object(r["a"])("heightReference"),extrudedHeight:Object(r["a"])("extrudedHeight"),extrudedHeightReference:Object(r["a"])("extrudedHeightReference"),rotation:Object(r["a"])("rotation"),stRotation:Object(r["a"])("stRotation"),granularity:Object(r["a"])("granularity"),fill:Object(r["a"])("fill"),material:Object(a["a"])("material"),outline:Object(r["a"])("outline"),outlineColor:Object(r["a"])("outlineColor"),outlineWidth:Object(r["a"])("outlineWidth"),shadows:Object(r["a"])("shadows"),distanceDisplayCondition:Object(r["a"])("distanceDisplayCondition"),classificationType:Object(r["a"])("classificationType"),zIndex:Object(r["a"])("zIndex")}),h.prototype.clone=function(t){return Object(o["a"])(t)?(t.show=this.show,t.coordinates=this.coordinates,t.height=this.height,t.heightReference=this.heightReference,t.extrudedHeight=this.extrudedHeight,t.extrudedHeightReference=this.extrudedHeightReference,t.rotation=this.rotation,t.stRotation=this.stRotation,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t.classificationType=this.classificationType,t.zIndex=this.zIndex,t):new h(this)},h.prototype.merge=function(t){this.show=Object(s["a"])(this.show,t.show),this.coordinates=Object(s["a"])(this.coordinates,t.coordinates),this.height=Object(s["a"])(this.height,t.height),this.heightReference=Object(s["a"])(this.heightReference,t.heightReference),this.extrudedHeight=Object(s["a"])(this.extrudedHeight,t.extrudedHeight),this.extrudedHeightReference=Object(s["a"])(this.extrudedHeightReference,t.extrudedHeightReference),this.rotation=Object(s["a"])(this.rotation,t.rotation),this.stRotation=Object(s["a"])(this.stRotation,t.stRotation),this.granularity=Object(s["a"])(this.granularity,t.granularity),this.fill=Object(s["a"])(this.fill,t.fill),this.material=Object(s["a"])(this.material,t.material),this.outline=Object(s["a"])(this.outline,t.outline),this.outlineColor=Object(s["a"])(this.outlineColor,t.outlineColor),this.outlineWidth=Object(s["a"])(this.outlineWidth,t.outlineWidth),this.shadows=Object(s["a"])(this.shadows,t.shadows),this.distanceDisplayCondition=Object(s["a"])(this.distanceDisplayCondition,t.distanceDisplayCondition),this.classificationType=Object(s["a"])(this.classificationType,t.classificationType),this.zIndex=Object(s["a"])(this.zIndex,t.zIndex)},e["a"]=h},"2fd1":function(t,e,i){"use strict";var s=i("933b"),o=i("be18"),n=i("bd8d"),a=i("9541"),r=i("2f63"),h=i("aee6"),l=i("77bc"),c=i("c2eb"),d=i("ac9c"),p=i("3a8e"),u=i("894b"),f=i("2d19"),m=i("ea07");const g=new n["a"],y=new h["a"],v=new h["a"],b=o["a"].ZERO,_=new o["a"];function O(t,e,i,o){this.translucent=e,this.width=i,this.shadows=o,this.primitives=t,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new s["a"],this.updaters=new s["a"],this.updatersWithAttributes=new s["a"],this.attributes=new s["a"],this.itemsToRemove=[],this.subscriptions=new s["a"],this.showsUpdated=new s["a"]}function w(t,e,i){this._primitives=t,this._scene=e,this._shadows=i,this._solidBatches=new s["a"],this._translucentBatches=new s["a"]}O.prototype.add=function(t,e){const i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),t.hasConstantOutline&&t.outlineColorProperty.isConstant&&m["a"].isConstant(t.distanceDisplayConditionProperty)&&m["a"].isConstant(t.terrainOffsetProperty)){const e=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(i,s,o,n){"isShowing"===s&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t)},O.prototype.remove=function(t){const e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);const t=this.subscriptions.get(e);return Object(r["a"])(t)&&(t(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1},O.prototype.update=function(t){let e=!0,i=0,s=this.primitive;const f=this.primitives;let O;if(this.createPrimitive){const t=this.geometry.values,i=t.length;if(i>0)Object(r["a"])(s)&&(Object(r["a"])(this.oldPrimitive)?f.remove(s):this.oldPrimitive=s),s=new u["a"]({show:!1,asynchronous:!0,geometryInstances:t.slice(),appearance:new p["a"]({flat:!0,translucent:this.translucent,renderState:{lineWidth:this.width}}),shadows:this.shadows}),f.add(s),e=!1;else{Object(r["a"])(s)&&(f.remove(s),s=void 0);const t=this.oldPrimitive;Object(r["a"])(t)&&(f.remove(t),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=s,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(Object(r["a"])(s)&&s.ready){s.show=!0,Object(r["a"])(this.oldPrimitive)&&(f.remove(this.oldPrimitive),this.oldPrimitive=void 0);const e=this.updatersWithAttributes.values,p=e.length,u=this.waitingOnCreate;for(O=0;O<p;O++){const p=e[O],f=this.geometry.get(p.id);let w=this.attributes.get(f.id.id);if(Object(r["a"])(w)||(w=s.getGeometryInstanceAttributes(f.id),this.attributes.set(f.id.id,w)),!p.outlineColorProperty.isConstant||u){const e=p.outlineColorProperty,s=m["a"].getValueOrDefault(e,t,n["a"].WHITE,g);n["a"].equals(w._lastColor,s)||(w._lastColor=n["a"].clone(s,w._lastColor),w.color=a["a"].toValue(s,w.color),(this.translucent&&255===w.color[3]||!this.translucent&&255!==w.color[3])&&(this.itemsToRemove[i++]=p))}const C=p.entity.isShowing&&(p.hasConstantOutline||p.isOutlineVisible(t)),j=1===w.show[0];C!==j&&(w.show=d["a"].toValue(C,w.show));const P=p.distanceDisplayConditionProperty;if(!m["a"].isConstant(P)){const e=m["a"].getValueOrDefault(P,t,v,y);h["a"].equals(e,w._lastDistanceDisplayCondition)||(w._lastDistanceDisplayCondition=h["a"].clone(e,w._lastDistanceDisplayCondition),w.distanceDisplayCondition=l["a"].toValue(e,w.distanceDisplayCondition))}const D=p.terrainOffsetProperty;if(!m["a"].isConstant(D)){const e=m["a"].getValueOrDefault(D,t,b,_);o["a"].equals(e,w._lastOffset)||(w._lastOffset=o["a"].clone(e,w._lastOffset),w.offset=c["a"].toValue(e,w.offset))}}this.updateShows(s),this.waitingOnCreate=!1}else Object(r["a"])(s)&&!s.ready&&(e=!1);return this.itemsToRemove.length=i,e},O.prototype.updateShows=function(t){const e=this.showsUpdated.values,i=e.length;for(let s=0;s<i;s++){const i=e[s],o=this.geometry.get(i.id);let n=this.attributes.get(o.id.id);Object(r["a"])(n)||(n=t.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,n));const a=i.entity.isShowing,h=1===n.show[0];a!==h&&(n.show=d["a"].toValue(a,n.show),o.attributes.show.value[0]=n.show[0])}this.showsUpdated.removeAll()},O.prototype.contains=function(t){return this.updaters.contains(t.id)},O.prototype.getBoundingSphere=function(t,e){const i=this.primitive;if(!i.ready)return f["a"].PENDING;const s=i.getGeometryInstanceAttributes(t.entity);return!Object(r["a"])(s)||!Object(r["a"])(s.boundingSphere)||Object(r["a"])(s.show)&&0===s.show[0]?f["a"].FAILED:(s.boundingSphere.clone(e),f["a"].DONE)},O.prototype.removeAllPrimitives=function(){const t=this.primitives,e=this.primitive;Object(r["a"])(e)&&(t.remove(e),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());const i=this.oldPrimitive;Object(r["a"])(i)&&(t.remove(i),this.oldPrimitive=void 0)},w.prototype.add=function(t,e){const i=e.createOutlineGeometryInstance(t),s=this._scene.clampLineWidth(e.outlineWidth);let o,n;255===i.attributes.color.value[3]?(o=this._solidBatches,n=o.get(s),Object(r["a"])(n)||(n=new O(this._primitives,!1,s,this._shadows),o.set(s,n)),n.add(e,i)):(o=this._translucentBatches,n=o.get(s),Object(r["a"])(n)||(n=new O(this._primitives,!0,s,this._shadows),o.set(s,n)),n.add(e,i))},w.prototype.remove=function(t){let e;const i=this._solidBatches.values,s=i.length;for(e=0;e<s;e++)if(i[e].remove(t))return;const o=this._translucentBatches.values,n=o.length;for(e=0;e<n;e++)if(o[e].remove(t))return},w.prototype.update=function(t){let e,i,s,o;const n=this._solidBatches.values,a=n.length,r=this._translucentBatches.values,h=r.length;let l,c=!0,d=!1;do{for(d=!1,i=0;i<a;i++){o=n[i],c=o.update(t),l=o.itemsToRemove;const a=l.length;if(a>0)for(d=!0,e=0;e<a;e++)s=l[e],o.remove(s),this.add(t,s)}for(i=0;i<h;i++){o=r[i],c=o.update(t),l=o.itemsToRemove;const n=l.length;if(n>0)for(d=!0,e=0;e<n;e++)s=l[e],o.remove(s),this.add(t,s)}}while(d);return c},w.prototype.getBoundingSphere=function(t,e){let i;const s=this._solidBatches.values,o=s.length;for(i=0;i<o;i++){const o=s[i];if(o.contains(t))return o.getBoundingSphere(t,e)}const n=this._translucentBatches.values,a=n.length;for(i=0;i<a;i++){const s=n[i];if(s.contains(t))return s.getBoundingSphere(t,e)}return f["a"].FAILED},w.prototype.removeAllPrimitives=function(){let t;const e=this._solidBatches.values,i=e.length;for(t=0;t<i;t++)e[t].removeAllPrimitives();const s=this._translucentBatches.values,o=s.length;for(t=0;t<o;t++)s[t].removeAllPrimitives()},e["a"]=w},"5f9f":function(t,e,i){"use strict";var s=i("933b"),o=i("bd8d"),n=i("9541"),a=i("2f63"),r=i("aee6"),h=i("77bc"),l=i("ac9c"),c=i("acad"),d=i("2d19"),p=i("ea07"),u=i("9fb4");const f=new o["a"],m=new r["a"],g=new r["a"];function y(t,e,i,o){this.primitives=t,this.zIndex=o,this.classificationType=e,this.color=i,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new s["a"],this.updaters=new s["a"],this.updatersWithAttributes=new s["a"],this.attributes=new s["a"],this.subscriptions=new s["a"],this.showsUpdated=new s["a"],this.itemsToRemove=[],this.isDirty=!1,this.rectangleCollisionCheck=new u["a"]}function v(t,e){this._batches=[],this._primitives=t,this._classificationType=e}y.prototype.overlapping=function(t){return this.rectangleCollisionCheck.collides(t)},y.prototype.add=function(t,e){const i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),this.rectangleCollisionCheck.insert(i,e.geometry.rectangle),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&p["a"].isConstant(t.distanceDisplayConditionProperty)){const e=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener((function(i,s,o,n){"isShowing"===s&&e.showsUpdated.set(t.id,t)})))}else this.updatersWithAttributes.set(i,t)},y.prototype.remove=function(t){const e=t.id,i=this.geometry.get(e);if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.rectangleCollisionCheck.remove(e,i.geometry.rectangle),this.updatersWithAttributes.remove(e);const t=this.subscriptions.get(e);return Object(a["a"])(t)&&(t(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1},y.prototype.update=function(t){let e=!0;const i=0;let s=this.primitive;const d=this.primitives;let u;if(this.createPrimitive){const t=this.geometry.values,i=t.length;if(i>0)Object(a["a"])(s)&&(Object(a["a"])(this.oldPrimitive)?d.remove(s):this.oldPrimitive=s),s=new c["a"]({show:!1,asynchronous:!0,geometryInstances:t.slice(),classificationType:this.classificationType}),d.add(s,this.zIndex),e=!1;else{Object(a["a"])(s)&&(d.remove(s),s=void 0);const t=this.oldPrimitive;Object(a["a"])(t)&&(d.remove(t),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=s,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(Object(a["a"])(s)&&s.ready){s.show=!0,Object(a["a"])(this.oldPrimitive)&&(d.remove(this.oldPrimitive),this.oldPrimitive=void 0);const e=this.updatersWithAttributes.values,i=e.length,c=this.waitingOnCreate;for(u=0;u<i;u++){const i=e[u],d=this.geometry.get(i.id);let y=this.attributes.get(d.id.id);if(Object(a["a"])(y)||(y=s.getGeometryInstanceAttributes(d.id),this.attributes.set(d.id.id,y)),!i.fillMaterialProperty.isConstant||c){const e=i.fillMaterialProperty.color,s=p["a"].getValueOrDefault(e,t,o["a"].WHITE,f);o["a"].equals(y._lastColor,s)||(y._lastColor=o["a"].clone(s,y._lastColor),y.color=n["a"].toValue(s,y.color))}const v=i.entity.isShowing&&(i.hasConstantFill||i.isFilled(t)),b=1===y.show[0];v!==b&&(y.show=l["a"].toValue(v,y.show));const _=i.distanceDisplayConditionProperty;if(!p["a"].isConstant(_)){const e=p["a"].getValueOrDefault(_,t,g,m);r["a"].equals(e,y._lastDistanceDisplayCondition)||(y._lastDistanceDisplayCondition=r["a"].clone(e,y._lastDistanceDisplayCondition),y.distanceDisplayCondition=h["a"].toValue(e,y.distanceDisplayCondition))}}this.updateShows(s),this.waitingOnCreate=!1}else Object(a["a"])(s)&&!s.ready&&(e=!1);return this.itemsToRemove.length=i,e},y.prototype.updateShows=function(t){const e=this.showsUpdated.values,i=e.length;for(let s=0;s<i;s++){const i=e[s],o=this.geometry.get(i.id);let n=this.attributes.get(o.id.id);Object(a["a"])(n)||(n=t.getGeometryInstanceAttributes(o.id),this.attributes.set(o.id.id,n));const r=i.entity.isShowing,h=1===n.show[0];r!==h&&(n.show=l["a"].toValue(r,n.show),o.attributes.show.value[0]=n.show[0])}this.showsUpdated.removeAll()},y.prototype.contains=function(t){return this.updaters.contains(t.id)},y.prototype.getBoundingSphere=function(t,e){const i=this.primitive;if(!i.ready)return d["a"].PENDING;const s=i.getBoundingSphere(t.entity);return Object(a["a"])(s)?(s.clone(e),d["a"].DONE):d["a"].FAILED},y.prototype.removeAllPrimitives=function(){const t=this.primitives,e=this.primitive;Object(a["a"])(e)&&(t.remove(e),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());const i=this.oldPrimitive;Object(a["a"])(i)&&(t.remove(i),this.oldPrimitive=void 0)},v.prototype.add=function(t,e){const i=e.createFillGeometryInstance(t),s=this._batches,o=p["a"].getValueOrDefault(e.zIndex,0);let n;const r=s.length;for(let a=0;a<r;++a){const t=s[a];if(t.zIndex===o&&!t.overlapping(i.geometry.rectangle)){n=t;break}}return Object(a["a"])(n)||(n=new y(this._primitives,this._classificationType,i.attributes.color.value,o),s.push(n)),n.add(e,i),n},v.prototype.remove=function(t){const e=this._batches,i=e.length;for(let s=0;s<i;++s)if(e[s].remove(t))return},v.prototype.update=function(t){let e,i,s=!0;const o=this._batches,n=o.length;for(e=0;e<n;++e)s=o[e].update(t)&&s;for(e=0;e<n;++e){const s=o[e],n=s.itemsToRemove,a=n.length;for(let e=0;e<a;e++){i=n[e],s.remove(i);const o=this.add(t,i);s.isDirty=!0,o.isDirty=!0}}for(e=n-1;e>=0;--e){const i=o[e];i.isDirty&&(s=o[e].update(t)&&s,i.isDirty=!1),0===i.geometry.length&&o.splice(e,1)}return s},v.prototype.getBoundingSphere=function(t,e){const i=this._batches,s=i.length;for(let o=0;o<s;++o){const s=i[o];if(s.contains(t))return s.getBoundingSphere(t,e)}return d["a"].FAILED},v.prototype.removeAllPrimitives=function(){const t=this._batches,e=t.length;for(let i=0;i<e;++i)t[i].removeAllPrimitives()},e["a"]=v},9816:function(t,e,i){"use strict";var s=i("535a"),o=i("2f63"),n=i("21d7"),a=i("dde7"),r=i("0a43");function h(t){this._definitionChanged=new n["a"],this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._minimumHeights=void 0,this._minimumHeightsSubscription=void 0,this._maximumHeights=void 0,this._maximumHeightsSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge(Object(s["a"])(t,s["a"].EMPTY_OBJECT))}Object.defineProperties(h.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:Object(r["a"])("show"),positions:Object(r["a"])("positions"),minimumHeights:Object(r["a"])("minimumHeights"),maximumHeights:Object(r["a"])("maximumHeights"),granularity:Object(r["a"])("granularity"),fill:Object(r["a"])("fill"),material:Object(a["a"])("material"),outline:Object(r["a"])("outline"),outlineColor:Object(r["a"])("outlineColor"),outlineWidth:Object(r["a"])("outlineWidth"),shadows:Object(r["a"])("shadows"),distanceDisplayCondition:Object(r["a"])("distanceDisplayCondition")}),h.prototype.clone=function(t){return Object(o["a"])(t)?(t.show=this.show,t.positions=this.positions,t.minimumHeights=this.minimumHeights,t.maximumHeights=this.maximumHeights,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new h(this)},h.prototype.merge=function(t){this.show=Object(s["a"])(this.show,t.show),this.positions=Object(s["a"])(this.positions,t.positions),this.minimumHeights=Object(s["a"])(this.minimumHeights,t.minimumHeights),this.maximumHeights=Object(s["a"])(this.maximumHeights,t.maximumHeights),this.granularity=Object(s["a"])(this.granularity,t.granularity),this.fill=Object(s["a"])(this.fill,t.fill),this.material=Object(s["a"])(this.material,t.material),this.outline=Object(s["a"])(this.outline,t.outline),this.outlineColor=Object(s["a"])(this.outlineColor,t.outlineColor),this.outlineWidth=Object(s["a"])(this.outlineWidth,t.outlineWidth),this.shadows=Object(s["a"])(this.shadows,t.shadows),this.distanceDisplayCondition=Object(s["a"])(this.distanceDisplayCondition,t.distanceDisplayCondition)},e["a"]=h},"9ea2":function(t,e,i){"use strict";var s=i("dd06"),o=i("be18"),n=i("bef8"),a=i("bd8d"),r=i("9541"),h=i("2f63"),l=i("77bc"),c=i("c52f"),d=i("d940"),p=i("452d"),u=i("c2eb"),f=i("eace"),m=i("372a"),g=i("24a2"),y=i("ac9c"),v=i("2d75"),b=i("d6db"),_=i("3a8e"),O=i("b83c"),w=i("9171"),C=i("3ba2"),j=i("c6e8"),P=i("ea07");const D=new a["a"],E=o["a"].ZERO,I=new o["a"],T=new f["a"],A=new f["a"],F=new n["a"];function V(t){this.id=t,this.vertexFormat=void 0,this.rectangle=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.rotation=void 0,this.offsetAttribute=void 0}function S(t,e){j["a"].call(this,{entity:t,scene:e,geometryOptions:new V(t),geometryPropertyName:"rectangle",observedPropertyNames:["availability","rectangle"]}),this._onEntityPropertyChanged(t,"rectangle",t.rectangle,void 0)}function M(t,e,i){w["a"].call(this,t,e,i)}Object(h["a"])(Object.create)&&(S.prototype=Object.create(j["a"].prototype),S.prototype.constructor=S),S.prototype.createFillGeometryInstance=function(t){const e=this._entity,i=e.isAvailable(t),s={show:new y["a"](i&&e.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),distanceDisplayCondition:l["a"].fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(t)),offset:void 0,color:void 0};if(this._materialProperty instanceof O["a"]){let e;Object(h["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||i)&&(e=this._materialProperty.color.getValue(t,D)),Object(h["a"])(e)||(e=a["a"].WHITE),s.color=r["a"].fromColor(e)}return Object(h["a"])(this._options.offsetAttribute)&&(s.offset=u["a"].fromCartesian3(P["a"].getValueOrDefault(this._terrainOffsetProperty,t,E,I))),new d["a"]({id:e,geometry:new m["a"](this._options),attributes:s})},S.prototype.createOutlineGeometryInstance=function(t){const e=this._entity,i=e.isAvailable(t),s=P["a"].getValueOrDefault(this._outlineColorProperty,t,a["a"].BLACK,D),o=this._distanceDisplayConditionProperty.getValue(t),n={show:new y["a"](i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:r["a"].fromColor(s),distanceDisplayCondition:l["a"].fromDistanceDisplayCondition(o),offset:void 0};return Object(h["a"])(this._options.offsetAttribute)&&(n.offset=u["a"].fromCartesian3(P["a"].getValueOrDefault(this._terrainOffsetProperty,t,E,I))),new d["a"]({id:e,geometry:new g["a"](this._options),attributes:n})},S.prototype._computeCenter=function(t,e){const i=P["a"].getValueOrUndefined(this._entity.rectangle.coordinates,t,A);if(!Object(h["a"])(i))return;const s=f["a"].center(i,F);return n["a"].toCartesian(s,c["a"].WGS84,e)},S.prototype._isHidden=function(t,e){return!Object(h["a"])(e.coordinates)||C["a"].prototype._isHidden.call(this,t,e)},S.prototype._isDynamic=function(t,e){return!e.coordinates.isConstant||!P["a"].isConstant(e.height)||!P["a"].isConstant(e.extrudedHeight)||!P["a"].isConstant(e.granularity)||!P["a"].isConstant(e.stRotation)||!P["a"].isConstant(e.rotation)||!P["a"].isConstant(e.outlineWidth)||!P["a"].isConstant(e.zIndex)||this._onTerrain&&!P["a"].isConstant(this._materialProperty)&&!(this._materialProperty instanceof O["a"])},S.prototype._setStaticOptions=function(t,e){const i=this._materialProperty instanceof O["a"];let o=P["a"].getValueOrUndefined(e.height,p["a"].MINIMUM_VALUE);const n=P["a"].getValueOrDefault(e.heightReference,p["a"].MINIMUM_VALUE,v["a"].NONE);let a=P["a"].getValueOrUndefined(e.extrudedHeight,p["a"].MINIMUM_VALUE);const r=P["a"].getValueOrDefault(e.extrudedHeightReference,p["a"].MINIMUM_VALUE,v["a"].NONE);Object(h["a"])(a)&&!Object(h["a"])(o)&&(o=0);const l=this._options;l.vertexFormat=i?_["a"].VERTEX_FORMAT:b["a"].MaterialSupport.TEXTURED.vertexFormat,l.rectangle=e.coordinates.getValue(p["a"].MINIMUM_VALUE,l.rectangle),l.granularity=P["a"].getValueOrUndefined(e.granularity,p["a"].MINIMUM_VALUE),l.stRotation=P["a"].getValueOrUndefined(e.stRotation,p["a"].MINIMUM_VALUE),l.rotation=P["a"].getValueOrUndefined(e.rotation,p["a"].MINIMUM_VALUE),l.offsetAttribute=j["a"].computeGeometryOffsetAttribute(o,n,a,r),l.height=j["a"].getGeometryHeight(o,n),a=j["a"].getGeometryExtrudedHeight(a,r),a===j["a"].CLAMP_TO_GROUND&&(a=s["a"].getMinimumMaximumHeights(m["a"].computeRectangle(l,T)).minimumTerrainHeight),l.extrudedHeight=a},S.DynamicGeometryUpdater=M,Object(h["a"])(Object.create)&&(M.prototype=Object.create(w["a"].prototype),M.prototype.constructor=M),M.prototype._isHidden=function(t,e,i){return!Object(h["a"])(this._options.rectangle)||w["a"].prototype._isHidden.call(this,t,e,i)},M.prototype._setOptions=function(t,e,i){const o=this._options;let n=P["a"].getValueOrUndefined(e.height,i);const a=P["a"].getValueOrDefault(e.heightReference,i,v["a"].NONE);let r=P["a"].getValueOrUndefined(e.extrudedHeight,i);const l=P["a"].getValueOrDefault(e.extrudedHeightReference,i,v["a"].NONE);Object(h["a"])(r)&&!Object(h["a"])(n)&&(n=0),o.rectangle=P["a"].getValueOrUndefined(e.coordinates,i,o.rectangle),o.granularity=P["a"].getValueOrUndefined(e.granularity,i),o.stRotation=P["a"].getValueOrUndefined(e.stRotation,i),o.rotation=P["a"].getValueOrUndefined(e.rotation,i),o.offsetAttribute=j["a"].computeGeometryOffsetAttribute(n,a,r,l),o.height=j["a"].getGeometryHeight(n,a),r=j["a"].getGeometryExtrudedHeight(r,l),r===j["a"].CLAMP_TO_GROUND&&(r=s["a"].getMinimumMaximumHeights(m["a"].computeRectangle(o,T)).minimumTerrainHeight),o.extrudedHeight=r},e["a"]=S},a435:function(t,e,i){"use strict";var s=i("535a"),o=i("2f63"),n=i("21d7"),a=i("7749"),r=i("026b"),h=i("c21f"),l=i("ea07");function c(t){this._definitionChanged=new n["a"],this._intervals=new r["a"],this._intervals.changedEvent.addEventListener(c.prototype._intervalsChanged,this),this._referenceFrame=Object(s["a"])(t,a["a"].FIXED)}Object.defineProperties(c.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}},referenceFrame:{get:function(){return this._referenceFrame}}}),c.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,a["a"].FIXED,e)},c.prototype.getValueInReferenceFrame=function(t,e,i){const s=this._intervals.findDataForIntervalContainingDate(t);if(Object(o["a"])(s))return h["a"].convertToReferenceFrame(t,s,this._referenceFrame,e,i)},c.prototype.equals=function(t){return this===t||t instanceof c&&this._intervals.equals(t._intervals,l["a"].equals)&&this._referenceFrame===t._referenceFrame},c.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)},e["a"]=c},c4da:function(t,e,i){"use strict";var s=i("bd8d"),o=i("9541"),n=i("2f63"),a=i("77bc"),r=i("d940"),h=i("452d"),l=i("ac9c"),c=i("fc71"),d=i("94f1"),p=i("d6db"),u=i("3a8e"),f=i("b83c"),m=i("9171"),g=i("3ba2"),y=i("ea07");const v=new s["a"];function b(t){this.id=t,this.vertexFormat=void 0,this.positions=void 0,this.minimumHeights=void 0,this.maximumHeights=void 0,this.granularity=void 0}function _(t,e){g["a"].call(this,{entity:t,scene:e,geometryOptions:new b(t),geometryPropertyName:"wall",observedPropertyNames:["availability","wall"]}),this._onEntityPropertyChanged(t,"wall",t.wall,void 0)}function O(t,e,i){m["a"].call(this,t,e,i)}Object(n["a"])(Object.create)&&(_.prototype=Object.create(g["a"].prototype),_.prototype.constructor=_),_.prototype.createFillGeometryInstance=function(t){const e=this._entity,i=e.isAvailable(t);let h,d;const p=new l["a"](i&&e.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),u=this._distanceDisplayConditionProperty.getValue(t),m=a["a"].fromDistanceDisplayCondition(u);if(this._materialProperty instanceof f["a"]){let e;Object(n["a"])(this._materialProperty.color)&&(this._materialProperty.color.isConstant||i)&&(e=this._materialProperty.color.getValue(t,v)),Object(n["a"])(e)||(e=s["a"].WHITE),d=o["a"].fromColor(e),h={show:p,distanceDisplayCondition:m,color:d}}else h={show:p,distanceDisplayCondition:m};return new r["a"]({id:e,geometry:new c["a"](this._options),attributes:h})},_.prototype.createOutlineGeometryInstance=function(t){const e=this._entity,i=e.isAvailable(t),n=y["a"].getValueOrDefault(this._outlineColorProperty,t,s["a"].BLACK,v),h=this._distanceDisplayConditionProperty.getValue(t);return new r["a"]({id:e,geometry:new d["a"](this._options),attributes:{show:new l["a"](i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:o["a"].fromColor(n),distanceDisplayCondition:a["a"].fromDistanceDisplayCondition(h)}})},_.prototype._isHidden=function(t,e){return!Object(n["a"])(e.positions)||g["a"].prototype._isHidden.call(this,t,e)},_.prototype._getIsClosed=function(t){return!1},_.prototype._isDynamic=function(t,e){return!e.positions.isConstant||!y["a"].isConstant(e.minimumHeights)||!y["a"].isConstant(e.maximumHeights)||!y["a"].isConstant(e.outlineWidth)||!y["a"].isConstant(e.granularity)},_.prototype._setStaticOptions=function(t,e){const i=e.minimumHeights,s=e.maximumHeights,o=e.granularity,a=this._materialProperty instanceof f["a"],r=this._options;r.vertexFormat=a?u["a"].VERTEX_FORMAT:p["a"].MaterialSupport.TEXTURED.vertexFormat,r.positions=e.positions.getValue(h["a"].MINIMUM_VALUE,r.positions),r.minimumHeights=Object(n["a"])(i)?i.getValue(h["a"].MINIMUM_VALUE,r.minimumHeights):void 0,r.maximumHeights=Object(n["a"])(s)?s.getValue(h["a"].MINIMUM_VALUE,r.maximumHeights):void 0,r.granularity=Object(n["a"])(o)?o.getValue(h["a"].MINIMUM_VALUE):void 0},_.DynamicGeometryUpdater=O,Object(n["a"])(Object.create)&&(O.prototype=Object.create(m["a"].prototype),O.prototype.constructor=O),O.prototype._isHidden=function(t,e,i){return!Object(n["a"])(this._options.positions)||m["a"].prototype._isHidden.call(this,t,e,i)},O.prototype._setOptions=function(t,e,i){const s=this._options;s.positions=y["a"].getValueOrUndefined(e.positions,i,s.positions),s.minimumHeights=y["a"].getValueOrUndefined(e.minimumHeights,i,s.minimumHeights),s.maximumHeights=y["a"].getValueOrUndefined(e.maximumHeights,i,s.maximumHeights),s.granularity=y["a"].getValueOrUndefined(e.granularity,i)},e["a"]=_},d5c7:function(t,e,i){"use strict";var s=i("933b"),o=i("be18"),n=i("bd8d"),a=i("9541"),r=i("2f63"),h=i("aee6"),l=i("77bc"),c=i("c2eb"),d=i("ac9c"),p=i("894b"),u=i("2d19"),f=i("b83c"),m=i("40b2"),g=i("ea07");const y=new h["a"],v=new h["a"],b=o["a"].ZERO,_=new o["a"];function O(t,e,i,o,n,a,r){this.primitives=t,this.appearanceType=e,this.materialProperty=i,this.depthFailAppearanceType=o,this.depthFailMaterialProperty=n,this.closed=a,this.shadows=r,this.updaters=new s["a"],this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new s["a"],this.material=void 0,this.depthFailMaterial=void 0,this.updatersWithAttributes=new s["a"],this.attributes=new s["a"],this.invalidated=!1,this.removeMaterialSubscription=i.definitionChanged.addEventListener(O.prototype.onMaterialChanged,this),this.subscriptions=new s["a"],this.showsUpdated=new s["a"]}O.prototype.onMaterialChanged=function(){this.invalidated=!0},O.prototype.isMaterial=function(t){const e=this.materialProperty,i=t.fillMaterialProperty,s=this.depthFailMaterialProperty,o=t.depthFailMaterialProperty;if(i===e&&o===s)return!0;let n=Object(r["a"])(e)&&e.equals(i);return n=(!Object(r["a"])(s)&&!Object(r["a"])(o)||Object(r["a"])(s)&&s.equals(o))&&n,n},O.prototype.add=function(t,e){const i=e.id;if(this.updaters.set(i,e),this.geometry.set(i,e.createFillGeometryInstance(t)),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&g["a"].isConstant(e.distanceDisplayConditionProperty)&&g["a"].isConstant(e.terrainOffsetProperty)){const t=this;this.subscriptions.set(i,e.entity.definitionChanged.addEventListener((function(i,s,o,n){"isShowing"===s&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(i,e);this.createPrimitive=!0},O.prototype.remove=function(t){const e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);const t=this.subscriptions.get(e);return Object(r["a"])(t)&&(t(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1};const w=new n["a"];function C(t,e,i,s,o){this._items=[],this._primitives=t,this._appearanceType=e,this._depthFailAppearanceType=i,this._closed=s,this._shadows=o}O.prototype.update=function(t){let e=!0,i=this.primitive;const s=this.primitives,u=this.geometry.values;let O;if(this.createPrimitive){const o=u.length;if(o>0){let o;Object(r["a"])(i)&&(Object(r["a"])(this.oldPrimitive)?s.remove(i):this.oldPrimitive=i),this.material=m["a"].getValue(t,this.materialProperty,this.material),Object(r["a"])(this.depthFailMaterialProperty)&&(this.depthFailMaterial=m["a"].getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),o=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.depthFailMaterial.isTranslucent(),closed:this.closed})),i=new p["a"]({show:!1,asynchronous:!0,geometryInstances:u.slice(),appearance:new this.appearanceType({material:this.material,translucent:this.material.isTranslucent(),closed:this.closed}),depthFailAppearance:o,shadows:this.shadows}),s.add(i),e=!1}else{Object(r["a"])(i)&&(s.remove(i),i=void 0);const t=this.oldPrimitive;Object(r["a"])(t)&&(s.remove(t),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1}else if(Object(r["a"])(i)&&i.ready){i.show=!0,Object(r["a"])(this.oldPrimitive)&&(s.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=m["a"].getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material,!Object(r["a"])(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof f["a"]||(this.depthFailMaterial=m["a"].getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);const e=this.updatersWithAttributes.values,p=e.length;for(O=0;O<p;O++){const s=e[O],p=s.entity,u=this.geometry.get(s.id);let m=this.attributes.get(u.id.id);if(Object(r["a"])(m)||(m=i.getGeometryInstanceAttributes(u.id),this.attributes.set(u.id.id,m)),Object(r["a"])(this.depthFailAppearanceType)&&this.depthFailMaterialProperty instanceof f["a"]&&!s.depthFailMaterialProperty.isConstant){const e=s.depthFailMaterialProperty.color,i=g["a"].getValueOrDefault(e,t,n["a"].WHITE,w);n["a"].equals(m._lastDepthFailColor,i)||(m._lastDepthFailColor=n["a"].clone(i,m._lastDepthFailColor),m.depthFailColor=a["a"].toValue(i,m.depthFailColor))}const C=p.isShowing&&(s.hasConstantFill||s.isFilled(t)),j=1===m.show[0];C!==j&&(m.show=d["a"].toValue(C,m.show));const P=s.distanceDisplayConditionProperty;if(!g["a"].isConstant(P)){const e=g["a"].getValueOrDefault(P,t,v,y);h["a"].equals(e,m._lastDistanceDisplayCondition)||(m._lastDistanceDisplayCondition=h["a"].clone(e,m._lastDistanceDisplayCondition),m.distanceDisplayCondition=l["a"].toValue(e,m.distanceDisplayCondition))}const D=s.terrainOffsetProperty;if(!g["a"].isConstant(D)){const e=g["a"].getValueOrDefault(D,t,b,_);o["a"].equals(e,m._lastOffset)||(m._lastOffset=o["a"].clone(e,m._lastOffset),m.offset=c["a"].toValue(e,m.offset))}}this.updateShows(i)}else Object(r["a"])(i)&&!i.ready&&(e=!1);return e},O.prototype.updateShows=function(t){const e=this.showsUpdated.values,i=e.length;for(let s=0;s<i;s++){const i=e[s],o=i.entity,n=this.geometry.get(i.id);let a=this.attributes.get(n.id.id);Object(r["a"])(a)||(a=t.getGeometryInstanceAttributes(n.id),this.attributes.set(n.id.id,a));const h=o.isShowing,l=1===a.show[0];h!==l&&(a.show=d["a"].toValue(h,a.show),n.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()},O.prototype.contains=function(t){return this.updaters.contains(t.id)},O.prototype.getBoundingSphere=function(t,e){const i=this.primitive;if(!i.ready)return u["a"].PENDING;const s=i.getGeometryInstanceAttributes(t.entity);return!Object(r["a"])(s)||!Object(r["a"])(s.boundingSphere)||Object(r["a"])(s.show)&&0===s.show[0]?u["a"].FAILED:(s.boundingSphere.clone(e),u["a"].DONE)},O.prototype.destroy=function(){const t=this.primitive,e=this.primitives;Object(r["a"])(t)&&e.remove(t);const i=this.oldPrimitive;Object(r["a"])(i)&&e.remove(i),this.removeMaterialSubscription()},C.prototype.add=function(t,e){const i=this._items,s=i.length;for(let n=0;n<s;n++){const s=i[n];if(s.isMaterial(e))return void s.add(t,e)}const o=new O(this._primitives,this._appearanceType,e.fillMaterialProperty,this._depthFailAppearanceType,e.depthFailMaterialProperty,this._closed,this._shadows);o.add(t,e),i.push(o)},C.prototype.remove=function(t){const e=this._items,i=e.length;for(let s=i-1;s>=0;s--){const i=e[s];if(i.remove(t)){0===i.updaters.length&&(e.splice(s,1),i.destroy());break}}},C.prototype.update=function(t){let e;const i=this._items,s=i.length;for(e=s-1;e>=0;e--){const s=i[e];if(s.invalidated){i.splice(e,1);const o=s.updaters.values,n=o.length;for(let e=0;e<n;e++)this.add(t,o[e]);s.destroy()}}let o=!0;for(e=0;e<i.length;e++)o=i[e].update(t)&&o;return o},C.prototype.getBoundingSphere=function(t,e){const i=this._items,s=i.length;for(let o=0;o<s;o++){const s=i[o];if(s.contains(t))return s.getBoundingSphere(t,e)}return u["a"].FAILED},C.prototype.removeAllPrimitives=function(){const t=this._items,e=t.length;for(let i=0;i<e;i++)t[i].destroy();this._items.length=0},e["a"]=C},d607:function(t,e,i){"use strict";var s=i("2f63"),o=i("c52f"),n=i("21d7"),a=i("7749"),r=i("ea07");function h(t){this._definitionChanged=new n["a"],this._value=void 0,this._removeSubscription=void 0,this.setValue(t)}Object.defineProperties(h.prototype,{isConstant:{get:function(){return r["a"].isConstant(this._value)}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return Object(s["a"])(this._value)?this._value.referenceFrame:a["a"].FIXED}}}),h.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,a["a"].FIXED,e)},h.prototype.setValue=function(t){this._value!==t&&(this._value=t,Object(s["a"])(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0),Object(s["a"])(t)&&(this._removeSubscription=t.definitionChanged.addEventListener(this._raiseDefinitionChanged,this)),this._definitionChanged.raiseEvent(this))},h.prototype.getValueInReferenceFrame=function(t,e,i){if(Object(s["a"])(this._value))return i=this._value.getValueInReferenceFrame(t,e,i),Object(s["a"])(i)?o["a"].WGS84.scaleToGeodeticSurface(i,i):void 0},h.prototype.equals=function(t){return this===t||t instanceof h&&this._value===t._value},h.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},e["a"]=h},e74f:function(t,e,i){"use strict";var s=i("933b"),o=i("2f63"),n=i("aee6"),a=i("77bc"),r=i("9fb4"),h=i("ac9c"),l=i("acad"),c=i("2a1b"),d=i("2d19"),p=i("b83c"),u=i("40b2"),f=i("ea07");const m=new n["a"],g=new n["a"];function y(t,e,i,o,n,a){this.primitives=t,this.classificationType=e,this.appearanceType=i,this.materialProperty=o,this.updaters=new s["a"],this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new s["a"],this.material=void 0,this.updatersWithAttributes=new s["a"],this.attributes=new s["a"],this.invalidated=!1,this.removeMaterialSubscription=o.definitionChanged.addEventListener(y.prototype.onMaterialChanged,this),this.subscriptions=new s["a"],this.showsUpdated=new s["a"],this.usingSphericalTextureCoordinates=n,this.zIndex=a,this.rectangleCollisionCheck=new r["a"]}function v(t,e,i){this._items=[],this._primitives=t,this._classificationType=e,this._appearanceType=i}y.prototype.onMaterialChanged=function(){this.invalidated=!0},y.prototype.overlapping=function(t){return this.rectangleCollisionCheck.collides(t)},y.prototype.isMaterial=function(t){const e=this.materialProperty,i=t.fillMaterialProperty;return i===e||i instanceof p["a"]&&e instanceof p["a"]||Object(o["a"])(e)&&e.equals(i)},y.prototype.add=function(t,e,i){const s=e.id;if(this.updaters.set(s,e),this.geometry.set(s,i),this.rectangleCollisionCheck.insert(s,i.geometry.rectangle),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&f["a"].isConstant(e.distanceDisplayConditionProperty)){const t=this;this.subscriptions.set(s,e.entity.definitionChanged.addEventListener((function(i,s,o,n){"isShowing"===s&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(s,e);this.createPrimitive=!0},y.prototype.remove=function(t){const e=t.id,i=this.geometry.get(e);if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.rectangleCollisionCheck.remove(e,i.geometry.rectangle),this.updatersWithAttributes.remove(e);const t=this.subscriptions.get(e);return Object(o["a"])(t)&&(t(),this.subscriptions.remove(e)),!0}return!1},y.prototype.update=function(t){let e=!0,i=this.primitive;const s=this.primitives,r=this.geometry.values;let c;if(this.createPrimitive){const n=r.length;if(n>0)Object(o["a"])(i)&&(Object(o["a"])(this.oldPrimitive)?s.remove(i):this.oldPrimitive=i),this.material=u["a"].getValue(t,this.materialProperty,this.material),i=new l["a"]({show:!1,asynchronous:!0,geometryInstances:r.slice(),appearance:new this.appearanceType({material:this.material}),classificationType:this.classificationType}),s.add(i,this.zIndex),e=!1;else{Object(o["a"])(i)&&(s.remove(i),i=void 0);const t=this.oldPrimitive;Object(o["a"])(t)&&(s.remove(t),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1}else if(Object(o["a"])(i)&&i.ready){i.show=!0,Object(o["a"])(this.oldPrimitive)&&(s.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=u["a"].getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material;const e=this.updatersWithAttributes.values,r=e.length;for(c=0;c<r;c++){const s=e[c],r=s.entity,l=this.geometry.get(s.id);let d=this.attributes.get(l.id.id);Object(o["a"])(d)||(d=i.getGeometryInstanceAttributes(l.id),this.attributes.set(l.id.id,d));const p=r.isShowing&&(s.hasConstantFill||s.isFilled(t)),u=1===d.show[0];p!==u&&(d.show=h["a"].toValue(p,d.show));const y=s.distanceDisplayConditionProperty;if(!f["a"].isConstant(y)){const e=f["a"].getValueOrDefault(y,t,g,m);n["a"].equals(e,d._lastDistanceDisplayCondition)||(d._lastDistanceDisplayCondition=n["a"].clone(e,d._lastDistanceDisplayCondition),d.distanceDisplayCondition=a["a"].toValue(e,d.distanceDisplayCondition))}}this.updateShows(i)}else Object(o["a"])(i)&&!i.ready&&(e=!1);return e},y.prototype.updateShows=function(t){const e=this.showsUpdated.values,i=e.length;for(let s=0;s<i;s++){const i=e[s],n=i.entity,a=this.geometry.get(i.id);let r=this.attributes.get(a.id.id);Object(o["a"])(r)||(r=t.getGeometryInstanceAttributes(a.id),this.attributes.set(a.id.id,r));const l=n.isShowing,c=1===r.show[0];l!==c&&(r.show=h["a"].toValue(l,r.show),a.attributes.show.value[0]=r.show[0])}this.showsUpdated.removeAll()},y.prototype.contains=function(t){return this.updaters.contains(t.id)},y.prototype.getBoundingSphere=function(t,e){const i=this.primitive;if(!i.ready)return d["a"].PENDING;const s=i.getGeometryInstanceAttributes(t.entity);return!Object(o["a"])(s)||!Object(o["a"])(s.boundingSphere)||Object(o["a"])(s.show)&&0===s.show[0]?d["a"].FAILED:(s.boundingSphere.clone(e),d["a"].DONE)},y.prototype.destroy=function(){const t=this.primitive,e=this.primitives;Object(o["a"])(t)&&e.remove(t);const i=this.oldPrimitive;Object(o["a"])(i)&&e.remove(i),this.removeMaterialSubscription()},v.prototype.add=function(t,e){const i=this._items,s=i.length,o=e.createFillGeometryInstance(t),n=c["a"].shouldUseSphericalCoordinates(o.geometry.rectangle),a=f["a"].getValueOrDefault(e.zIndex,0);for(let h=0;h<s;++h){const s=i[h];if(s.isMaterial(e)&&s.usingSphericalTextureCoordinates===n&&s.zIndex===a&&!s.overlapping(o.geometry.rectangle))return void s.add(t,e,o)}const r=new y(this._primitives,this._classificationType,this._appearanceType,e.fillMaterialProperty,n,a);r.add(t,e,o),i.push(r)},v.prototype.remove=function(t){const e=this._items,i=e.length;for(let s=i-1;s>=0;s--){const i=e[s];if(i.remove(t)){0===i.updaters.length&&(e.splice(s,1),i.destroy());break}}},v.prototype.update=function(t){let e;const i=this._items,s=i.length;for(e=s-1;e>=0;e--){const s=i[e];if(s.invalidated){i.splice(e,1);const o=s.updaters.values,n=o.length;for(let e=0;e<n;e++)this.add(t,o[e]);s.destroy()}}let o=!0;for(e=0;e<i.length;e++)o=i[e].update(t)&&o;return o},v.prototype.getBoundingSphere=function(t,e){const i=this._items,s=i.length;for(let o=0;o<s;o++){const s=i[o];if(s.contains(t))return s.getBoundingSphere(t,e)}return d["a"].FAILED},v.prototype.removeAllPrimitives=function(){const t=this._items,e=t.length;for(let i=0;i<e;i++)t[i].destroy();this._items.length=0},e["a"]=v},ea07:function(t,e,i){"use strict";var s=i("535a"),o=i("2f63"),n=i("4f04");function a(){n["a"].throwInstantiationError()}Object.defineProperties(a.prototype,{isConstant:{get:n["a"].throwInstantiationError},definitionChanged:{get:n["a"].throwInstantiationError}}),a.prototype.getValue=n["a"].throwInstantiationError,a.prototype.equals=n["a"].throwInstantiationError,a.equals=function(t,e){return t===e||Object(o["a"])(t)&&t.equals(e)},a.arrayEquals=function(t,e){if(t===e)return!0;if(!Object(o["a"])(t)||!Object(o["a"])(e)||t.length!==e.length)return!1;const i=t.length;for(let s=0;s<i;s++)if(!a.equals(t[s],e[s]))return!1;return!0},a.isConstant=function(t){return!Object(o["a"])(t)||t.isConstant},a.getValueOrUndefined=function(t,e,i){return Object(o["a"])(t)?t.getValue(e,i):void 0},a.getValueOrDefault=function(t,e,i,n){return Object(o["a"])(t)?Object(s["a"])(t.getValue(e,n),i):i},a.getValueOrClonedDefault=function(t,e,i,s){let n;return Object(o["a"])(t)&&(n=t.getValue(e,s)),Object(o["a"])(n)||(n=i.clone(n)),n},e["a"]=a},f0a0:function(t,e,i){"use strict";var s=i("535a"),o=i("2f63"),n=i("21d7"),a=i("984f"),r=i("0a43"),h=i("ea07");function l(t,e){this._propertyNames=[],this._definitionChanged=new n["a"],Object(o["a"])(t)&&this.merge(t,e)}function c(t){return new a["a"](t)}function d(t,e){const i=t._propertyNames,s=e._propertyNames,o=i.length;if(o!==s.length)return!1;for(let n=0;n<o;++n){const o=i[n],a=s.indexOf(o);if(-1===a)return!1;if(!h["a"].equals(t[o],e[o]))return!1}return!0}Object.defineProperties(l.prototype,{propertyNames:{get:function(){return this._propertyNames}},isConstant:{get:function(){const t=this._propertyNames;for(let e=0,i=t.length;e<i;e++)if(!h["a"].isConstant(this[t[e]]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}}),l.prototype.hasProperty=function(t){return-1!==this._propertyNames.indexOf(t)},l.prototype.addProperty=function(t,e,i){const n=this._propertyNames;n.push(t),Object.defineProperty(this,t,Object(r["a"])(t,!0,Object(s["a"])(i,c))),Object(o["a"])(e)&&(this[t]=e),this._definitionChanged.raiseEvent(this)},l.prototype.removeProperty=function(t){const e=this._propertyNames,i=e.indexOf(t);this._propertyNames.splice(i,1),delete this[t],this._definitionChanged.raiseEvent(this)},l.prototype.getValue=function(t,e){Object(o["a"])(e)||(e={});const i=this._propertyNames;for(let s=0,o=i.length;s<o;s++){const o=i[s];e[o]=h["a"].getValueOrUndefined(this[o],t,e[o])}return e},l.prototype.merge=function(t,e){const i=this._propertyNames,s=Object(o["a"])(t._propertyNames)?t._propertyNames:Object.keys(t);for(let n=0,a=s.length;n<a;n++){const a=s[n],r=this[a],h=t[a];void 0===r&&-1===i.indexOf(a)&&this.addProperty(a,void 0,e),void 0!==h&&(void 0!==r?Object(o["a"])(r)&&Object(o["a"])(r.merge)&&r.merge(h):Object(o["a"])(h)&&Object(o["a"])(h.merge)&&Object(o["a"])(h.clone)?this[a]=h.clone():this[a]=h)}},l.prototype.equals=function(t){return this===t||t instanceof l&&d(this,t)},e["a"]=l},f293:function(t,e,i){"use strict";var s=i("933b"),o=i("bd8d"),n=i("9541"),a=i("535a"),r=i("2f63"),h=i("aee6"),l=i("77bc"),c=i("ac9c"),d=i("a0f5"),p=i("63ae"),u=i("2e78"),f=i("2d19"),m=i("b83c"),g=i("40b2"),y=i("ea07");const v=new o["a"],b=new h["a"],_=new h["a"];function O(t,e,i,o,n){let a;a=i instanceof m["a"]?p["a"]:u["a"],this.orderedGroundPrimitives=t,this.classificationType=e,this.appearanceType=a,this.materialProperty=i,this.updaters=new s["a"],this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new s["a"],this.material=void 0,this.updatersWithAttributes=new s["a"],this.attributes=new s["a"],this.invalidated=!1,this.removeMaterialSubscription=i.definitionChanged.addEventListener(O.prototype.onMaterialChanged,this),this.subscriptions=new s["a"],this.showsUpdated=new s["a"],this.zIndex=o,this._asynchronous=n}function w(t,e,i){this._items=[],this._orderedGroundPrimitives=t,this._classificationType=e,this._asynchronous=Object(a["a"])(i,!0)}O.prototype.onMaterialChanged=function(){this.invalidated=!0},O.prototype.isMaterial=function(t){const e=this.materialProperty,i=t.fillMaterialProperty;return i===e||i instanceof m["a"]&&e instanceof m["a"]||Object(r["a"])(e)&&e.equals(i)},O.prototype.add=function(t,e,i){const s=e.id;if(this.updaters.set(s,e),this.geometry.set(s,i),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&y["a"].isConstant(e.distanceDisplayConditionProperty)){const t=this;this.subscriptions.set(s,e.entity.definitionChanged.addEventListener((function(i,s,o,n){"isShowing"===s&&t.showsUpdated.set(e.id,e)})))}else this.updatersWithAttributes.set(s,e);this.createPrimitive=!0},O.prototype.remove=function(t){const e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);const t=this.subscriptions.get(e);return Object(r["a"])(t)&&(t(),this.subscriptions.remove(e)),!0}return!1},O.prototype.update=function(t){let e=!0,i=this.primitive;const s=this.orderedGroundPrimitives,a=this.geometry.values;let p;if(this.createPrimitive){const o=a.length;if(o>0)Object(r["a"])(i)&&(Object(r["a"])(this.oldPrimitive)?s.remove(i):this.oldPrimitive=i),i=new d["a"]({show:!1,asynchronous:this._asynchronous,geometryInstances:a.slice(),appearance:new this.appearanceType,classificationType:this.classificationType}),this.appearanceType===u["a"]&&(this.material=g["a"].getValue(t,this.materialProperty,this.material),i.appearance.material=this.material),s.add(i,this.zIndex),e=!1;else{Object(r["a"])(i)&&(s.remove(i),i=void 0);const t=this.oldPrimitive;Object(r["a"])(t)&&(s.remove(t),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=i,this.createPrimitive=!1}else if(Object(r["a"])(i)&&i.ready){i.show=!0,Object(r["a"])(this.oldPrimitive)&&(s.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.appearanceType===u["a"]&&(this.material=g["a"].getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material);const e=this.updatersWithAttributes.values,a=e.length;for(p=0;p<a;p++){const s=e[p],a=s.entity,d=this.geometry.get(s.id);let u=this.attributes.get(d.id.id);if(Object(r["a"])(u)||(u=i.getGeometryInstanceAttributes(d.id),this.attributes.set(d.id.id,u)),!s.fillMaterialProperty.isConstant){const e=s.fillMaterialProperty.color,i=y["a"].getValueOrDefault(e,t,o["a"].WHITE,v);o["a"].equals(u._lastColor,i)||(u._lastColor=o["a"].clone(i,u._lastColor),u.color=n["a"].toValue(i,u.color))}const f=a.isShowing&&(s.hasConstantFill||s.isFilled(t)),m=1===u.show[0];f!==m&&(u.show=c["a"].toValue(f,u.show));const g=s.distanceDisplayConditionProperty;if(!y["a"].isConstant(g)){const e=y["a"].getValueOrDefault(g,t,_,b);h["a"].equals(e,u._lastDistanceDisplayCondition)||(u._lastDistanceDisplayCondition=h["a"].clone(e,u._lastDistanceDisplayCondition),u.distanceDisplayCondition=l["a"].toValue(e,u.distanceDisplayCondition))}}this.updateShows(i)}else Object(r["a"])(i)&&!i.ready&&(e=!1);return e},O.prototype.updateShows=function(t){const e=this.showsUpdated.values,i=e.length;for(let s=0;s<i;s++){const i=e[s],o=i.entity,n=this.geometry.get(i.id);let a=this.attributes.get(n.id.id);Object(r["a"])(a)||(a=t.getGeometryInstanceAttributes(n.id),this.attributes.set(n.id.id,a));const h=o.isShowing,l=1===a.show[0];h!==l&&(a.show=c["a"].toValue(h,a.show),n.attributes.show.value[0]=a.show[0])}this.showsUpdated.removeAll()},O.prototype.contains=function(t){return this.updaters.contains(t.id)},O.prototype.getBoundingSphere=function(t,e){const i=this.primitive;if(!i.ready)return f["a"].PENDING;const s=i.getGeometryInstanceAttributes(t.entity);return!Object(r["a"])(s)||!Object(r["a"])(s.boundingSphere)||Object(r["a"])(s.show)&&0===s.show[0]?f["a"].FAILED:(s.boundingSphere.clone(e),f["a"].DONE)},O.prototype.destroy=function(){const t=this.primitive,e=this.orderedGroundPrimitives;Object(r["a"])(t)&&e.remove(t);const i=this.oldPrimitive;Object(r["a"])(i)&&e.remove(i),this.removeMaterialSubscription()},w.prototype.add=function(t,e){const i=this._items,s=i.length,o=e.createFillGeometryInstance(t),n=y["a"].getValueOrDefault(e.zIndex,0);for(let r=0;r<s;++r){const s=i[r];if(s.isMaterial(e)&&s.zIndex===n)return void s.add(t,e,o)}const a=new O(this._orderedGroundPrimitives,this._classificationType,e.fillMaterialProperty,n,this._asynchronous);a.add(t,e,o),i.push(a)},w.prototype.remove=function(t){const e=this._items,i=e.length;for(let s=i-1;s>=0;s--){const i=e[s];if(i.remove(t)){0===i.updaters.length&&(e.splice(s,1),i.destroy());break}}},w.prototype.update=function(t){let e;const i=this._items,s=i.length;for(e=s-1;e>=0;e--){const s=i[e];if(s.invalidated){i.splice(e,1);const o=s.updaters.values,n=o.length;for(let e=0;e<n;e++)this.add(t,o[e]);s.destroy()}}let o=!0;for(e=0;e<i.length;e++)o=i[e].update(t)&&o;return o},w.prototype.getBoundingSphere=function(t,e){const i=this._items,s=i.length;for(let o=0;o<s;o++){const s=i[o];if(s.contains(t))return s.getBoundingSphere(t,e)}return f["a"].FAILED},w.prototype.removeAllPrimitives=function(){const t=this._items,e=t.length;for(let i=0;i<e;i++)t[i].destroy();this._items.length=0},e["a"]=w},fd5d:function(t,e,i){"use strict";var s=i("be18"),o=i("bef8"),n=i("2f63"),a=i("7d62"),r=i("21d7"),h=i("452d"),l=i("93da"),c=i("2d75"),d=i("a307"),p=i("ea07");const u=new s["a"],f=new o["a"];function m(t,e,i,a){this._scene=t,this._heightReference=i,this._extrudedHeightReference=a,this._positionProperty=e,this._position=new s["a"],this._cartographicPosition=new o["a"],this._normal=new s["a"],this._definitionChanged=new r["a"],this._terrainHeight=0,this._removeCallbackFunc=void 0,this._removeEventListener=void 0,this._removeModeListener=void 0;const l=this;if(Object(n["a"])(t.globe)&&(this._removeEventListener=t.terrainProviderChanged.addEventListener((function(){l._updateClamping()})),this._removeModeListener=t.morphComplete.addEventListener((function(){l._updateClamping()}))),e.isConstant){const i=e.getValue(h["a"].MINIMUM_VALUE,u);if(!Object(n["a"])(i)||s["a"].equals(i,s["a"].ZERO)||!Object(n["a"])(t.globe))return;this._position=s["a"].clone(i,this._position),this._updateClamping(),this._normal=t.globe.ellipsoid.geodeticSurfaceNormal(i,this._normal)}}Object.defineProperties(m.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}}}),m.prototype._updateClamping=function(){Object(n["a"])(this._removeCallbackFunc)&&this._removeCallbackFunc();const t=this._scene,e=t.globe,i=this._position;if(!Object(n["a"])(e)||s["a"].equals(i,s["a"].ZERO))return void(this._terrainHeight=0);const o=e.ellipsoid,a=e._surface,r=this,h=o.cartesianToCartographic(i,this._cartographicPosition),l=e.getHeight(h);function c(e){if(t.mode===d["a"].SCENE3D){const t=o.cartesianToCartographic(e,f);r._terrainHeight=t.height}else r._terrainHeight=e.x;r.definitionChanged.raiseEvent()}Object(n["a"])(l)?this._terrainHeight=l:this._terrainHeight=0,this._removeCallbackFunc=a.updateHeight(h,c)},m.prototype.getValue=function(t,e){const i=p["a"].getValueOrDefault(this._heightReference,t,c["a"].NONE),o=p["a"].getValueOrDefault(this._extrudedHeightReference,t,c["a"].NONE);if(i===c["a"].NONE&&o!==c["a"].RELATIVE_TO_GROUND)return this._position=s["a"].clone(s["a"].ZERO,this._position),s["a"].clone(s["a"].ZERO,e);if(this._positionProperty.isConstant)return s["a"].multiplyByScalar(this._normal,this._terrainHeight,e);const a=this._scene,r=this._positionProperty.getValue(t,u);if(!Object(n["a"])(r)||s["a"].equals(r,s["a"].ZERO)||!Object(n["a"])(a.globe))return s["a"].clone(s["a"].ZERO,e);if(s["a"].equalsEpsilon(this._position,r,l["a"].EPSILON10))return s["a"].multiplyByScalar(this._normal,this._terrainHeight,e);this._position=s["a"].clone(r,this._position),this._updateClamping();const h=a.globe.ellipsoid.geodeticSurfaceNormal(r,this._normal);return s["a"].multiplyByScalar(h,this._terrainHeight,e)},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return Object(n["a"])(this._removeEventListener)&&this._removeEventListener(),Object(n["a"])(this._removeModeListener)&&this._removeModeListener(),Object(n["a"])(this._removeCallbackFunc)&&this._removeCallbackFunc(),Object(a["a"])(this)},e["a"]=m}}]);