(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~d648da01"],{"3f56":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("bd8d"),o=i("2bb9"),a=i("2f63"),s=i("7d62"),r=i("8a9e"),c=i("7c52"),u=i("d289");function l(t,e,i){this._tileset=t,this._tile=e,this._resource=i,this._model=void 0,this._metadata=void 0,this._group=void 0}function h(t,e,i,n){const a={cull:!1,releaseGltfJson:!0,opaquePass:u["a"].CESIUM_3D_TILE,modelMatrix:e.computedTransform,upAxis:t._modelUpAxis,forwardAxis:t._modelForwardAxis,incrementallyLoadTextures:!1,customShader:t.customShader,content:i,colorBlendMode:t.colorBlendMode,colorBlendAmount:t.colorBlendAmount,lightColor:t.lightColor,imageBasedLighting:t.imageBasedLighting,featureIdLabel:t.featureIdLabel,instanceFeatureIdLabel:t.instanceFeatureIdLabel,pointCloudShading:t.pointCloudShading,clippingPlanes:t.clippingPlanes,backFaceCulling:t.backFaceCulling,shadows:t.shadows,showCreditsOnScreen:t.showCreditsOnScreen,splitDirection:t.splitDirection,enableDebugWireframe:t._enableDebugWireframe,debugWireframe:t.debugWireframe,projectTo2D:t._projectTo2D,enableShowOutline:t._enableShowOutline,showOutline:t.showOutline,outlineColor:t.outlineColor};return Object(o["a"])(n,a)}Object.defineProperties(l.prototype,{featuresLength:{get:function(){const t=this._model,e=t.featureTables,i=t.featureTableId;return Object(a["a"])(e)&&Object(a["a"])(e[i])?e[i].featuresLength:0}},pointsLength:{get:function(){return this._model.statistics.pointsLength}},trianglesLength:{get:function(){return this._model.statistics.trianglesLength}},geometryByteLength:{get:function(){return this._model.statistics.geometryByteLength}},texturesByteLength:{get:function(){return this._model.statistics.texturesByteLength}},batchTableByteLength:{get:function(){const t=this._model.statistics;return t.propertyTablesByteLength+t.batchTexturesByteLength}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._model.readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){const t=this._model,e=t.featureTables,i=t.featureTableId;if(Object(a["a"])(e)&&Object(a["a"])(e[i]))return e[i]}},metadata:{get:function(){return this._metadata},set:function(t){this._metadata=t}},group:{get:function(){return this._group},set:function(t){this._group=t}}}),l.prototype.getFeature=function(t){const e=this._model,i=e.featureTableId;if(!Object(a["a"])(i))return;const n=e.featureTables[i];return n.getFeature(t)},l.prototype.hasProperty=function(t,e){const i=this._model,n=i.featureTableId;if(!Object(a["a"])(n))return!1;const o=i.featureTables[n];return o.hasProperty(t,e)},l.prototype.applyDebugSettings=function(t,e){e=t?e:n["a"].WHITE,0===this.featuresLength?this._model.color=e:Object(a["a"])(this.batchTable)&&this.batchTable.setAllColor(e)},l.prototype.applyStyle=function(t){this._model.style=t},l.prototype.update=function(t,e){const i=this._model,n=this._tile;i.colorBlendAmount=t.colorBlendAmount,i.colorBlendMode=t.colorBlendMode,i.modelMatrix=n.computedTransform,i.customShader=t.customShader,i.featureIdLabel=t.featureIdLabel,i.instanceFeatureIdLabel=t.instanceFeatureIdLabel,i.lightColor=t.lightColor,i.imageBasedLighting=t.imageBasedLighting,i.backFaceCulling=t.backFaceCulling,i.shadows=t.shadows,i.showCreditsOnScreen=t.showCreditsOnScreen,i.splitDirection=t.splitDirection,i.debugWireframe=t.debugWireframe,i.showOutline=t.showOutline,i.outlineColor=t.outlineColor,i.pointCloudShading=t.pointCloudShading;const o=t.clippingPlanes;i.referenceMatrix=t.clippingPlanesOriginMatrix,Object(a["a"])(o)&&n.clippingPlanesDirty&&(i._clippingPlanes=o.enabled&&n._isClipped?o:void 0),Object(a["a"])(o)&&Object(a["a"])(i._clippingPlanes)&&i._clippingPlanes!==o&&(i._clippingPlanes=o),i.update(e)},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._model=this._model&&this._model.destroy(),Object(s["a"])(this)},l.fromGltf=function(t,e,i,n){const o=new l(t,e,i),a={gltf:n,basePath:i},s=h(t,e,o,a),u=c["a"].fromGltf(s);return u.readyPromise.then((function(t){t.activeAnimations.addAll({loop:r["a"].REPEAT})})),o._model=u,o},l.fromB3dm=function(t,e,i,n,o){const a=new l(t,e,i),s={arrayBuffer:n,byteOffset:o,resource:i},u=h(t,e,a,s),d=c["a"].fromB3dm(u);return d.readyPromise.then((function(t){t.activeAnimations.addAll({loop:r["a"].REPEAT})})),a._model=d,a},l.fromI3dm=function(t,e,i,n,o){const a=new l(t,e,i),s={arrayBuffer:n,byteOffset:o,resource:i},u=h(t,e,a,s),d=c["a"].fromI3dm(u);return d.readyPromise.then((function(t){t.activeAnimations.addAll({loop:r["a"].REPEAT})})),a._model=d,a},l.fromPnts=function(t,e,i,n,o){const a=new l(t,e,i),s={arrayBuffer:n,byteOffset:o,resource:i},r=h(t,e,a,s);return a._model=c["a"].fromPnts(r),a},l.fromGeoJson=function(t,e,i,n){const o=new l(t,e,i),a={geoJson:n,resource:i},s=h(t,e,o,a);return o._model=c["a"].fromGeoJson(s),o}},"60e0":function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i("be18"),o=i("2f63"),a=i("52f0"),s=i("0260"),r=i("283e"),c=i("b08e"),u=i("1da3"),l=i("a141"),h=i("29ab"),d=i("1b8d"),m=i("df07");function p(){}p.getFailedLoadFunction=function(t,e,i){return function(t){let n=`Failed to load ${e}: ${i}`;Object(o["a"])(t)&&(n+="\n"+t.message);const a=new r["a"](n);return Object(o["a"])(t)&&(a.stack=`Original stack:\n${t.stack}\nHandler stack:\n${a.stack}`),Promise.reject(a)}},p.getNodeTransform=function(t){return Object(o["a"])(t.matrix)?t.matrix:a["a"].fromTranslationQuaternionRotationScale(Object(o["a"])(t.translation)?t.translation:n["a"].ZERO,Object(o["a"])(t.rotation)?t.rotation:s["a"].IDENTITY,Object(o["a"])(t.scale)?t.scale:n["a"].ONE)},p.getAttributeBySemantic=function(t,e,i){const n=t.attributes,a=n.length;for(let s=0;s<a;++s){const t=n[s],a=!Object(o["a"])(i)||t.setIndex===i;if(t.semantic===e&&a)return t}},p.getAttributeByName=function(t,e){const i=t.attributes,n=i.length;for(let o=0;o<n;++o){const t=i[o];if(t.name===e)return t}},p.getFeatureIdsByLabel=function(t,e){for(let i=0;i<t.length;i++){const n=t[i];if(n.positionalLabel===e||n.label===e)return n}},p.hasQuantizedAttributes=function(t){if(!Object(o["a"])(t))return!1;for(let e=0;e<t.length;e++){const i=t[e];if(Object(o["a"])(i.quantization))return!0}return!1},p.getAttributeInfo=function(t){const e=t.semantic,i=t.setIndex;let n,a=!1;Object(o["a"])(e)?(n=l["a"].getVariableName(e,i),a=!0):(n=t.name,n=n.replace(/^_/,""),n=n.toLowerCase());const s=/^color_\d+$/.test(n),r=t.type;let c=u["a"].getGlslType(r);s&&(c="vec4");const h=Object(o["a"])(t.quantization);let d;return h&&(d=s?"vec4":u["a"].getGlslType(t.quantization.type)),{attribute:t,isQuantized:h,variableName:n,hasSemantic:a,glslType:c,quantizedGlslType:d}};const f=new n["a"],_=new n["a"];p.getPositionMinMax=function(t,e,i){const a=p.getAttributeBySemantic(t,"POSITION");let s=a.max,r=a.min;return Object(o["a"])(i)&&Object(o["a"])(e)&&(r=n["a"].add(r,e,_),s=n["a"].add(s,i,f)),{min:r,max:s}},p.getAxisCorrectionMatrix=function(t,e,i){return i=a["a"].clone(a["a"].IDENTITY,i),t===c["a"].Y?i=a["a"].clone(c["a"].Y_UP_TO_Z_UP,i):t===c["a"].X&&(i=a["a"].clone(c["a"].X_UP_TO_Z_UP,i)),e===c["a"].Z&&(i=a["a"].multiplyTransformation(i,c["a"].Z_UP_TO_X_UP,i)),i};const g=new m["a"];p.getCullFace=function(t,e){if(!d["a"].isTriangles(e))return h["a"].BACK;const i=a["a"].getMatrix3(t,g);return m["a"].determinant(i)<0?h["a"].FRONT:h["a"].BACK},p.sanitizeGlslIdentifier=function(t){let e=t.replaceAll(/[^A-Za-z0-9]+/g,"_");return e=e.replace(/^gl_/,""),/^\d/.test(e)&&(e="_"+e),e}},"7c52":function(t,e,i){"use strict";i.d(e,"a",(function(){return Oe}));var n=i("cef5"),o=i("be18"),a=i("bef8"),s=i("8dfe"),r=i("c1f7"),c=i("43ee"),u=i("2f63"),l=i("535a"),h=i("aee6"),d=i("2453"),m=i("2d75"),p=i("8bd8"),f=i("21d7"),_=i("5ed2"),g=i("93da"),b=i("8a9e"),y=i("9007"),T=i("5f32"),S=i("8920"),O=i("13e7"),C=i("7993"),w=i("8bde"),M=i("ea83"),x=i("0260"),P=i("38f2");const j=w["a"].AnimatedPropertyType;function L(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT);const e=t.channel,i=t.runtimeAnimation,n=t.runtimeNode;this._channel=e,this._runtimeAnimation=i,this._runtimeNode=n,this._splines=[],this._path=void 0,v(this)}function D(t,e){const i=[],n=[],o=[],a=e.length;for(let s=0;s<a;s+=3)n.push(e[s]),i.push(e[s+1]),o.push(e[s+2]);return n.splice(0,1),o.length=o.length-1,new S["a"]({times:t,points:i,inTangents:n,outTangents:o})}function A(t,e,i,n){if(1===t.length&&1===e.length)return new T["a"](e[0]);switch(i){case O["a"].STEP:return new M["a"]({times:t,points:e});case O["a"].CUBICSPLINE:return D(t,e);case O["a"].LINEAR:return n===j.ROTATION?new P["a"]({times:t,points:e}):new C["a"]({times:t,points:e})}}function E(t,e,i,n,o){const a=[];if(n===j.WEIGHTS){const s=e.length,r=s/o;let c,u;for(c=0;c<o;c++){const s=new Array(r);let l=c;if(i===O["a"].CUBICSPLINE)for(u=0;u<r;u+=3)s[u]=e[l],s[u+1]=e[l+o],s[u+2]=e[l+2*o],l+=3*o;else for(u=0;u<r;u++)s[u]=e[l],l+=o;a.push(A(t,s,i,n))}}else a.push(A(t,e,i,n));return a}let I;function v(t){const e=t._channel,i=e.sampler,n=i.input,a=i.output,s=i.interpolation,r=e.target,c=r.path,l=t._runtimeNode,h=Object(u["a"])(l.morphWeights)?l.morphWeights.length:1,d=E(n,a,s,c,h);switch(t._splines=d,t._path=c,c){case j.TRANSLATION:case j.SCALE:I=new o["a"];break;case j.ROTATION:I=new x["a"];break;case j.WEIGHTS:break}}Object.defineProperties(L.prototype,{channel:{get:function(){return this._channel}},runtimeAnimation:{get:function(){return this._runtimeAnimation}},runtimeNode:{get:function(){return this._runtimeNode}},splines:{get:function(){return this._splines}}}),L.prototype.animate=function(t){const e=this._splines,i=this._path,n=this._runtimeAnimation.model,o=this._runtimeNode;if(i===j.WEIGHTS){const i=o.morphWeights,a=i.length;for(let o=0;o<a;o++){const a=e[o],s=n.clampAnimations?a.clampTime(t):a.wrapTime(t);i[o]=a.evaluate(s)}}else{if(o.userAnimated)return;{const a=e[0],s=n.clampAnimations?a.clampTime(t):a.wrapTime(t);o[i]=a.evaluate(s,I)}}};var B=L;function N(t,e,i){this._animation=e,this._name=e.name,this._runtimeChannels=void 0,this._startTime=_["a"].clone(i.startTime),this._delay=Object(l["a"])(i.delay,0),this._stopTime=_["a"].clone(i.stopTime),this.removeOnStop=Object(l["a"])(i.removeOnStop,!1),this._multiplier=Object(l["a"])(i.multiplier,1),this._reverse=Object(l["a"])(i.reverse,!1),this._loop=Object(l["a"])(i.loop,b["a"].NONE),this._animationTime=i.animationTime,this._prevAnimationDelta=void 0,this.start=new f["a"],this.update=new f["a"],this.stop=new f["a"],this._state=y["a"].STOPPED,this._computedStartTime=void 0,this._duration=void 0;const n=this;this._raiseStartEvent=function(){n.start.raiseEvent(t,n)},this._updateEventTime=0,this._raiseUpdateEvent=function(){n.update.raiseEvent(t,n,n._updateEventTime)},this._raiseStopEvent=function(){n.stop.raiseEvent(t,n)},this._model=t,this._localStartTime=void 0,this._localStopTime=void 0,R(this)}function R(t){let e=Number.MAX_VALUE,i=-Number.MAX_VALUE;const n=t._model.sceneGraph,o=t._animation,a=o.channels,s=a.length,r=[];for(let c=0;c<s;c++){const o=a[c],s=o.target;if(!Object(u["a"])(s))continue;const l=s.node.index,h=n._runtimeNodes[l],d=new B({channel:o,runtimeAnimation:t,runtimeNode:h}),m=o.sampler.input;e=Math.min(e,m[0]),i=Math.max(i,m[m.length-1]),r.push(d)}t._runtimeChannels=r,t._localStartTime=e,t._localStopTime=i}Object.defineProperties(N.prototype,{animation:{get:function(){return this._animation}},name:{get:function(){return this._name}},runtimeChannels:{get:function(){return this._runtimeChannels}},model:{get:function(){return this._model}},localStartTime:{get:function(){return this._localStartTime}},localStopTime:{get:function(){return this._localStopTime}},startTime:{get:function(){return this._startTime}},delay:{get:function(){return this._delay}},stopTime:{get:function(){return this._stopTime}},multiplier:{get:function(){return this._multiplier}},reverse:{get:function(){return this._reverse}},loop:{get:function(){return this._loop}},animationTime:{get:function(){return this._animationTime}}}),N.prototype.animate=function(t){const e=this._runtimeChannels,i=e.length;for(let n=0;n<i;n++)e[n].animate(t)};var k=N;function F(t){this.animationAdded=new f["a"],this.animationRemoved=new f["a"],this.animateWhilePaused=!1,this._model=t,this._runtimeAnimations=[],this._previousTime=void 0}function G(t,e,i){const n=t._model,o=new k(n,e,i);return t._runtimeAnimations.push(o),t.animationAdded.raiseEvent(n,o),o}Object.defineProperties(F.prototype,{length:{get:function(){return this._runtimeAnimations.length}},model:{get:function(){return this._model}}}),F.prototype.add=function(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT);const e=this._model,i=e.sceneGraph.components.animations;let n=t.index;if(Object(u["a"])(n))return G(this,i[n],t);const o=i.length;for(let a=0;a<o;++a)if(i[a].name===t.name){n=a;break}return G(this,i[n],t)},F.prototype.addAll=function(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT);const e=this._model,i=e.sceneGraph.components.animations,n=[],o=i.length;for(let a=0;a<o;++a){const e=G(this,i[a],t);n.push(e)}return n},F.prototype.remove=function(t){if(!Object(u["a"])(t))return!1;const e=this._runtimeAnimations,i=e.indexOf(t);return-1!==i&&(e.splice(i,1),this.animationRemoved.raiseEvent(this._model,t),!0)},F.prototype.removeAll=function(){const t=this._model,e=this._runtimeAnimations,i=e.length;this._runtimeAnimations.length=0;for(let n=0;n<i;++n)this.animationRemoved.raiseEvent(t,e[n])},F.prototype.contains=function(t){return!!Object(u["a"])(t)&&-1!==this._runtimeAnimations.indexOf(t)},F.prototype.get=function(t){return this._runtimeAnimations[t]};const V=[];function z(t,e,i){return function(){t.animationRemoved.raiseEvent(e,i)}}F.prototype.update=function(t){const e=this._runtimeAnimations;let i=e.length;if(0===i)return this._previousTime=void 0,!1;if(!this.animateWhilePaused&&_["a"].equals(t.time,this._previousTime))return!1;this._previousTime=_["a"].clone(t.time,this._previousTime);let n=!1;const o=t.time,a=this._model;for(let s=0;s<i;++s){const i=e[s];Object(u["a"])(i._computedStartTime)||(i._computedStartTime=_["a"].addSeconds(Object(l["a"])(i.startTime,o),i.delay,new _["a"])),Object(u["a"])(i._duration)||(i._duration=i.localStopTime*(1/i.multiplier));const a=i._computedStartTime,r=i._duration,c=i.stopTime,h=_["a"].lessThanOrEquals(a,o),d=Object(u["a"])(c)&&_["a"].greaterThan(o,c);let m=0;if(0!==r){const t=_["a"].secondsDifference(d?c:o,a);m=Object(u["a"])(i._animationTime)?i._animationTime(r,t):t/r}const p=i.loop===b["a"].REPEAT||i.loop===b["a"].MIRRORED_REPEAT,f=(h||p&&!Object(u["a"])(i.startTime))&&(m<=1||p)&&!d;if(m===i._prevAnimationDelta){const t=i._state===y["a"].STOPPED;if(f!==t)continue}if(i._prevAnimationDelta=m,f||i._state===y["a"].ANIMATING){if(f&&i._state===y["a"].STOPPED&&(i._state=y["a"].ANIMATING,i.start.numberOfListeners>0&&t.afterRender.push(i._raiseStartEvent)),i.loop===b["a"].REPEAT)m-=Math.floor(m);else if(i.loop===b["a"].MIRRORED_REPEAT){const t=Math.floor(m),e=m-t;m=t%2===1?1-e:e}i.reverse&&(m=1-m);let e=m*r*i.multiplier;e=g["a"].clamp(e,i.localStartTime,i.localStopTime),i.animate(e),i.update.numberOfListeners>0&&(i._updateEventTime=e,t.afterRender.push(i._raiseUpdateEvent)),n=!0,f||(i._state=y["a"].STOPPED,i.stop.numberOfListeners>0&&t.afterRender.push(i._raiseStopEvent),i.removeOnStop&&V.push(i))}}i=V.length;for(let s=0;s<i;++s){const i=V[s];e.splice(e.indexOf(i),1),t.afterRender.push(z(this,a,i))}return V.length=0,n};var U=F,W=i("6471"),J=i("0e94"),Y=i("52f0"),H=i("3102"),q=i("df07");const X=g["a"].EPSILON16;function K(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT);const e=t.stage,i=t.runtimeArticulation;this._stage=e,this._runtimeArticulation=i,this._name=e.name,this._type=e.type,this._minimumValue=e.minimumValue,this._maximumValue=e.maximumValue,this._currentValue=e.initialValue}Object.defineProperties(K.prototype,{stage:{get:function(){return this._stage}},runtimeArticulation:{get:function(){return this._runtimeArticulation}},name:{get:function(){return this._name}},type:{get:function(){return this._type}},minimumValue:{get:function(){return this._minimumValue}},maximumValue:{get:function(){return this._maximumValue}},currentValue:{get:function(){return this._currentValue},set:function(t){t=g["a"].clamp(t,this.minimumValue,this.maximumValue),g["a"].equalsEpsilon(this._currentValue,t,X)||(this._currentValue=t,this.runtimeArticulation._dirty=!0)}}});const Q=new o["a"],Z=new q["a"];function $(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT);const e=t.articulation,i=t.sceneGraph;this._articulation=e,this._sceneGraph=i,this._name=e.name,this._runtimeStages=[],this._runtimeStagesByName={},this._runtimeNodes=[],this._dirty=!0,tt(this)}function tt(t){const e=t.articulation,i=e.stages,n=i.length,o=t._runtimeStages,a=t._runtimeStagesByName;for(let s=0;s<n;s++){const e=i[s],n=new K({stage:e,runtimeArticulation:t});o.push(n);const r=e.name;a[r]=n}}K.prototype.applyStageToMatrix=function(t){const e=this.type,i=this.currentValue,n=Q;let o;switch(e){case H["a"].XROTATE:o=q["a"].fromRotationX(g["a"].toRadians(i),Z),t=Y["a"].multiplyByMatrix3(t,o,t);break;case H["a"].YROTATE:o=q["a"].fromRotationY(g["a"].toRadians(i),Z),t=Y["a"].multiplyByMatrix3(t,o,t);break;case H["a"].ZROTATE:o=q["a"].fromRotationZ(g["a"].toRadians(i),Z),t=Y["a"].multiplyByMatrix3(t,o,t);break;case H["a"].XTRANSLATE:n.x=i,n.y=0,n.z=0,t=Y["a"].multiplyByTranslation(t,n,t);break;case H["a"].YTRANSLATE:n.x=0,n.y=i,n.z=0,t=Y["a"].multiplyByTranslation(t,n,t);break;case H["a"].ZTRANSLATE:n.x=0,n.y=0,n.z=i,t=Y["a"].multiplyByTranslation(t,n,t);break;case H["a"].XSCALE:n.x=i,n.y=1,n.z=1,t=Y["a"].multiplyByScale(t,n,t);break;case H["a"].YSCALE:n.x=1,n.y=i,n.z=1,t=Y["a"].multiplyByScale(t,n,t);break;case H["a"].ZSCALE:n.x=1,n.y=1,n.z=i,t=Y["a"].multiplyByScale(t,n,t);break;case H["a"].UNIFORMSCALE:t=Y["a"].multiplyByUniformScale(t,i,t);break;default:break}return t},Object.defineProperties($.prototype,{articulation:{get:function(){return this._articulation}},sceneGraph:{get:function(){return this._sceneGraph}},name:{get:function(){return this._name}},runtimeStages:{get:function(){return this._runtimeStages}},runtimeNodes:{get:function(){return this._runtimeNodes}}}),$.prototype.setArticulationStage=function(t,e){const i=this._runtimeStagesByName[t];Object(u["a"])(i)&&(i.currentValue=e)};const et=new Y["a"],it=new Y["a"];$.prototype.apply=function(){if(!this._dirty)return;this._dirty=!1;let t,e=Y["a"].clone(Y["a"].IDENTITY,et);const i=this._runtimeStages,n=i.length;for(t=0;t<n;t++){const n=i[t];e=n.applyStageToMatrix(e)}const o=this._runtimeNodes,a=o.length;for(t=0;t<a;t++){const i=o[t],n=Y["a"].multiplyTransformation(i.originalTransform,e,it);i.transform=n}};var nt=i("31ef"),ot=i("0cab");function at(t,e){this._model=t,this._runtimeNode=e}Object.defineProperties(at.prototype,{name:{get:function(){return this._runtimeNode._name}},id:{get:function(){return this._runtimeNode._id}},show:{get:function(){return this._runtimeNode.show},set:function(t){this._runtimeNode.show=t}},matrix:{get:function(){return this._runtimeNode.transform},set:function(t){Object(u["a"])(t)?(this._runtimeNode.transform=t,this._runtimeNode.userAnimated=!0,this._model._userAnimationDirty=!0):(this._runtimeNode.transform=this.originalMatrix,this._runtimeNode.userAnimated=!1)}},originalMatrix:{get:function(){return this._runtimeNode.originalTransform}}});var st=i("13b3"),rt=i("5b02"),ct=i("3372"),ut=i("7205");function lt(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT);const e=t.node,i=t.transform,n=t.transformToRoot,o=t.sceneGraph,a=t.children;this._node=e,this._name=e.name,this._id=e.index,this._sceneGraph=o,this._children=a,this._originalTransform=Y["a"].clone(i,this._originalTransform),this._transform=Y["a"].clone(i,this._transform),this._transformToRoot=Y["a"].clone(n,this._transformToRoot),this._computedTransform=new Y["a"],this._transformDirty=!1,this._transformParameters=void 0,this._morphWeights=[],this._runtimeSkin=void 0,this._computedJointMatrices=[],this.show=!0,this.userAnimated=!1,this.pipelineStages=[],this.runtimePrimitives=[],this.updateStages=[],this.instancingTransformsBuffer2D=void 0,this.instancingTranslationBuffer2D=void 0,ht(this)}function ht(t){const e=t.transform,i=t.transformToRoot,n=t._computedTransform;t._computedTransform=Y["a"].multiply(i,e,n);const o=t.node;Object(u["a"])(o.matrix)||(t._transformParameters=new ct["a"](o.translation,o.rotation,o.scale)),Object(u["a"])(o.morphWeights)&&(t._morphWeights=o.morphWeights.slice());const a=o.articulationName;if(Object(u["a"])(a)){const e=t.sceneGraph,i=e._runtimeArticulations,n=i[a];Object(u["a"])(n)&&n.runtimeNodes.push(t)}}function dt(t,e){t._transformDirty=!0,t._transform=Y["a"].fromTranslationRotationScale(e,t._transform)}Object.defineProperties(lt.prototype,{node:{get:function(){return this._node}},sceneGraph:{get:function(){return this._sceneGraph}},children:{get:function(){return this._children}},transform:{get:function(){return this._transform},set:function(t){this._transformDirty=!0,this._transform=Y["a"].clone(t,this._transform)}},transformToRoot:{get:function(){return this._transformToRoot}},computedTransform:{get:function(){return this._computedTransform}},originalTransform:{get:function(){return this._originalTransform}},translation:{get:function(){return Object(u["a"])(this._transformParameters)?this._transformParameters.translation:void 0},set:function(t){const e=this._transformParameters,i=e.translation;o["a"].equals(i,t)||(e.translation=o["a"].clone(t,e.translation),dt(this,e))}},rotation:{get:function(){return Object(u["a"])(this._transformParameters)?this._transformParameters.rotation:void 0},set:function(t){const e=this._transformParameters,i=e.rotation;x["a"].equals(i,t)||(e.rotation=x["a"].clone(t,e.rotation),dt(this,e))}},scale:{get:function(){return Object(u["a"])(this._transformParameters)?this._transformParameters.scale:void 0},set:function(t){const e=this._transformParameters,i=e.scale;o["a"].equals(i,t)||(e.scale=o["a"].clone(t,e.scale),dt(this,e))}},morphWeights:{get:function(){return this._morphWeights},set:function(t){const e=t.length;for(let i=0;i<e;i++)this._morphWeights[i]=t[i]}},runtimeSkin:{get:function(){return this._runtimeSkin}},computedJointMatrices:{get:function(){return this._computedJointMatrices}}}),lt.prototype.getChild=function(t){return this.sceneGraph._runtimeNodes[this.children[t]]},lt.prototype.configurePipeline=function(){const t=this.node,e=this.pipelineStages;e.length=0;const i=this.updateStages;i.length=0,Object(u["a"])(t.instances)&&e.push(st["a"]),e.push(ut["a"]),i.push(rt["a"])},lt.prototype.updateComputedTransform=function(){this._computedTransform=Y["a"].multiply(this._transformToRoot,this._transform,this._computedTransform)},lt.prototype.updateJointMatrices=function(){const t=this._runtimeSkin;if(!Object(u["a"])(t))return;t.updateJointMatrices();const e=this._computedJointMatrices,i=t.jointMatrices,n=i.length;for(let o=0;o<n;o++){Object(u["a"])(e[o])||(e[o]=new Y["a"]);const t=Y["a"].multiplyTransformation(this.transformToRoot,this.transform,e[o]),n=Y["a"].inverseTransformation(t,e[o]);e[o]=Y["a"].multiplyTransformation(n,i[o],e[o])}};var mt=i("1b8d"),pt=i("6f64"),ft=i("5ecf"),_t=i("47f3"),gt=i("366d"),bt=i("d2b3"),yt=i("195b"),Tt=i("2f21"),St=i("026e"),Ot=i("15f5"),Ct=i("244f"),wt=i("c7f8"),Mt=i("60e0"),xt=i("d6b4"),Pt=i("c8d19"),jt=i("dabf"),Lt=i("6942"),Dt=i("2695"),At=i("a307"),Et=i("33ee"),It=i("f23e"),vt=i("794a"),Bt=i("cf22");function Nt(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT);const e=t.primitive,i=t.node,n=t.model;this.primitive=e,this.node=i,this.model=n,this.pipelineStages=[],this.drawCommand=void 0,this.boundingSphere=void 0,this.boundingSphere2D=void 0,this.positionBuffer2D=void 0,this.updateStages=[]}function Rt(t,e,i){let n;return Object(u["a"])(e.instances)&&(n=Mt["a"].getFeatureIdsByLabel(e.instances.featureIds,t.instanceFeatureIdLabel),Object(u["a"])(n))?{hasFeatureIds:!0,hasPropertyTable:Object(u["a"])(n.propertyTableId)}:(n=Mt["a"].getFeatureIdsByLabel(i.featureIds,t.featureIdLabel),Object(u["a"])(n)?{hasFeatureIds:!0,hasPropertyTable:Object(u["a"])(n.propertyTableId)}:{hasFeatureIds:!1,hasPropertyTable:!1})}function kt(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT),this._sceneGraph=t.sceneGraph;const e=t.skin;this._skin=e,this._inverseBindMatrices=void 0,this._joints=[],this._jointMatrices=[],Ft(this)}function Ft(t){const e=t.skin,i=e.inverseBindMatrices;t._inverseBindMatrices=i;const n=e.joints,o=n.length,a=t.sceneGraph._runtimeNodes,s=t.joints,r=t._jointMatrices;for(let c=0;c<o;c++){const t=n[c].index,e=a[t];s.push(e);const o=i[c],u=Gt(e,o,new Y["a"]);r.push(u)}}function Gt(t,e,i){const n=Y["a"].multiplyTransformation(t.transformToRoot,t.transform,i);return i=Y["a"].multiplyTransformation(n,e,i),i}Nt.prototype.configurePipeline=function(t){const e=this.pipelineStages;e.length=0;const i=this.primitive,n=this.node,o=this.model,a=o.customShader,s=o.style,r=t.context.webgl2,c=t.mode,l=c!==At["a"].SCENE3D&&!t.scene3DOnly&&o._projectTo2D,h=Object(u["a"])(i.morphTargets)&&i.morphTargets.length>0,d=Object(u["a"])(n.skin),m=Object(u["a"])(a),p=m&&Object(u["a"])(a.fragmentShaderText),f=!p||a.mode!==_t["a"].REPLACE_MATERIAL,_=Mt["a"].hasQuantizedAttributes(i.attributes),g=o.debugWireframe&&mt["a"].isTriangles(i.primitiveType)&&(o._enableDebugWireframe||r),b=o.pointCloudShading,y=Object(u["a"])(b)&&b.attenuation,T=i.primitiveType===mt["a"].POINTS&&(Object(u["a"])(s)||y),S=o._enableShowOutline&&Object(u["a"])(i.outlineCoordinates),O=Rt(o,n,i);l&&e.push(Et["a"]),e.push(St["a"]),g&&e.push(Bt["a"]),h&&e.push(xt["a"]),d&&e.push(vt["a"]),T&&e.push(jt["a"]),_&&e.push(Tt["a"]),f&&e.push(Ct["a"]),e.push(bt["a"]),e.push(wt["a"]),O.hasPropertyTable&&(e.push(It["a"]),e.push(ft["a"]),e.push(yt["a"])),m&&e.push(gt["a"]),e.push(Ot["a"]),o.allowPicking&&e.push(Pt["a"]),S&&e.push(Lt["a"]),e.push(pt["a"]),e.push(Dt["a"])},Object.defineProperties(kt.prototype,{skin:{get:function(){return this._skin}},sceneGraph:{get:function(){return this._sceneGraph}},inverseBindMatrices:{get:function(){return this._inverseBindMatrices}},joints:{get:function(){return this._joints}},jointMatrices:{get:function(){return this._jointMatrices}}}),kt.prototype.updateJointMatrices=function(){const t=this._jointMatrices,e=t.length;for(let i=0;i<e;i++){const e=this.joints[i],n=this.inverseBindMatrices[i];t[i]=Gt(e,n,t[i])}};var Vt=i("5e25"),zt=i("36ce"),Ut=i("c5e7"),Wt=i("da71"),Jt=i("ae91"),Yt=i("3de6"),Ht=i("f806");function qt(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT);const e=t.modelComponents;this._model=t.model,this._components=e,this._pipelineStages=[],this._updateStages=[],this._runtimeNodes=[],this._rootNodes=[],this._skinnedNodes=[],this._runtimeSkins=[],this.modelPipelineStages=[],this._boundingSphere=void 0,this._boundingSphere2D=void 0,this._computedModelMatrix=Y["a"].clone(Y["a"].IDENTITY),this._computedModelMatrix2D=Y["a"].clone(Y["a"].IDENTITY),this._axisCorrectionMatrix=Mt["a"].getAxisCorrectionMatrix(e.upAxis,e.forwardAxis,new Y["a"]),this._runtimeArticulations={},Xt(this)}function Xt(t){const e=t._components,i=e.scene,n=t._model,o=n.modelMatrix;Kt(t,o);const a=e.articulations,s=a.length,r=t._runtimeArticulations;for(let b=0;b<s;b++){const e=a[b],i=new $({articulation:e,sceneGraph:t}),n=i.name;r[n]=i}const c=e.nodes,u=c.length;t._runtimeNodes=new Array(u);const l=i.nodes,h=l.length,d=Y["a"].IDENTITY;for(let b=0;b<h;b++){const e=i.nodes[b],n=$t(t,e,d);t._rootNodes.push(n)}const m=e.skins,p=t._runtimeSkins,f=m.length;for(let b=0;b<f;b++){const e=m[b];p.push(new kt({skin:e,sceneGraph:t}))}const _=t._skinnedNodes,g=_.length;for(let b=0;b<g;b++){const e=_[b],i=t._runtimeNodes[e],n=c[e].skin,o=n.index;i._runtimeSkin=p[o],i.updateJointMatrices()}t.applyArticulations()}function Kt(t,e){const i=t._components,n=t._model;t._computedModelMatrix=Y["a"].multiplyTransformation(e,i.transform,t._computedModelMatrix),t._computedModelMatrix=Y["a"].multiplyTransformation(t._computedModelMatrix,t._axisCorrectionMatrix,t._computedModelMatrix),t._computedModelMatrix=Y["a"].multiplyByUniformScale(t._computedModelMatrix,n.computedScale,t._computedModelMatrix)}Object.defineProperties(qt.prototype,{components:{get:function(){return this._components}},computedModelMatrix:{get:function(){return this._computedModelMatrix}},axisCorrectionMatrix:{get:function(){return this._axisCorrectionMatrix}},boundingSphere:{get:function(){return this._boundingSphere}}});const Qt=new o["a"];function Zt(t,e){const i=t._computedModelMatrix,a=Y["a"].getTranslation(i,Qt);if(o["a"].equals(a,o["a"].ZERO)){const n=t.boundingSphere.center,o=Ht["a"].wgs84To2DModelMatrix(e.mapProjection,n,t._computedModelMatrix2D);t._computedModelMatrix2D=Y["a"].multiply(o,i,t._computedModelMatrix2D)}else t._computedModelMatrix2D=Ht["a"].basisTo2D(e.mapProjection,i,t._computedModelMatrix2D);t._boundingSphere2D=n["a"].transform(t._boundingSphere,t._computedModelMatrix2D,t._boundingSphere2D)}function $t(t,e,i){const n=[],o=Mt["a"].getNodeTransform(e),a=e.children.length;for(let u=0;u<a;u++){const a=e.children[u],s=Y["a"].multiplyTransformation(i,o,new Y["a"]),r=$t(t,a,s);n.push(r)}const s=new lt({node:e,transform:o,transformToRoot:i,children:n,sceneGraph:t}),r=e.primitives.length;for(let u=0;u<r;u++)s.runtimePrimitives.push(new Nt({primitive:e.primitives[u],node:e,model:t._model}));const c=e.index;t._runtimeNodes[c]=s,Object(u["a"])(e.skin)&&t._skinnedNodes.push(c);const l=e.name;if(Object(u["a"])(l)){const e=t._model,i=new at(e,s);e._nodesByName[l]=i}return c}const te=new o["a"],ee=new o["a"],ie=new o["a"],ne=new o["a"];function oe(t,e,i,n){if(i&&!e.show)return;const o=e.children.length;for(let r=0;r<o;r++){const o=e.getChild(r);oe(t,o,i,n)}const a=e.runtimePrimitives,s=a.length;for(let r=0;r<s;r++){const t=a[r];n(t)}}function ae(t,e,i){const n=t._rootNodes,o=n.length;for(let a=0;a<o;a++){const o=n[a],s=t._runtimeNodes[o];oe(t,s,e,i)}}qt.prototype.buildDrawCommands=function(t){const e=this._model,i=new Vt["a"](e);e.statistics.clear(),this.configurePipeline(t);const a=this.modelPipelineStages;let s,r,c;for(s=0;s<a.length;s++){const n=a[s];n.process(i,e,t)}const u=o["a"].fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,te),l=o["a"].fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,ee);for(s=0;s<this._runtimeNodes.length;s++){const e=this._runtimeNodes[s];e.configurePipeline();const a=e.pipelineStages,h=new Wt["a"](i,e);for(r=0;r<a.length;r++){const i=a[r];i.process(h,e.node,t)}const d=e.computedTransform;for(r=0;r<e.runtimePrimitives.length;r++){const i=e.runtimePrimitives[r];i.configurePipeline(t);const a=i.pipelineStages,s=new Jt["a"](h,i);for(c=0;c<a.length;c++){const e=a[c];e.process(s,i.primitive,t)}i.boundingSphere=n["a"].clone(s.boundingSphere,new n["a"]);const m=Y["a"].multiplyByPoint(d,s.positionMin,ie),p=Y["a"].multiplyByPoint(d,s.positionMax,ne);o["a"].minimumByComponent(u,m,u),o["a"].maximumByComponent(l,p,l);const f=Object(W["a"])(s,t);i.drawCommand=f}}this._boundingSphere=n["a"].fromCornerPoints(u,l,new n["a"]),this._boundingSphere=n["a"].transformWithoutScale(this._boundingSphere,this._axisCorrectionMatrix,this._boundingSphere),e._boundingSphere=n["a"].transform(this._boundingSphere,e.modelMatrix,e._boundingSphere),e._initialRadius=e._boundingSphere.radius,e._boundingSphere.radius*=e._clampedScale},qt.prototype.configurePipeline=function(t){const e=this.modelPipelineStages;e.length=0;const i=this._model;Object(u["a"])(i.color)&&e.push(nt["a"]),i.imageBasedLighting.enabled&&e.push(J["a"]),i.isClippingEnabled()&&e.push(ot["a"]),Object(u["a"])(i.splitDirection)&&i.splitDirection!==Yt["a"].NONE&&e.push(Ut["a"]),i.hasSilhouette(t)&&e.push(zt["a"])},qt.prototype.update=function(t,e){let i,n,o;for(i=0;i<this._runtimeNodes.length;i++){const a=this._runtimeNodes[i];for(n=0;n<a.updateStages.length;n++){const e=a.updateStages[n];e.update(a,this,t)}const s=t.mode!==At["a"].SCENE3D&&this._model._projectTo2D;for(e&&!s&&this.updateJointMatrices(),n=0;n<a.runtimePrimitives.length;n++){const t=a.runtimePrimitives[n];for(o=0;o<t.updateStages.length;o++){const e=t.updateStages[o];e.update(t,this)}}}},qt.prototype.updateModelMatrix=function(t,e){Kt(this,t),e.mode!==At["a"].SCENE3D&&Zt(this,e);const i=this._rootNodes;for(let n=0;n<i.length;n++){const t=this._runtimeNodes[i[n]];t._transformDirty=!0}},qt.prototype.updateJointMatrices=function(){const t=this._skinnedNodes,e=t.length;for(let i=0;i<e;i++){const e=t[i],n=this._runtimeNodes[e];n.updateJointMatrices()}},qt.prototype.updateBackFaceCulling=function(t){ae(this,!1,(function(e){const i=e.drawCommand;i.backFaceCulling=t}))},qt.prototype.updateShadows=function(t){ae(this,!1,(function(e){const i=e.drawCommand;i.shadows=t}))},qt.prototype.updateShowBoundingVolume=function(t){ae(this,!1,(function(e){const i=e.drawCommand;i.debugShowBoundingVolume=t}))},qt.prototype.getDrawCommands=function(t){const e=[],i=[],n=this._model.hasSilhouette(t);return ae(this,!0,(function(o){const a=o.drawCommand,s=a.getCommands(t);if(e.push.apply(e,s),n){const e=a.getSilhouetteCommands(t);i.push.apply(i,e)}})),e.push.apply(e,i),e},qt.prototype.setArticulationStage=function(t,e){const i=t.split(" ");if(2!==i.length)return;const n=i[0],o=i[1],a=this._runtimeArticulations[n];Object(u["a"])(a)&&a.setArticulationStage(o,e)},qt.prototype.applyArticulations=function(){const t=this._runtimeArticulations;for(const e in t)if(t.hasOwnProperty(e)){const i=t[e];i.apply()}};var se=i("933b");function re(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdSet={},this._batchTextureIdMap=new se["a"]}Object.defineProperties(re.prototype,{batchTexturesByteLength:{get:function(){const t=this._batchTextureIdMap.length,e=this._batchTextureIdMap.values;let i=0;for(let n=0;n<t;n++)i+=e[n].byteLength;return i}}}),re.prototype.clear=function(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdSet={},this._batchTextureIdMap.removeAll()},re.prototype.addBuffer=function(t,e){if(!this._bufferIdSet.hasOwnProperty(t._id)){const i=e?2:1;this.geometryByteLength+=t.sizeInBytes*i}this._bufferIdSet[t._id]=!0},re.prototype.addTexture=function(t){this._textureIdSet.hasOwnProperty(t._id)||(this.texturesByteLength+=t.sizeInBytes),this._textureIdSet[t._id]=!0},re.prototype.addBatchTexture=function(t){this._batchTextureIdMap.contains(t._id)||this._batchTextureIdMap.set(t._id,t)};var ce=i("d887"),ue=i("d289"),le=i("d4ed"),he=i("7d62"),de=i("1972"),me=i("7b4a"),pe=i("cb84"),fe=i("cbd5"),_e=i("cbc3"),ge=i("8dff"),be=i("bd8d"),ye=i("283e"),Te=i("0c80"),Se=i("c86b");function Oe(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT),this._loader=t.loader,this._resource=t.resource,this.type=Object(l["a"])(t.type,ce["a"].GLTF),this.modelMatrix=Y["a"].clone(Object(l["a"])(t.modelMatrix,Y["a"].IDENTITY)),this._modelMatrix=Y["a"].clone(this.modelMatrix),this._scale=Object(l["a"])(t.scale,1),this._minimumPixelSize=Object(l["a"])(t.minimumPixelSize,0),this._maximumScale=t.maximumScale,this._clampedScale=Object(u["a"])(this._maximumScale)?Math.min(this._scale,this._maximumScale):this._scale,this._computedScale=this._clampedScale,this._updateModelMatrix=!1,this.referenceMatrix=void 0,this._iblReferenceFrameMatrix=q["a"].clone(q["a"].IDENTITY),this._resourcesLoaded=!1,this._drawCommandsBuilt=!1,this._ready=!1,this._customShader=t.customShader,this._content=t.content,this._texturesLoaded=!1,this._defaultTexture=void 0,this._activeAnimations=new U(this),this._clampAnimations=Object(l["a"])(t.clampAnimations,!0),this._userAnimationDirty=!1,this._id=t.id,this._idDirty=!1;const e=t.color;this._color=Object(u["a"])(e)?be["a"].clone(e):void 0,this._colorBlendMode=Object(l["a"])(t.colorBlendMode,r["a"].HIGHLIGHT),this._colorBlendAmount=Object(l["a"])(t.colorBlendAmount,.5);const i=Object(l["a"])(t.silhouetteColor,be["a"].RED);this._silhouetteColor=be["a"].clone(i),this._silhouetteSize=Object(l["a"])(t.silhouetteSize,0),this._silhouetteDirty=!1,this._silhouetteId=void 0,this._cull=Object(l["a"])(t.cull,!0),this._opaquePass=Object(l["a"])(t.opaquePass,ue["a"].OPAQUE),this._allowPicking=Object(l["a"])(t.allowPicking,!0),this._show=Object(l["a"])(t.show,!0),this._style=void 0;let a=Object(l["a"])(t.featureIdLabel,"featureId_0");"number"===typeof a&&(a="featureId_"+a),this._featureIdLabel=a;let h=Object(l["a"])(t.instanceFeatureIdLabel,"instanceFeatureId_0");"number"===typeof h&&(h="instanceFeatureId_"+h),this._instanceFeatureIdLabel=h,this._featureTables=[],this._featureTableId=void 0,this._featureTableIdDirty=!0,this._pipelineResources=[],this._modelResources=[],this._pickIds=[],this._boundingSphere=new n["a"],this._initialRadius=void 0,this._heightReference=Object(l["a"])(t.heightReference,m["a"].NONE),this._heightDirty=this._heightReference!==m["a"].NONE,this._removeUpdateHeightCallback=void 0,this._clampedModelMatrix=void 0;const d=t.scene;Object(u["a"])(d)&&Object(u["a"])(d.terrainProviderChanged)&&(this._terrainProviderChangedCallback=d.terrainProviderChanged.addEventListener((function(){this._heightDirty=!0}),this)),this._scene=d,this._distanceDisplayCondition=t.distanceDisplayCondition;const f=new me["a"](t.pointCloudShading);this._pointCloudShading=f,this._attenuation=f.attenuation;const _=t.clippingPlanes;Object(u["a"])(_)&&void 0===_.owner?c["a"].setOwner(_,this,"_clippingPlanes"):this._clippingPlanes=_,this._clippingPlanesState=0,this._clippingPlanesMatrix=Y["a"].clone(Y["a"].IDENTITY),this._lightColor=o["a"].clone(t.lightColor),this._imageBasedLighting=Object(u["a"])(t.imageBasedLighting)?t.imageBasedLighting:new p["a"],this._shouldDestroyImageBasedLighting=!Object(u["a"])(t.imageBasedLighting),this._backFaceCulling=Object(l["a"])(t.backFaceCulling,!0),this._backFaceCullingDirty=!1,this._shadows=Object(l["a"])(t.shadows,Se["a"].ENABLED),this._shadowsDirty=!1,this._debugShowBoundingVolumeDirty=!1,this._debugShowBoundingVolume=Object(l["a"])(t.debugShowBoundingVolume,!1),this._enableDebugWireframe=Object(l["a"])(t.enableDebugWireframe,!1),this._enableShowOutline=Object(l["a"])(t.enableShowOutline,!0),this._debugWireframe=Object(l["a"])(t.debugWireframe,!1);let g=t.credit;"string"===typeof g&&(g=new s["a"](g)),this._credit=g,this._resourceCredits=[],this._gltfCredits=[],this._showCreditsOnScreen=Object(l["a"])(t.showCreditsOnScreen,!1),this._showCreditsOnScreenDirty=!0,this._splitDirection=Object(l["a"])(t.splitDirection,Yt["a"].NONE),this._enableShowOutline=Object(l["a"])(t.enableShowOutline,!0),this.showOutline=Object(l["a"])(t.showOutline,!0),this.outlineColor=Object(l["a"])(t.outlineColor,be["a"].BLACK),this._statistics=new re,this._sceneMode=void 0,this._projectTo2D=Object(l["a"])(t.projectTo2D,!1),this._completeLoad=function(t,e){},this._texturesLoadedPromise=void 0,this._readyPromise=xe(this),this._sceneGraph=void 0,this._nodesByName={}}function Ce(t,e){const i=t._featureTables,n=e.propertyTables,o=n.length;for(let a=0;a<o;a++){const e=n[a],o=new de["a"]({model:t,propertyTable:e});i.push(o)}return i}function we(t,e){const i=e._featureIdLabel,n=e._instanceFeatureIdLabel;let o,a,s,r;for(o=0;o<t.nodes.length;o++)if(r=t.nodes[o],Object(u["a"])(r.instances)&&(s=Mt["a"].getFeatureIdsByLabel(r.instances.featureIds,n),Object(u["a"])(s)&&Object(u["a"])(s.propertyTableId)))return s.propertyTableId;for(o=0;o<t.nodes.length;o++)for(r=t.nodes[o],a=0;a<r.primitives.length;a++){const t=r.primitives[a],e=Mt["a"].getFeatureIdsByLabel(t.featureIds,i);if(Object(u["a"])(e))return e.propertyTableId}if(1===e._featureTables.length)return 0}function Me(t,e){if(!Object(u["a"])(t)&&!Object(u["a"])(e))return!1;if(Object(u["a"])(t)!==Object(u["a"])(e))return!0;const i=t.alpha,n=e.alpha;return Math.floor(i)!==Math.floor(n)||Math.ceil(i)!==Math.ceil(n)}function xe(t){const e=t._loader,i=t._resource;e.load();const n=e.promise.then((function(e){if(!Object(u["a"])(e))return;const i=e.components;if(!Object(u["a"])(i)){if(e.isUnloaded())return;throw new ye["a"]("Failed to load model.")}const n=i.structuralMetadata;Object(u["a"])(n)&&n.propertyTableCount>0&&Ce(t,n);const o=new qt({model:t,modelComponents:i});t._sceneGraph=o,t._gltfCredits=o.components.asset.credits;const a=t._resource.credits;if(Object(u["a"])(a)){const e=a.length;for(let i=0;i<e;i++)t._resourceCredits.push(a[i])}t._resourcesLoaded=!0})),o=Object(l["a"])(e.texturesLoadedPromise,Promise.resolve());t._texturesLoadedPromise=o.then((function(){Object(u["a"])(t)&&!t.isDestroyed()&&(t._texturesLoaded=!0,e._incrementallyLoadTextures&&t.resetDrawCommands())})).catch(Mt["a"].getFailedLoadFunction(t,"model",i));const a=new Promise((function(e,i){t._completeLoad=function(t,i){i.afterRender.push((function(){t._ready=!0,e(t)}))}}));return n.then((function(){return a})).catch(Mt["a"].getFailedLoadFunction(t,"model",i))}Object.defineProperties(Oe.prototype,{ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},texturesLoadedPromise:{get:function(){return this._texturesLoadedPromise}},loader:{get:function(){return this._loader}},statistics:{get:function(){return this._statistics}},activeAnimations:{get:function(){return this._activeAnimations}},clampAnimations:{get:function(){return this._clampAnimations},set:function(t){this._clampAnimations=t}},cull:{get:function(){return this._cull}},opaquePass:{get:function(){return this._opaquePass}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(t){t!==this._pointCloudShading&&this.resetDrawCommands(),this._pointCloudShading=t}},customShader:{get:function(){return this._customShader},set:function(t){t!==this._customShader&&this.resetDrawCommands(),this._customShader=t}},sceneGraph:{get:function(){return this._sceneGraph}},content:{get:function(){return this._content}},heightReference:{get:function(){return this._heightReference},set:function(t){t!==this._heightReference&&(this._heightDirty=!0),this._heightReference=t}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(t){this._distanceDisplayCondition=h["a"].clone(t,this._distanceDisplayCondition)}},structuralMetadata:{get:function(){return this._sceneGraph.components.structuralMetadata}},featureTableId:{get:function(){return this._featureTableId},set:function(t){this._featureTableId=t}},featureTables:{get:function(){return this._featureTables},set:function(t){this._featureTables=t}},id:{get:function(){return this._id},set:function(t){t!==this._id&&(this._idDirty=!0),this._id=t}},allowPicking:{get:function(){return this._allowPicking}},style:{get:function(){return this._style},set:function(t){this.applyStyle(t),this._style=t}},color:{get:function(){return this._color},set:function(t){Me(t,this._color)&&this.resetDrawCommands(),this._color=be["a"].clone(t,this._color)}},colorBlendMode:{get:function(){return this._colorBlendMode},set:function(t){this._colorBlendMode=t}},colorBlendAmount:{get:function(){return this._colorBlendAmount},set:function(t){this._colorBlendAmount=t}},silhouetteColor:{get:function(){return this._silhouetteColor},set:function(t){if(!be["a"].equals(t,this._silhouetteColor)){const e=Me(t,this._silhouetteColor);this._silhouetteDirty=this._silhouetteDirty||e}this._silhouetteColor=be["a"].clone(t,this._silhouetteColor)}},silhouetteSize:{get:function(){return this._silhouetteSize},set:function(t){if(t!==this._silhouetteSize){const e=this._silhouetteSize,i=t>0&&0===e||0===t&&e>0;this._silhouetteDirty=this._silhouetteDirty||i,this._backFaceCullingDirty=this._backFaceCullingDirty||i}this._silhouetteSize=t}},boundingSphere:{get:function(){return this._boundingSphere}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(t){this._debugShowBoundingVolume!==t&&(this._debugShowBoundingVolumeDirty=!0),this._debugShowBoundingVolume=t}},debugWireframe:{get:function(){return this._debugWireframe},set:function(t){this._debugWireframe!==t&&this.resetDrawCommands(),this._debugWireframe=t}},show:{get:function(){return this._show},set:function(t){this._show=t}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(t){"number"===typeof t&&(t="featureId_"+t),t!==this._featureIdLabel&&(this._featureTableIdDirty=!0),this._featureIdLabel=t}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(t){"number"===typeof t&&(t="instanceFeatureId_"+t),t!==this._instanceFeatureIdLabel&&(this._featureTableIdDirty=!0),this._instanceFeatureIdLabel=t}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(t){t!==this._clippingPlanes&&(c["a"].setOwner(t,this,"_clippingPlanes"),this.resetDrawCommands())}},lightColor:{get:function(){return this._lightColor},set:function(t){Object(u["a"])(t)!==Object(u["a"])(this._lightColor)&&this.resetDrawCommands(),this._lightColor=o["a"].clone(t,this._lightColor)}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(t){t!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=t,this._shouldDestroyImageBasedLighting=!1,this.resetDrawCommands())}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(t){t!==this._backFaceCulling&&(this._backFaceCullingDirty=!0),this._backFaceCulling=t}},scale:{get:function(){return this._scale},set:function(t){t!==this._scale&&(this._updateModelMatrix=!0),this._scale=t}},computedScale:{get:function(){return this._computedScale}},minimumPixelSize:{get:function(){return this._minimumPixelSize},set:function(t){t!==this._minimumPixelSize&&(this._updateModelMatrix=!0),this._minimumPixelSize=t}},maximumScale:{get:function(){return this._maximumScale},set:function(t){t!==this._maximumScale&&(this._updateModelMatrix=!0),this._maximumScale=t}},shadows:{get:function(){return this._shadows},set:function(t){t!==this._shadows&&(this._shadowsDirty=!0),this._shadows=t}},credit:{get:function(){return this._credit}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(t){this._showCreditsOnScreen!==t&&(this._showCreditsOnScreenDirty=!0),this._showCreditsOnScreen=t}},splitDirection:{get:function(){return this._splitDirection},set:function(t){this._splitDirection!==t&&this.resetDrawCommands(),this._splitDirection=t}},pickIds:{get:function(){return this._pickIds}}}),Oe.prototype.getNode=function(t){return this._nodesByName[t]},Oe.prototype.setArticulationStage=function(t,e){this._sceneGraph.setArticulationStage(t,e)},Oe.prototype.applyArticulations=function(){this._sceneGraph.applyArticulations()},Oe.prototype.resetDrawCommands=function(){this._drawCommandsBuilt=!1};const Pe=new Y["a"],je=new q["a"],Le=new Y["a"];function De(t,e){t._resourcesLoaded&&t._texturesLoaded||t._loader.process(e)}function Ae(t,e){Object(u["a"])(t._customShader)&&t._customShader.update(e)}function Ee(t,e){t._imageBasedLighting.update(e),t._imageBasedLighting.shouldRegenerateShaders&&t.resetDrawCommands()}function Ie(t){t.pointCloudShading.attenuation!==t._attenuation&&(t.resetDrawCommands(),t._attenuation=t.pointCloudShading.attenuation)}function ve(t,e){t._silhouetteDirty&&(ni(e)&&t.resetDrawCommands(),t._silhouetteDirty=!1)}function Be(t,e){if(t.isClippingEnabled()){t._clippingPlanes.owner===t&&t._clippingPlanes.update(e);const i=t._clippingPlanes.clippingPlanesState;i!==t._clippingPlanesState&&(t.resetDrawCommands(),t._clippingPlanesState=i)}}function Ne(t,e){e.mode!==t._sceneMode&&(t._projectTo2D?t.resetDrawCommands():t._updateModelMatrix=!0,t._sceneMode=e.mode)}function Re(t,e){const i=t._featureTables,n=i.length;for(let o=0;o<n;o++)i[o].update(e),i[o].styleCommandsNeededDirty&&t.resetDrawCommands()}function ke(t){if(!t._featureTableIdDirty)return;t._featureTableIdDirty=!1;const e=t._sceneGraph.components,i=e.structuralMetadata;Object(u["a"])(i)&&i.propertyTableCount>0&&(t.featureTableId=we(e,t),t.applyStyle(t._style))}function Fe(t,e){t._drawCommandsBuilt||(t.destroyPipelineResources(),t._sceneGraph.buildDrawCommands(e),t._drawCommandsBuilt=!0)}function Ge(t,e){Y["a"].equals(t.modelMatrix,t._modelMatrix)||(t._updateModelMatrix=!0,t._modelMatrix=Y["a"].clone(t.modelMatrix,t._modelMatrix))}Oe.prototype.update=function(t){if(De(this,t),Ae(this,t),Ee(this,t),!this._resourcesLoaded||t.mode===At["a"].MORPHING)return;Ie(this),ve(this,t),Be(this,t),Ne(this,t),ke(this),Re(this,t),this._defaultTexture=t.context.defaultTexture,Fe(this,t),Ge(this,t),Ue(this),We(this,t),Ye(this,t);const e=this;e._ready?(Je(this),He(this,t),qe(this),Xe(this,t)):e._completeLoad(e,t)};const Ve=new o["a"],ze=new a["a"];function Ue(t){if(!t._updateModelMatrix&&!t._heightDirty&&0===t._minimumPixelSize)return;Object(u["a"])(t._removeUpdateHeightCallback)&&(t._removeUpdateHeightCallback(),t._removeUpdateHeightCallback=void 0);const e=t._scene;if(!Object(u["a"])(e)||!Object(u["a"])(e.globe)||t.heightReference===m["a"].NONE)return void(t._clampedModelMatrix=void 0);const i=e.globe,n=i.ellipsoid,o=t.modelMatrix;Ve.x=o[12],Ve.y=o[13],Ve.z=o[14];const s=n.cartesianToCartographic(Ve);Object(u["a"])(t._clampedModelMatrix)||(t._clampedModelMatrix=Y["a"].clone(o,new Y["a"]));const r=i._surface;t._removeUpdateHeightCallback=r.updateHeight(s,$e(t,n,s));const c=i.getHeight(s);if(Object(u["a"])(c)){const e=$e(t,n,s);a["a"].clone(s,ze),ze.height=c,n.cartographicToCartesian(ze,Ve),e(Ve)}t._heightDirty=!1,t._updateModelMatrix=!0}function We(t,e){if(!t._updateModelMatrix&&0===t._minimumPixelSize)return;const i=Object(u["a"])(t._clampedModelMatrix)?t._clampedModelMatrix:t.modelMatrix;t._clampedScale=Object(u["a"])(t._maximumScale)?Math.min(t._scale,t._maximumScale):t._scale,t._boundingSphere=n["a"].transform(t._sceneGraph.boundingSphere,i,t._boundingSphere),t._boundingSphere.radius=t._initialRadius*t._clampedScale,t._computedScale=Ze(t,i,e)}function Je(t){if(!t._idDirty)return;t._idDirty=!1;const e=t._id,i=t._pickIds,n=i.length;for(let o=0;o<n;++o)i[o].object.id=e}function Ye(t,e){const i=Object(u["a"])(t._clampedModelMatrix)?t._clampedModelMatrix:t.modelMatrix,n=Object(l["a"])(t.referenceMatrix,i),o=e.context,a=t._imageBasedLighting;if(a.useSphericalHarmonicCoefficients||a.useSpecularEnvironmentMaps){let e=je,i=Pe;i=Y["a"].multiply(o.uniformState.view3D,n,i),e=Y["a"].getMatrix3(i,e),e=q["a"].getRotation(e,e),t._iblReferenceFrameMatrix=q["a"].transpose(e,t._iblReferenceFrameMatrix)}if(t.isClippingEnabled()){let e=Le;e=Y["a"].multiply(o.uniformState.view3D,n,e),e=Y["a"].multiply(e,t._clippingPlanes.modelMatrix,e),t._clippingPlanesMatrix=Y["a"].inverseTranspose(e,t._clippingPlanesMatrix)}}function He(t,e){const i=t._sceneGraph;if(t._updateModelMatrix||0!==t._minimumPixelSize){const n=Object(u["a"])(t._clampedModelMatrix)?t._clampedModelMatrix:t.modelMatrix;i.updateModelMatrix(n,e),t._updateModelMatrix=!1}t._backFaceCullingDirty&&(i.updateBackFaceCulling(t._backFaceCulling),t._backFaceCullingDirty=!1),t._shadowsDirty&&(i.updateShadows(t._shadows),t._shadowsDirty=!1),t._debugShowBoundingVolumeDirty&&(i.updateShowBoundingVolume(t._debugShowBoundingVolume),t._debugShowBoundingVolumeDirty=!1);const n=t._userAnimationDirty||t._activeAnimations.update(e);i.update(e,n),t._userAnimationDirty=!1}function qe(t){if(!t._showCreditsOnScreenDirty)return;t._showCreditsOnScreenDirty=!1;const e=t._showCreditsOnScreen;Object(u["a"])(t._credit)&&(t._credit.showOnScreen=e);const i=t._resourceCredits,n=i.length;for(let s=0;s<n;s++)i[s].showOnScreen=e;const o=t._gltfCredits,a=o.length;for(let s=0;s<a;s++)o[s].showOnScreen=e}function Xe(t,e){const i=ei(t,e),n=t.isInvisible(),o=t.hasSilhouette(e),a=t._show&&0!==t._computedScale&&i&&(!n||o);if(a){ii(t,e);const i=t._sceneGraph.getDrawCommands(e);e.commandList.push.apply(e.commandList,i)}}const Ke=new n["a"];function Qe(t,e,i){return Ke.center=t,Ke.radius=e,i.camera.getPixelSize(Ke,i.context.drawingBufferWidth,i.context.drawingBufferHeight)}function Ze(t,e,i){let n=t.scale;if(0!==t.minimumPixelSize&&!t._projectTo2D){const o=i.context,a=Math.max(o.drawingBufferWidth,o.drawingBufferHeight);Ve.x=e[12],Ve.y=e[13],Ve.z=e[14],t._sceneMode!==At["a"].SCENE3D&&Te["a"].computeActualWgs84Position(i,Ve,Ve);const s=t._boundingSphere.radius,r=Qe(Ve,s,i),c=1/r,u=Math.min(c*(2*s),a);u<t.minimumPixelSize&&(n=t.minimumPixelSize*r/(2*t._initialRadius))}return Object(u["a"])(t.maximumScale)?Math.min(t.maximumScale,n):n}function $e(t,e,i){return function(n){if(t.heightReference===m["a"].RELATIVE_TO_GROUND){const t=e.cartesianToCartographic(n,ze);t.height+=i.height,e.cartographicToCartesian(t,n)}const o=t._clampedModelMatrix;Y["a"].clone(t.modelMatrix,o),o[12]=n.x,o[13]=n.y,o[14]=n.z,t._heightDirty=!0}}const ti=new o["a"];function ei(t,e){const i=t.distanceDisplayCondition;if(!Object(u["a"])(i))return!0;const n=i.near*i.near,a=i.far*i.far;let s;if(e.mode===At["a"].SCENE2D){const t=e.camera.frustum.right-e.camera.frustum.left,i=.5*t;s=i*i}else{const i=Y["a"].getTranslation(t.modelMatrix,ti);Te["a"].computeActualWgs84Position(e,i,i),s=o["a"].distanceSquared(i,e.camera.positionWC)}return s>=n&&s<=a}function ii(t,e){const i=e.creditDisplay,n=t._credit;Object(u["a"])(n)&&i.addCredit(n);const o=t._resourceCredits,a=o.length;for(let c=0;c<a;c++)i.addCredit(o[c]);const s=t._gltfCredits,r=s.length;for(let c=0;c<r;c++)i.addCredit(s[c])}function ni(t){return t.context.stencilBuffer}function oi(t,e,i){return{loader:t,type:e,resource:i.resource,show:i.show,modelMatrix:i.modelMatrix,scale:i.scale,minimumPixelSize:i.minimumPixelSize,maximumScale:i.maximumScale,id:i.id,allowPicking:i.allowPicking,clampAnimations:i.clampAnimations,shadows:i.shadows,debugShowBoundingVolume:i.debugShowBoundingVolume,enableDebugWireframe:i.enableDebugWireframe,debugWireframe:i.debugWireframe,cull:i.cull,opaquePass:i.opaquePass,customShader:i.customShader,content:i.content,heightReference:i.heightReference,scene:i.scene,distanceDisplayCondition:i.distanceDisplayCondition,color:i.color,colorBlendAmount:i.colorBlendAmount,colorBlendMode:i.colorBlendMode,silhouetteColor:i.silhouetteColor,silhouetteSize:i.silhouetteSize,enableShowOutline:i.enableShowOutline,showOutline:i.showOutline,outlineColor:i.outlineColor,clippingPlanes:i.clippingPlanes,lightColor:i.lightColor,imageBasedLighting:i.imageBasedLighting,backFaceCulling:i.backFaceCulling,credit:i.credit,showCreditsOnScreen:i.showCreditsOnScreen,splitDirection:i.splitDirection,projectTo2D:i.projectTo2D,featureIdLabel:i.featureIdLabel,instanceFeatureIdLabel:i.instanceFeatureIdLabel,pointCloudShading:i.pointCloudShading}}Oe.prototype.isTranslucent=function(){const t=this.color;return Object(u["a"])(t)&&t.alpha>0&&t.alpha<1},Oe.prototype.isInvisible=function(){const t=this.color;return Object(u["a"])(t)&&0===t.alpha},Oe.prototype.hasSilhouette=function(t){return ni(t)&&this._silhouetteSize>0&&this._silhouetteColor.alpha>0},Oe.prototype.isClippingEnabled=function(){const t=this._clippingPlanes;return Object(u["a"])(t)&&t.enabled&&0!==t.length},Oe.prototype.isDestroyed=function(){return!1},Oe.prototype.destroy=function(){const t=this._loader;Object(u["a"])(t)&&t.destroy();const e=this._featureTables;if(Object(u["a"])(e)){const t=e.length;for(let i=0;i<t;i++)e[i].destroy()}this.destroyPipelineResources(),this.destroyModelResources(),Object(u["a"])(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),Object(u["a"])(this._terrainProviderChangedCallback)&&(this._terrainProviderChangedCallback(),this._terrainProviderChangedCallback=void 0);const i=this._clippingPlanes;Object(u["a"])(i)&&!i.isDestroyed()&&i.owner===this&&i.destroy(),this._clippingPlanes=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,Object(he["a"])(this)},Oe.prototype.destroyPipelineResources=function(){const t=this._pipelineResources;for(let e=0;e<t.length;e++)t[e].destroy();this._pipelineResources.length=0,this._pickIds.length=0},Oe.prototype.destroyModelResources=function(){const t=this._modelResources;for(let e=0;e<t.length;e++)t[e].destroy();this._modelResources.length=0},Oe.fromGltf=function(t){t=Object(l["a"])(t,l["a"].EMPTY_OBJECT);const e=Object(l["a"])(t.url,t.gltf),i={releaseGltfJson:t.releaseGltfJson,asynchronous:t.asynchronous,incrementallyLoadTextures:t.incrementallyLoadTextures,upAxis:t.upAxis,forwardAxis:t.forwardAxis,loadAttributesFor2D:t.projectTo2D,loadIndicesForWireframe:t.enableDebugWireframe,loadPrimitiveOutline:t.enableShowOutline},n=Object(l["a"])(t.basePath,""),o=le["a"].createIfNeeded(n);Object(u["a"])(e.asset)?(i.gltfJson=e,i.baseResource=o,i.gltfResource=o):e instanceof Uint8Array?(i.typedArray=e,i.baseResource=o,i.gltfResource=o):i.gltfResource=le["a"].createIfNeeded(e);const a=new d["a"](i),s=Object(u["a"])(t.content),r=s?ce["a"].TILE_GLTF:ce["a"].GLTF,c=oi(a,r,t);c.resource=i.gltfResource;const h=new Oe(c);return h},Oe.fromB3dm=function(t){const e={b3dmResource:t.resource,arrayBuffer:t.arrayBuffer,byteOffset:t.byteOffset,releaseGltfJson:t.releaseGltfJson,asynchronous:t.asynchronous,incrementallyLoadTextures:t.incrementallyLoadTextures,upAxis:t.upAxis,forwardAxis:t.forwardAxis,loadAttributesFor2D:t.projectTo2D,loadIndicesForWireframe:t.enableDebugWireframe,loadPrimitiveOutline:t.enableShowOutline},i=new pe["a"](e),n=oi(i,ce["a"].TILE_B3DM,t),o=new Oe(n);return o},Oe.fromPnts=function(t){const e={arrayBuffer:t.arrayBuffer,byteOffset:t.byteOffset,loadAttributesFor2D:t.projectTo2D},i=new ge["a"](e),n=oi(i,ce["a"].TILE_PNTS,t),o=new Oe(n);return o},Oe.fromI3dm=function(t){const e={i3dmResource:t.resource,arrayBuffer:t.arrayBuffer,byteOffset:t.byteOffset,releaseGltfJson:t.releaseGltfJson,asynchronous:t.asynchronous,incrementallyLoadTextures:t.incrementallyLoadTextures,upAxis:t.upAxis,forwardAxis:t.forwardAxis,loadAttributesFor2D:t.projectTo2D,loadIndicesForWireframe:t.enableDebugWireframe,loadPrimitiveOutline:t.enableShowOutline},i=new _e["a"](e),n=oi(i,ce["a"].TILE_I3DM,t),o=new Oe(n);return o},Oe.fromGeoJson=function(t){const e={geoJson:t.geoJson},i=new fe["a"](e),n=oi(i,ce["a"].TILE_GEOJSON,t),o=new Oe(n);return o},Oe.prototype.applyColorAndShow=function(t){const e=Object(u["a"])(t)&&Object(u["a"])(t.color),i=Object(u["a"])(t)&&Object(u["a"])(t.show);this._color=e?t.color.evaluateColor(void 0,this._color):be["a"].clone(be["a"].WHITE,this._color),this._show=!i||t.show.evaluate(void 0)},Oe.prototype.applyStyle=function(t){this.resetDrawCommands();const e=this.type===ce["a"].TILE_PNTS,i=Object(u["a"])(this.featureTableId)&&this.featureTables[this.featureTableId].featuresLength>0,n=Object(u["a"])(this.structuralMetadata)?this.structuralMetadata.propertyAttributes:void 0,o=Object(u["a"])(n)&&Object(u["a"])(n[0]);if(!e||i&&!o)if(i){const e=this.featureTables[this.featureTableId];e.applyStyle(t)}else this.applyColorAndShow(t)}},bd39:function(t,e,i){"use strict";var n=i("b7c8"),o=i("cef5"),a=i("93da"),s=i("dc1c"),r=i("535a"),c=i("2f63"),u=i("a894"),l=i("52f0"),h=i("d289"),d=i("6dc0"),m=i("a307"),p=i("c86b"),f=i("9693"),_=i("daa2");function g(t){t=Object(r["a"])(t,r["a"].EMPTY_OBJECT);const e=t.command,i=t.primitiveRenderResources,n=Object(r["a"])(t.useSilhouetteCommands,!1);this._command=e,this._translucentCommand=void 0,this._modelMatrix=l["a"].clone(e.modelMatrix,new l["a"]),this._modelMatrix2DDirty=!1,this._styleCommandsNeeded=i.styleCommandsNeeded,this._backFaceCulling=e.renderState.cull.enabled,this._cullFace=e.renderState.cull.face,this._shadows=i.model.shadows,this._debugShowBoundingVolume=e.debugShowBoundingVolume,this._useSilhouetteCommands=n,this._commandList=[],this._commandList2D=[],this._silhouetteCommandList=[],this._silhouetteCommandList2D=[],this._runtimePrimitive=i.runtimePrimitive,this._model=i.model,b(this)}function b(t){const e=t._command,i=t._styleCommandsNeeded;if(Object(c["a"])(i)&&e.pass!==h["a"].TRANSLUCENT){const n=P(e);switch(i){case f["a"].ALL_OPAQUE:break;case f["a"].ALL_TRANSLUCENT:case f["a"].OPAQUE_AND_TRANSLUCENT:t._translucentCommand=n;break}}y(t)}function y(t){const e=t._commandList,i=t._commandList2D;e.length=0,i.length=0;const n=t._styleCommandsNeeded,o=t._command,a=t._translucentCommand;if(Object(c["a"])(n)&&Object(c["a"])(a))switch(n){case f["a"].ALL_OPAQUE:e.push(o);break;case f["a"].ALL_TRANSLUCENT:e.push(a);break;case f["a"].OPAQUE_AND_TRANSLUCENT:e.push(o,a);break}else e.push(o);if(t._useSilhouetteCommands){const i=e.length,n=[],o=t._model;for(let t=0;t<i;t++){const i=e[t],a=L(i,o),s=D(i,o);e[t]=a,n.push(s)}const a=t._silhouetteCommandList;a.push.apply(a,n)}}Object.defineProperties(g.prototype,{command:{get:function(){return this._command}},runtimePrimitive:{get:function(){return this._runtimePrimitive}},model:{get:function(){return this._model}},primitiveType:{get:function(){return this._command.primitiveType}},modelMatrix:{get:function(){return this._modelMatrix},set:function(t){this._modelMatrix=l["a"].clone(t,this._modelMatrix),this._modelMatrix2DDirty=!0,S(this)}},boundingVolume:{get:function(){return this._command.boundingVolume}},shadows:{get:function(){return this._shadows},set:function(t){this._shadows=t,C(this)}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(t){this._backFaceCulling!==t&&(this._backFaceCulling=t,w(this))}},cullFace:{get:function(){return this._cullFace},set:function(t){this._cullFace!==t&&(this._cullFace=t,M(this))}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(t){this._debugShowBoundingVolume!==t&&(this._debugShowBoundingVolume=t,x(this))}}});const T=new l["a"];function S(t){const e=t.modelMatrix,i=t.runtimePrimitive.boundingSphere,n=t._commandList,a=n.length;for(let r=0;r<a;r++){const t=n[r];t.modelMatrix=l["a"].clone(e,t.modelMatrix),t.boundingVolume=o["a"].transform(i,t.modelMatrix,t.boundingVolume)}if(!t._useSilhouetteCommands)return;const s=t._silhouetteCommandList;for(let r=0;r<a;r++){const t=s[r];t.modelMatrix=l["a"].clone(e,t.modelMatrix),t.boundingVolume=o["a"].transform(i,t.modelMatrix,t.boundingVolume)}}function O(t,e){const i=t.modelMatrix,n=t.runtimePrimitive.boundingSphere,s=t._commandList2D,r=s.length;if(0===r)return;const c=l["a"].clone(i,T);c[13]-=2*a["a"].sign(i[13])*a["a"].PI*e.mapProjection.ellipsoid.maximumRadius;for(let a=0;a<r;a++){const t=s[a];t.modelMatrix=l["a"].clone(c,t.modelMatrix),t.boundingVolume=o["a"].transform(n,t.modelMatrix,t.boundingVolume)}if(!t._useSilhouetteCommands)return;const u=t._silhouetteCommandList2D;for(let a=0;a<r;a++){const t=u[a];t.modelMatrix=l["a"].clone(c,t.modelMatrix),t.boundingVolume=o["a"].transform(n,t.modelMatrix,t.boundingVolume)}}function C(t){const e=t.shadows,i=p["a"].castShadows(e),n=p["a"].receiveShadows(e),o=t.getAllCommands(),a=o.length;for(let s=0;s<a;s++){const t=o[s],e=t.uniformMap.model_silhouettePass;Object(c["a"])(e)&&e()||(t.castShadows=i,t.receiveShadows=n)}}function w(t){let e=t.backFaceCulling;const i=t.runtimePrimitive.primitive.material.doubleSided,n=t._model.isTranslucent(),o=t._useSilhouetteCommands;e=e&&!i&&!n&&!o;const a=t.getAllCommands(),r=a.length;for(let c=0;c<r;c++){const t=a[c];if(t.pass===h["a"].TRANSLUCENT)continue;const i=Object(s["a"])(t.renderState,!0);i.cull.enabled=e,t.renderState=d["a"].fromCache(i)}}function M(t){const e=t.cullFace,i=t.getAllCommands(),n=i.length;for(let o=0;o<n;o++){const t=i[o],n=Object(s["a"])(t.renderState,!0);n.cull.face=e,t.renderState=d["a"].fromCache(n)}}function x(t){const e=t.debugShowBoundingVolume,i=t.getAllCommands(),n=i.length;for(let o=0;o<n;o++){const t=i[o];t.debugShowBoundingVolume=e}}function P(t){const e=u["a"].shallowClone(t);e.pass=h["a"].TRANSLUCENT;const i=Object(s["a"])(t.renderState,!0);return i.cull.enabled=!1,i.depthMask=!1,i.blending=n["a"].ALPHA_BLEND,e.renderState=d["a"].fromCache(i),e}function j(t){const e=u["a"].shallowClone(t);return e.modelMatrix=new l["a"],e.boundingVolume=new o["a"],e}function L(t,e){const i=e._silhouetteId%255,n=u["a"].shallowClone(t);let o=Object(s["a"])(t.renderState,!0);return o.stencilTest={enabled:!0,frontFunction:_["a"].ALWAYS,backFunction:_["a"].ALWAYS,reference:i,mask:-1,frontOperation:{fail:_["a"].KEEP,zFail:_["a"].KEEP,zPass:_["a"].REPLACE},backOperation:{fail:_["a"].KEEP,zFail:_["a"].KEEP,zPass:_["a"].REPLACE}},e.isInvisible()&&(o.colorMask={red:!1,green:!1,blue:!1,alpha:!1},o.depthMask=!1),o=d["a"].fromCache(o),n.renderState=o,n}function D(t,e){const i=e._silhouetteId%255,o=u["a"].shallowClone(t);let a=Object(s["a"])(t.renderState,!0);a.depthTest.enabled=!0,a.cull.enabled=!1;const r=t.pass===h["a"].TRANSLUCENT||e.silhouetteColor.alpha<1;r&&(o.pass=h["a"].TRANSLUCENT,a.depthMask=!1,a.blending=n["a"].ALPHA_BLEND),a.stencilTest={enabled:!0,frontFunction:_["a"].NOTEQUAL,backFunction:_["a"].NOTEQUAL,reference:i,mask:-1,frontOperation:{fail:_["a"].KEEP,zFail:_["a"].KEEP,zPass:_["a"].KEEP},backOperation:{fail:_["a"].KEEP,zFail:_["a"].KEEP,zPass:_["a"].KEEP}},a=d["a"].fromCache(a);const c=Object(s["a"])(t.uniformMap);return c.model_silhouettePass=function(){return!0},o.renderState=a,o.uniformMap=c,o.castShadows=!1,o.receiveShadows=!1,o}function A(t,e){if(e.mode!==m["a"].SCENE2D||t.model._projectTo2D)return!1;const i=e.mapProjection.ellipsoid.maximumRadius*a["a"].PI,n=t.model,o=n.sceneGraph._boundingSphere2D,s=o.center.y-o.radius,r=o.center.y+o.radius;return s<i&&r>i||s<-i&&r>-i}g.prototype.getCommands=function(t){const e=this._commandList,i=this._commandList2D,n=A(this,t);if(n&&0===i.length){const t=e.length;for(let n=0;n<t;n++){const t=j(e[n]);i.push(t)}if(this._useSilhouetteCommands){const e=this._silhouetteCommandList,i=this._silhouetteCommandList2D;for(let n=0;n<t;n++){const t=j(e[n]);i.push(t)}}this._modelMatrix2DDirty=!0}this._modelMatrix2DDirty&&(O(this,t),this._modelMatrix2DDirty=!1);const o=[];return o.push.apply(o,e),n&&o.push.apply(o,i),o},g.prototype.getSilhouetteCommands=function(t){if(!this._useSilhouetteCommands)return[];const e=[],i=this._silhouetteCommandList,n=this._silhouetteCommandList2D;return e.push.apply(e,i),A(this,t)&&e.push.apply(e,n),e},g.prototype.getAllCommands=function(){const t=[];return t.push.apply(t,this._commandList),t.push.apply(t,this._commandList2D),t.push.apply(t,this._silhouetteCommandList),t.push.apply(t,this._silhouetteCommandList2D),t},e["a"]=g},d887:function(t,e,i){"use strict";const n={GLTF:"GLTF",TILE_GLTF:"TILE_GLTF",TILE_B3DM:"B3DM",TILE_I3DM:"I3DM",TILE_PNTS:"PNTS",TILE_GEOJSON:"TILE_GEOJSON",is3DTiles:function(t){switch(t){case n.TILE_GLTF:case n.TILE_B3DM:case n.TILE_I3DM:case n.TILE_PNTS:case n.TILE_GEOJSON:return!0;case n.GLTF:return!1}}};e["a"]=Object.freeze(n)}}]);