(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~c8a7a074"],{"1f48":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("93da"),s=(i("4f04"),i("bdbb")),r=i("5157");function o(e){this.subdivisionScheme=e.subdivisionScheme,this.subtreeLevels=e.subtreeLevels,this.level=e.level,this.x=e.x,this.y=e.y,this.z=void 0,e.subdivisionScheme===r["a"].OCTREE&&(this.z=e.z)}Object.defineProperties(o.prototype,{childIndex:{get:function(){let e=0;return e|=1&this.x,e|=(1&this.y)<<1,this.subdivisionScheme===r["a"].OCTREE&&(e|=(1&this.z)<<2),e}},mortonIndex:{get:function(){return this.subdivisionScheme===r["a"].OCTREE?s["a"].encode3D(this.x,this.y,this.z):s["a"].encode2D(this.x,this.y)}},tileIndex:{get:function(){const e=this.subdivisionScheme===r["a"].OCTREE?((1<<3*this.level)-1)/7:((1<<2*this.level)-1)/3,t=this.mortonIndex;return e+t}}}),o.prototype.getDescendantCoordinates=function(e){const t=this.level+e.level,i=(this.x<<e.level)+e.x,n=(this.y<<e.level)+e.y;if(this.subdivisionScheme===r["a"].OCTREE){const s=(this.z<<e.level)+e.z;return new o({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:n,z:s})}return new o({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:n})},o.prototype.getAncestorCoordinates=function(e){const t=1<<e,i=this.level-e,n=Math.floor(this.x/t),s=Math.floor(this.y/t);if(this.subdivisionScheme===r["a"].OCTREE){const e=Math.floor(this.z/t);return new o({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:i,x:n,y:s,z:e})}return new o({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:i,x:n,y:s})},o.prototype.getOffsetCoordinates=function(e){const t=e.level-this.level,i=1<<t,n=e.x%i,s=e.y%i;if(this.subdivisionScheme===r["a"].OCTREE){const r=e.z%i;return new o({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:s,z:r})}return new o({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:n,y:s})},o.prototype.getChildCoordinates=function(e){const t=this.level+1,i=2*this.x+e%2,n=2*this.y+Math.floor(e/2)%2;if(this.subdivisionScheme===r["a"].OCTREE){const s=2*this.z+Math.floor(e/4)%2;return new o({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:n,z:s})}return new o({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:n})},o.prototype.getSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels)},o.prototype.getParentSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels+this.subtreeLevels)},o.prototype.isAncestor=function(e){const t=e.level-this.level;if(t<=0)return!1;const i=e.x>>t,n=e.y>>t,s=this.x===i,o=this.y===n;if(this.subdivisionScheme===r["a"].OCTREE){const i=e.z>>t,n=this.z===i;return s&&o&&n}return s&&o},o.prototype.isEqual=function(e){return this.subdivisionScheme===e.subdivisionScheme&&this.subtreeLevels===e.subtreeLevels&&this.level===e.level&&this.x===e.x&&this.y===e.y&&(this.subdivisionScheme!==r["a"].OCTREE||this.z===e.z)},o.prototype.isImplicitTilesetRoot=function(){return 0===this.level},o.prototype.isSubtreeRoot=function(){return this.level%this.subtreeLevels===0},o.prototype.isBottomOfSubtree=function(){return this.level%this.subtreeLevels===this.subtreeLevels-1},o.prototype.getTemplateValues=function(){const e={level:this.level,x:this.x,y:this.y};return this.subdivisionScheme===r["a"].OCTREE&&(e.z=this.z),e};const a=[0,0,0];o.fromMortonIndex=function(e,t,i,n){let c;return e===r["a"].OCTREE?(c=s["a"].decode3D(n,a),new o({subdivisionScheme:e,subtreeLevels:t,level:i,x:c[0],y:c[1],z:c[2]})):(c=s["a"].decode2D(n,a),new o({subdivisionScheme:e,subtreeLevels:t,level:i,x:c[0],y:c[1]}))},o.fromTileIndex=function(e,t,i){let s,a,c;return e===r["a"].OCTREE?(s=Math.floor(n["a"].log2(7*i+1)/3),a=((1<<3*s)-1)/7,c=i-a):(s=Math.floor(n["a"].log2(3*i+1)/2),a=((1<<2*s)-1)/3,c=i-a),o.fromMortonIndex(e,t,s,c)}},4436:function(e,t,i){"use strict";var n=i("2f63"),s=i("ddf7"),r=i("568a");function o(e){this._total=e,this.usedThisFrame=0,this.stolenFromMeThisFrame=0,this.starvedThisFrame=!1,this.starvedLastFrame=!1}function a(e){const t=new Array(r["a"].NUMBER_OF_JOB_TYPES);t[r["a"].TEXTURE]=new o(Object(n["a"])(e)?e[r["a"].TEXTURE]:10),t[r["a"].PROGRAM]=new o(Object(n["a"])(e)?e[r["a"].PROGRAM]:10),t[r["a"].BUFFER]=new o(Object(n["a"])(e)?e[r["a"].BUFFER]:30);const i=t.length;let s,a=0;for(s=0;s<i;++s)a+=t[s].total;const c=new Array(i);for(s=0;s<i;++s)c[s]=!1;this._totalBudget=a,this._totalUsedThisFrame=0,this._budgets=t,this._executedThisFrame=c}Object.defineProperties(o.prototype,{total:{get:function(){return this._total}}}),a.getTimestamp=s["a"],Object.defineProperties(a.prototype,{totalBudget:{get:function(){return this._totalBudget}}}),a.prototype.disableThisFrame=function(){this._totalUsedThisFrame=this._totalBudget},a.prototype.resetBudgets=function(){const e=this._budgets,t=e.length;for(let i=0;i<t;++i){const t=e[i];t.starvedLastFrame=t.starvedThisFrame,t.starvedThisFrame=!1,t.usedThisFrame=0,t.stolenFromMeThisFrame=0}this._totalUsedThisFrame=0},a.prototype.execute=function(e,t){const i=this._budgets,n=i[t],s=this._executedThisFrame[t];if(this._totalUsedThisFrame>=this._totalBudget&&s)return n.starvedThisFrame=!0,!1;let r;if(n.usedThisFrame+n.stolenFromMeThisFrame>=n.total){const e=i.length;let t;for(t=0;t<e;++t)if(r=i[t],r.usedThisFrame+r.stolenFromMeThisFrame<r.total&&!r.starvedLastFrame)break;if(t===e&&s)return!1;s&&(n.starvedThisFrame=!0)}const o=a.getTimestamp();e.execute();const c=a.getTimestamp()-o;return this._totalUsedThisFrame+=c,r?r.stolenFromMeThisFrame+=c:n.usedThisFrame+=c,this._executedThisFrame[t]=!0,!0},t["a"]=a},"490e":function(e,t,i){"use strict";var n=i("c8d1"),s=i("be18"),r=i("bd8d"),o=i("abab"),a=i("2f63"),c=i("45c5"),l=i("7d62"),u=i("c52f"),h=i("129b"),d=i("df07"),f=i("52f0"),b=i("0260"),m=i("b82e"),p=i("283e"),_=i("f806"),g=i("3372"),y=i("d289"),v=i("6596"),T=i("5af0"),O=i("9889"),C=i("ce94"),S=i("1e38"),E=i("8a9e");function A(e,t,i,n,s){this._tileset=e,this._tile=t,this._resource=i,this._modelInstanceCollection=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,L(this,n,s)}function P(e){return function(){return e._batchTable.getPickId()}}A._deprecationWarning=c["a"],Object.defineProperties(A.prototype,{featuresLength:{get:function(){return this._batchTable.featuresLength}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){const e=this._modelInstanceCollection._model;return Object(a["a"])(e)?e.trianglesLength:0}},geometryByteLength:{get:function(){const e=this._modelInstanceCollection._model;return Object(a["a"])(e)?e.geometryByteLength:0}},texturesByteLength:{get:function(){const e=this._modelInstanceCollection._model;return Object(a["a"])(e)?e.texturesByteLength:0}},batchTableByteLength:{get:function(){return this._batchTable.batchTableByteLength}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._modelInstanceCollection.readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const I=new Array(4),x=new Array(4);function L(e,t,i){const r=C["a"].parse(t,i),c=r.gltfFormat,l=r.gltf,T=r.featureTableJson,A=r.featureTableBinary,L=r.batchTableJson,j=r.batchTableBinary,w=new O["a"](T,A),F=w.getGlobalProperty("INSTANCES_LENGTH");if(w.featuresLength=F,!Object(a["a"])(F))throw new p["a"]("Feature table global property: INSTANCES_LENGTH must be defined");e._batchTable=new v["a"](e,F,L,j);const R=e._tileset,D={instances:new Array(F),batchTable:e._batchTable,cull:!1,url:void 0,requestType:m["a"].TILES3D,gltf:void 0,basePath:void 0,incrementallyLoadTextures:!1,upAxis:R._modelUpAxis,forwardAxis:R._modelForwardAxis,opaquePass:y["a"].CESIUM_3D_TILE,pickIdLoaded:P(e),imageBasedLighting:R.imageBasedLighting,backFaceCulling:R.backFaceCulling,showOutline:R.showOutline,showCreditsOnScreen:R.showCreditsOnScreen};if(0===c){let t=Object(h["a"])(l);t=t.replace(/[\s\0]+$/,""),D.url=e._resource.getDerivedResource({url:t})}else D.gltf=l,D.basePath=e._resource.clone();const M=w.getGlobalProperty("EAST_NORTH_UP");let B;const N=w.getGlobalProperty("RTC_CENTER",o["a"].FLOAT,3);Object(a["a"])(N)&&(B=s["a"].unpack(N));const U=D.instances,H=new s["a"],V=new Array(3),z=new s["a"],J=new s["a"],k=new s["a"],G=new d["a"],Q=new b["a"];let W=new s["a"];const K=new g["a"],q=new f["a"];for(let h=0;h<F;h++){let e=w.getProperty("POSITION",o["a"].FLOAT,3,h,I);if(!Object(a["a"])(e)){e=V;const t=w.getProperty("POSITION_QUANTIZED",o["a"].UNSIGNED_SHORT,3,h,I);if(!Object(a["a"])(t))throw new p["a"]("Either POSITION or POSITION_QUANTIZED must be defined for each instance.");const i=w.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",o["a"].FLOAT,3);if(!Object(a["a"])(i))throw new p["a"]("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");const n=w.getGlobalProperty("QUANTIZED_VOLUME_SCALE",o["a"].FLOAT,3);if(!Object(a["a"])(n))throw new p["a"]("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(let s=0;s<3;s++)e[s]=t[s]/65535*n[s]+i[s]}s["a"].unpack(e,0,H),Object(a["a"])(B)&&s["a"].add(H,B,H),K.translation=H;const t=w.getProperty("NORMAL_UP",o["a"].FLOAT,3,h,I),i=w.getProperty("NORMAL_RIGHT",o["a"].FLOAT,3,h,x);let r=!1;if(Object(a["a"])(t)){if(!Object(a["a"])(i))throw new p["a"]("To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.");s["a"].unpack(t,0,J),s["a"].unpack(i,0,z),r=!0}else{const e=w.getProperty("NORMAL_UP_OCT32P",o["a"].UNSIGNED_SHORT,2,h,I),t=w.getProperty("NORMAL_RIGHT_OCT32P",o["a"].UNSIGNED_SHORT,2,h,x);if(Object(a["a"])(e)){if(!Object(a["a"])(t))throw new p["a"]("To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.");n["a"].octDecodeInRange(e[0],e[1],65535,J),n["a"].octDecodeInRange(t[0],t[1],65535,z),r=!0}else M?(_["a"].eastNorthUpToFixedFrame(H,u["a"].WGS84,q),f["a"].getMatrix3(q,G)):d["a"].clone(d["a"].IDENTITY,G)}r&&(s["a"].cross(z,J,k),s["a"].normalize(k,k),d["a"].setColumn(G,0,z,G),d["a"].setColumn(G,1,J,G),d["a"].setColumn(G,2,k,G)),b["a"].fromRotationMatrix(G,Q),K.rotation=Q,W=s["a"].fromElements(1,1,1,W);const c=w.getProperty("SCALE",o["a"].FLOAT,1,h);Object(a["a"])(c)&&s["a"].multiplyByScalar(W,c,W);const l=w.getProperty("SCALE_NON_UNIFORM",o["a"].FLOAT,3,h,I);Object(a["a"])(l)&&(W.x*=l[0],W.y*=l[1],W.z*=l[2]),K.scale=W;let m=w.getProperty("BATCH_ID",o["a"].UNSIGNED_SHORT,1,h);Object(a["a"])(m)||(m=h),f["a"].fromTranslationRotationScale(K,q);const g=q.clone();U[h]={modelMatrix:g,batchId:m}}e._modelInstanceCollection=new S["a"](D),e._modelInstanceCollection.readyPromise.catch((function(){})).then((function(t){e._modelInstanceCollection.ready&&t.activeAnimations.addAll({loop:E["a"].REPEAT})}))}function j(e){const t=e.featuresLength;if(!Object(a["a"])(e._features)&&t>0){const i=new Array(t);for(let n=0;n<t;++n)i[n]=new T["a"](e,n);e._features=i}}A.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},A.prototype.getFeature=function(e){this.featuresLength;return j(this),this._features[e]},A.prototype.applyDebugSettings=function(e,t){t=e?t:r["a"].WHITE,this._batchTable.setAllColor(t)},A.prototype.applyStyle=function(e){this._batchTable.applyStyle(e)},A.prototype.update=function(e,t){const i=t.commandList.length;this._batchTable.update(e,t),this._modelInstanceCollection.modelMatrix=this._tile.computedTransform,this._modelInstanceCollection.shadows=this._tileset.shadows,this._modelInstanceCollection.lightColor=this._tileset.lightColor,this._modelInstanceCollection.imageBasedLighting=this._tileset.imageBasedLighting,this._modelInstanceCollection.backFaceCulling=this._tileset.backFaceCulling,this._modelInstanceCollection.debugWireframe=this._tileset.debugWireframe,this._modelInstanceCollection.showCreditsOnScreen=this._tileset.showCreditsOnScreen,this._modelInstanceCollection.splitDirection=this._tileset.splitDirection;const n=this._modelInstanceCollection._model;if(Object(a["a"])(n)){const e=this._tileset.clippingPlanes;n.referenceMatrix=this._tileset.clippingPlanesOriginMatrix,Object(a["a"])(e)&&this._tile.clippingPlanesDirty&&(n._clippingPlanes=e.enabled&&this._tile._isClipped?e:void 0),Object(a["a"])(e)&&Object(a["a"])(n._clippingPlanes)&&n._clippingPlanes!==e&&(n._clippingPlanes=e)}this._modelInstanceCollection.update(t);const s=t.commandList.length;i<s&&(t.passes.render||t.passes.pick)&&this._batchTable.addDerivedCommands(t,i,!1)},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){return this._modelInstanceCollection=this._modelInstanceCollection&&this._modelInstanceCollection.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),Object(l["a"])(this)},t["a"]=A},"4ad5":function(e,t,i){"use strict";var n=i("535a"),s=i("2f63"),r=i("21d7"),o=i("b195"),a=i("283e"),c=i("5856"),l=i("c078"),u=i("ed98"),h=i("324a"),d=i("ec56"),f=i("b85d"),b=i("e288"),m=i("dda8"),p=i("f915");function _(e){return function(t){return new e(t)}}const g={ARCGIS_MAPSERVER:_(c["a"]),BING:_(l["a"]),GOOGLE_EARTH:_(h["a"]),MAPBOX:_(d["a"]),SINGLE_TILE:_(f["a"]),TMS:_(u["a"]),URL_TEMPLATE:_(b["a"]),WMS:_(m["a"]),WMTS:_(p["a"])};function y(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);const t=e.assetId;this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._ready=!1,this._tileCredits=void 0,this._errorEvent=new r["a"];const i=this,c=o["a"]._createEndpointResource(t,e),l=e.assetId.toString()+e.accessToken+e.server;let h=y._endpointCache[l];Object(s["a"])(h)||(h=c.fetchJson(),y._endpointCache[l]=h),this._readyPromise=h.then((function(e){if("IMAGERY"!==e.type)return Promise.reject(new a["a"](`Cesium ion asset ${t} is not an imagery asset.`));let n;const r=e.externalType;if(Object(s["a"])(r)){const t=g[r];if(!Object(s["a"])(t))return Promise.reject(new a["a"]("Unrecognized Cesium ion imagery type: "+r));n=t(e.options)}else n=new u["a"]({url:new o["a"](e,c)});return i._tileCredits=o["a"].getCreditsFromEndpoint(e,c),n.errorEvent.addEventListener((function(e){e.provider=i,i._errorEvent.raiseEvent(e)})),i._imageryProvider=n,n.readyPromise.then((function(){return i._ready=!0,!0}))}))}Object.defineProperties(y.prototype,{ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel},proxy:{get:function(){}}}}),y.prototype.getTileCredits=function(e,t,i){const n=this._imageryProvider.getTileCredits(e,t,i);return Object(s["a"])(n)?this._tileCredits.concat(n):this._tileCredits},y.prototype.requestImage=function(e,t,i,n){return this._imageryProvider.requestImage(e,t,i,n)},y.prototype.pickFeatures=function(e,t,i,n,s){return this._imageryProvider.pickFeatures(e,t,i,n,s)},y._endpointCache={},t["a"]=y},5157:function(e,t,i){"use strict";const n={QUADTREE:"QUADTREE",OCTREE:"OCTREE",getBranchingFactor:function(e){switch(e){case n.OCTREE:return 8;case n.QUADTREE:return 4}}};t["a"]=Object.freeze(n)},"568a":function(e,t,i){"use strict";const n={TEXTURE:0,PROGRAM:1,BUFFER:2,NUMBER_OF_JOB_TYPES:3};t["a"]=Object.freeze(n)},"990a":function(e,t,i){"use strict";const n={TRANSLATION:"TRANSLATION",ROTATION:"ROTATION",SCALE:"SCALE",FEATURE_ID:"_FEATURE_ID",fromGltfSemantic:function(e){let t=e;const i=/^(\w+)_\d+$/,s=i.exec(e);switch(null!==s&&(t=s[1]),t){case"TRANSLATION":return n.TRANSLATION;case"ROTATION":return n.ROTATION;case"SCALE":return n.SCALE;case"_FEATURE_ID":return n.FEATURE_ID}}};t["a"]=Object.freeze(n)},af1e:function(e,t,i){"use strict";const n={AERIAL:2,AERIAL_WITH_LABELS:3,ROAD:4};t["a"]=Object.freeze(n)},c3ff:function(e,t,i){"use strict";i.d(t,"a",(function(){return W}));var n=i("be18"),s=i("dc1c"),r=i("2bb9"),o=i("535a"),a=i("2f63"),c=i("7d62"),l=i("93da"),u=i("ccff"),h=i("df07"),d=i("eace"),f=i("e994"),b=i("e856"),m=i("283e"),p=i("55d8");function _(e){const t=e.lengthBits;let i=e.availableCount;const n=e.constant,s=e.bitstream;if(Object(a["a"])(n))i=t;else{const n=Math.ceil(t/8);if(s.length!==n)throw new m["a"](`Availability bitstream must be exactly ${n} bytes long to store ${t} bits. Actual bitstream was ${s.length} bytes long.`);const r=Object(o["a"])(e.computeAvailableCountEnabled,!1);!Object(a["a"])(i)&&r&&(i=g(s,t))}this._lengthBits=t,this._availableCount=i,this._constant=n,this._bitstream=s}function g(e,t){let i=0;for(let n=0;n<t;n++){const t=n>>3,s=n%8;i+=e[t]>>s&1}return i}function y(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.metadataTable,i=e.class,n=e.entityId,s=e.propertyTableJson;this._class=i,this._metadataTable=t,this._entityId=n,this._extensions=s.extensions,this._extras=s.extras}Object.defineProperties(_.prototype,{lengthBits:{get:function(){return this._lengthBits}},availableCount:{get:function(){return this._availableCount}}}),_.prototype.getBit=function(e){if(Object(a["a"])(this._constant))return this._constant;const t=e>>3,i=e%8;return 1===(this._bitstream[t]>>i&1)},Object.defineProperties(y.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),y.prototype.hasProperty=function(e){return this._metadataTable.hasProperty(e)},y.prototype.hasPropertyBySemantic=function(e){return this._metadataTable.hasPropertyBySemantic(e)},y.prototype.getPropertyIds=function(e){return this._metadataTable.getPropertyIds(e)},y.prototype.getProperty=function(e){return this._metadataTable.getProperty(this._entityId,e)},y.prototype.setProperty=function(e,t){return this._metadataTable.setProperty(this._entityId,e,t)},y.prototype.getPropertyBySemantic=function(e){return this._metadataTable.getPropertyBySemantic(this._entityId,e)},y.prototype.setPropertyBySemantic=function(e,t){return this._metadataTable.setPropertyBySemantic(this._entityId,e,t)};var v=i("5157"),T=i("72b0");function O(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT);const t=e.subtreeMetadata,i=e.class,n=Object(a["a"])(t.properties)?t.properties:{};this._class=i,this._properties=n,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(O.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),O.prototype.hasProperty=function(e){return T["a"].hasProperty(e,this._properties,this._class)},O.prototype.hasPropertyBySemantic=function(e){return T["a"].hasPropertyBySemantic(e,this._properties,this._class)},O.prototype.getPropertyIds=function(e){return T["a"].getPropertyIds(this._properties,this._class,e)},O.prototype.getProperty=function(e){return T["a"].getProperty(e,this._properties,this._class)},O.prototype.setProperty=function(e,t){return T["a"].setProperty(e,t,this._properties,this._class)},O.prototype.getPropertyBySemantic=function(e){return T["a"].getPropertyBySemantic(e,this._properties,this._class)},O.prototype.setPropertyBySemantic=function(e,t){return T["a"].setPropertyBySemantic(e,t,this._properties,this._class)};var C=O,S=i("3899"),E=i("17a9");function A(e,t,i,n,s){this._resource=e,this._subtreeJson=void 0,this._bufferLoader=void 0,this._tileAvailability=void 0,this._contentAvailabilityBitstreams=[],this._childSubtreeAvailability=void 0,this._implicitCoordinates=s,this._subtreeLevels=n.subtreeLevels,this._subdivisionScheme=n.subdivisionScheme,this._branchingFactor=n.branchingFactor,this._metadata=void 0,this._tileMetadataTable=void 0,this._tilePropertyTableJson=void 0,this._contentMetadataTables=[],this._contentPropertyTableJsons=[],this._tileJumpBuffer=void 0,this._contentJumpBuffers=[],this._readyPromise=P(this,t,i,n)}function P(e,t,i,n){let s;s=Object(a["a"])(t)?{json:t,binary:void 0}:I(i);const r=s.json;let c;if(e._subtreeJson=r,Object(p["a"])(r,"3DTILES_metadata"))c=r.extensions["3DTILES_metadata"];else if(Object(a["a"])(r.tileMetadata)){const e=r.tileMetadata;c=r.propertyTables[e]}const l=[];if(Object(a["a"])(r.contentMetadata)){const e=r.contentMetadata.length;for(let t=0;t<e;t++){const e=r.contentMetadata[t];l.push(r.propertyTables[e])}}let u;const h=n.metadataSchema,d=r.subtreeMetadata;if(Object(a["a"])(d)){const e=d.class,t=h.classes[e];u=new C({subtreeMetadata:d,class:t})}e._metadata=u,e._tilePropertyTableJson=c,e._contentPropertyTableJsons=l;const f={constant:0};r.contentAvailabilityHeaders=[],Object(p["a"])(r,"3DTILES_multiple_contents")?r.contentAvailabilityHeaders=r.extensions["3DTILES_multiple_contents"].contentAvailability:Array.isArray(r.contentAvailability)?r.contentAvailabilityHeaders=r.contentAvailability:r.contentAvailabilityHeaders.push(Object(o["a"])(r.contentAvailability,f));const b=x(r.buffers),m=L(r.bufferViews,b);j(r,m),Object(a["a"])(c)&&w(c,m);for(let o=0;o<l.length;o++){const e=l[o];w(e,m)}return F(e,b,s.binary).then((function(t){const i=D(m,t);return M(e,r,n,i),Object(a["a"])(c)&&(N(e,n,i),V(e)),U(e,n,i),z(e),e}))}function I(e){const t=!0,i=new DataView(e.buffer,e.byteOffset);let n=8;const s=i.getUint32(n,t);n+=8;const r=i.getUint32(n,t);n+=8;const o=Object(b["a"])(e,n,s);n+=s;const a=e.subarray(n,n+r);return{json:o,binary:a}}function x(e){e=Object(a["a"])(e)?e:[];for(let t=0;t<e.length;t++){const i=e[t];i.isExternal=Object(a["a"])(i.uri),i.isActive=!1}return e}function L(e,t){e=Object(a["a"])(e)?e:[];for(let i=0;i<e.length;i++){const n=e[i],s=t[n.buffer];n.bufferHeader=s,n.isActive=!1}return e}function j(e,t){let i;const n=e.tileAvailability;Object(a["a"])(n.bitstream)?i=t[n.bitstream]:Object(a["a"])(n.bufferView)&&(i=t[n.bufferView]),Object(a["a"])(i)&&(i.isActive=!0,i.bufferHeader.isActive=!0);const s=e.contentAvailabilityHeaders;for(let o=0;o<s.length;o++)i=void 0,Object(a["a"])(s[o].bitstream)?i=t[s[o].bitstream]:Object(a["a"])(s[o].bufferView)&&(i=t[s[o].bufferView]),Object(a["a"])(i)&&(i.isActive=!0,i.bufferHeader.isActive=!0);i=void 0;const r=e.childSubtreeAvailability;Object(a["a"])(r.bitstream)?i=t[r.bitstream]:Object(a["a"])(r.bufferView)&&(i=t[r.bufferView]),Object(a["a"])(i)&&(i.isActive=!0,i.bufferHeader.isActive=!0)}function w(e,t){const i=e.properties;let n;for(const s in i)if(i.hasOwnProperty(s)){const e=i[s],r=Object(o["a"])(e.values,e.bufferView);n=t[r],n.isActive=!0,n.bufferHeader.isActive=!0;const c=Object(o["a"])(e.stringOffsets,e.stringOffsetBufferView);Object(a["a"])(c)&&(n=t[c],n.isActive=!0,n.bufferHeader.isActive=!0);const l=Object(o["a"])(e.arrayOffsets,e.arrayOffsetBufferView);Object(a["a"])(l)&&(n=t[l],n.isActive=!0,n.bufferHeader.isActive=!0)}}function F(e,t,i){const n=[];for(let s=0;s<t.length;s++){const r=t[s];if(r.isActive)if(r.isExternal){const t=R(e,r);n.push(t)}else n.push(Promise.resolve(i));else n.push(Promise.resolve(void 0))}return Promise.all(n).then((function(e){const t={};for(let i=0;i<e.length;i++){const n=e[i];Object(a["a"])(n)&&(t[i]=n)}return t}))}function R(e,t){const i=e._resource,n=i.getDerivedResource({url:t.uri}),s=E["a"].loadExternalBuffer({resource:n});return e._bufferLoader=s,s.promise.then((function(e){return e.typedArray}))}function D(e,t){const i={};for(let n=0;n<e.length;n++){const s=e[n];if(!s.isActive)continue;const r=s.byteOffset,o=r+s.byteLength,a=t[s.buffer],c=a.subarray(r,o);i[n]=c}return i}function M(e,t,i,n){const s=i.branchingFactor,r=i.subtreeLevels,o=(Math.pow(s,r)-1)/(s-1),c=Math.pow(s,r),l=Object(p["a"])(t,"3DTILES_metadata"),u=Object(a["a"])(e._tilePropertyTableJson);let h=l||u;e._tileAvailability=B(t.tileAvailability,n,o,h);const d=e._contentPropertyTableJsons.length>0;h=h||d;for(let a=0;a<t.contentAvailabilityHeaders.length;a++){const i=B(t.contentAvailabilityHeaders[a],n,o,h);e._contentAvailabilityBitstreams.push(i)}e._childSubtreeAvailability=B(t.childSubtreeAvailability,n,c)}function B(e,t,i,n){if(Object(a["a"])(e.constant))return new _({constant:Boolean(e.constant),lengthBits:i,availableCount:e.availableCount});let s;return Object(a["a"])(e.bitstream)?s=t[e.bitstream]:Object(a["a"])(e.bufferView)&&(s=t[e.bufferView]),new _({bitstream:s,lengthBits:i,availableCount:e.availableCount,computeAvailableCountEnabled:n})}function N(e,t,i){const n=e._tilePropertyTableJson,s=e._tileAvailability.availableCount,r=t.metadataSchema,o=n.class,a=r.classes[o];e._tileMetadataTable=new S["a"]({class:a,count:s,properties:n.properties,bufferViews:i})}function U(e,t,i){const n=e._contentPropertyTableJsons,s=e._contentAvailabilityBitstreams,r=t.metadataSchema,o=e._contentMetadataTables;for(let a=0;a<n.length;a++){const e=n[a],t=s[a],c=t.availableCount,l=e.class,u=r.classes[l],h=new S["a"]({class:u,count:c,properties:e.properties,bufferViews:i});o.push(h)}}function H(e){let t=0;const i=e.lengthBits,n=e.availableCount;let s;s=n<256?new Uint8Array(i):n<65536?new Uint16Array(i):new Uint32Array(i);for(let r=0;r<e.lengthBits;r++)e.getBit(r)&&(s[r]=t,t++);return s}function V(e){const t=H(e._tileAvailability);e._tileJumpBuffer=t}function z(e){const t=e._contentJumpBuffers,i=e._contentAvailabilityBitstreams;for(let n=0;n<i.length;n++){const e=i[n],s=H(e);t.push(s)}}function J(e,t){if(!Object(a["a"])(e._tileMetadataTable))return;const i=e.getTileIndex(t);return e._tileAvailability.getBit(i)?e._tileJumpBuffer[i]:void 0}function k(e,t,i){const n=e._contentMetadataTables;if(!Object(a["a"])(n))return;const s=n[i];if(!Object(a["a"])(s))return;const r=e._contentAvailabilityBitstreams[i],o=e.getTileIndex(t);if(r.getBit(o)){const t=e._contentJumpBuffers[i];return t[o]}}Object.defineProperties(A.prototype,{readyPromise:{get:function(){return this._readyPromise}},metadata:{get:function(){return this._metadata}},tileMetadataTable:{get:function(){return this._tileMetadataTable}},tilePropertyTableJson:{get:function(){return this._tilePropertyTableJson}},contentMetadataTables:{get:function(){return this._contentMetadataTables}},contentPropertyTableJsons:{get:function(){return this._contentPropertyTableJsons}},implicitCoordinates:{get:function(){return this._implicitCoordinates}}}),A.prototype.tileIsAvailableAtIndex=function(e){return this._tileAvailability.getBit(e)},A.prototype.tileIsAvailableAtCoordinates=function(e){const t=this.getTileIndex(e);return this.tileIsAvailableAtIndex(t)},A.prototype.contentIsAvailableAtIndex=function(e,t){return t=Object(o["a"])(t,0),this._contentAvailabilityBitstreams[t].getBit(e)},A.prototype.contentIsAvailableAtCoordinates=function(e,t){const i=this.getTileIndex(e);return this.contentIsAvailableAtIndex(i,t)},A.prototype.childSubtreeIsAvailableAtIndex=function(e){return this._childSubtreeAvailability.getBit(e)},A.prototype.childSubtreeIsAvailableAtCoordinates=function(e){const t=this.getChildSubtreeIndex(e);return this.childSubtreeIsAvailableAtIndex(t)},A.prototype.getLevelOffset=function(e){const t=this._branchingFactor;return(Math.pow(t,e)-1)/(t-1)},A.prototype.getParentMortonIndex=function(e){let t=2;return this._subdivisionScheme===v["a"].OCTREE&&(t=3),e>>t},A.prototype.getTileIndex=function(e){const t=e.level-this._implicitCoordinates.level;if(t<0||this._subtreeLevels<=t)throw new m["a"]("level is out of bounds for this subtree");const i=e.getSubtreeCoordinates(),n=i.getOffsetCoordinates(e),s=n.tileIndex;return s},A.prototype.getChildSubtreeIndex=function(e){const t=e.level-this._implicitCoordinates.level;if(t!==this._implicitCoordinates.subtreeLevels)throw new m["a"]("level is out of bounds for this subtree");const i=e.getParentSubtreeCoordinates(),n=i.getOffsetCoordinates(e),s=n.mortonIndex;return s},A.prototype.getTileMetadataView=function(e){const t=J(this,e);if(!Object(a["a"])(t))return;const i=this._tileMetadataTable;return new y({class:i.class,metadataTable:i,entityId:t,propertyTableJson:this._tilePropertyTableJson})},A.prototype.getContentMetadataView=function(e,t){const i=k(this,e,t);if(!Object(a["a"])(i))return;const n=this._contentMetadataTables[t],s=this._contentPropertyTableJsons[t];return new y({class:n.class,metadataTable:n,entityId:i,contentIndex:t,propertyTableJson:s})},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){return Object(a["a"])(this._bufferLoader)&&E["a"].unload(this._bufferLoader),Object(c["a"])(this)};var G=i("3f8c"),Q=i("518d");function W(e,t,i,n,s,r){const o=t.implicitTileset,a=t.implicitCoordinates;this._implicitTileset=o,this._implicitCoordinates=a,this._implicitSubtree=void 0,this._tileset=e,this._tile=t,this._resource=i,this._metadata=void 0,this.featurePropertiesDirty=!1,this._group=void 0;const c=a.getTemplateValues(),l=o.subtreeUriTemplate.getDerivedResource({templateValues:c});this._url=l.getUrlComponent(!0),this._readyPromise=K(this,n,s,r)}function K(e,t,i,n){let s;n=Object(o["a"])(n,0),Object(a["a"])(i)&&(s=new Uint8Array(i,n));const r=new A(e._resource,t,s,e._implicitTileset,e._implicitCoordinates);return e._implicitSubtree=r,r.readyPromise.then((function(){return q(e,r),e}))}function q(e,t){const i=e._tile,n=e._implicitCoordinates.childIndex,s=X(e,t,i,n),r=e._tileset.statistics;i.children.push(s.rootTile),r.numberOfTilesTotal++;const o=Y(e,t,s.bottomRow);for(let a=0;a<o.length;a++){const t=o[a],i=t.tile,n=me(e,i,t.childIndex);i.children.push(n),r.numberOfTilesTotal++}}function Y(e,t,i){const n=[],s=e._implicitTileset.branchingFactor;for(let r=0;r<i.length;r++){const e=i[r];if(Object(a["a"])(e))for(let i=0;i<s;i++){const o=r*s+i;t.childSubtreeIsAvailableAtIndex(o)&&n.push({tile:e,childIndex:i})}}return n}function X(e,t,i,n){const s=0,r=!0,o=$(e,t,i,n,s,r),a=e._tileset.statistics;let c=[o],l=[];const u=e._implicitTileset;for(let h=1;h<u.subtreeLevels;h++){const i=t.getLevelOffset(h),n=u.branchingFactor*c.length;for(let s=0;s<n;s++){const n=i+s;if(!t.tileIsAvailableAtIndex(n)){l.push(void 0);continue}const r=t.getParentMortonIndex(s),o=c[r],h=s%u.branchingFactor,d=$(e,t,o,h,n);o.children.push(d),a.numberOfTilesTotal++,l.push(d)}c=l,l=[]}return{rootTile:o,bottomRow:c}}function Z(e,t,i){const n=G["a"].TILE_GEOMETRIC_ERROR;return Object(a["a"])(e)&&e.hasPropertyBySemantic(n)?e.getPropertyBySemantic(n):t.geometricError/Math.pow(2,i.level)}function $(e,t,i,n,c,l){const u=e._implicitTileset;let h,d,f,b;if(h=Object(o["a"])(l,!1)?i.implicitCoordinates:i.implicitCoordinates.getChildCoordinates(n),Object(a["a"])(t.tilePropertyTableJson)){d=t.getTileMetadataView(h);const e=Object(Q["a"])(d);f=e.tile,b=e.content}const m=t.contentPropertyTableJsons,p=m.length;let _=!1;for(let s=0;s<p;s++)if(t.contentIsAvailableAtCoordinates(h,s)){_=!0;break}const g=se(u,h,n,l,i,f),y=[];for(let s=0;s<u.contentCount;s++){if(!t.contentIsAvailableAtIndex(c,s))continue;const e=u.contentUriTemplates[s],i=e.getDerivedResource({templateValues:h.getTemplateValues()}).url,n={uri:i},o=re(g,b);Object(a["a"])(o)&&(n.boundingVolume=o),y.push(Object(r["a"])(n,u.contentHeaders[s]))}const v=Z(d,u,h),T={boundingVolume:g,geometricError:v,refine:u.refine,contents:y},O=!0,C=Object(s["a"])(u.tileHeader,O);delete C.boundingVolume,delete C.transform;const S=Object(r["a"])(T,C,O),E=pe(e,u.baseResource,S,i);return E.implicitCoordinates=h,E.implicitSubtree=t,E.metadata=d,E.hasImplicitContentMetadata=_,E}function ee(e,t){return Object(a["a"])(e)&&Object(a["a"])(t)&&(Object(a["a"])(t.minimumHeight)||Object(a["a"])(t.maximumHeight))&&(Object(p["a"])(e,"3DTILES_bounding_volume_S2")||Object(a["a"])(e.region))}function te(e,t){Object(a["a"])(t)&&(Object(p["a"])(e,"3DTILES_bounding_volume_S2")?ne(e.extensions["3DTILES_bounding_volume_S2"],t.minimumHeight,t.maximumHeight):Object(a["a"])(e.region)&&ie(e.region,t.minimumHeight,t.maximumHeight))}function ie(e,t,i){Object(a["a"])(t)&&(e[4]=t),Object(a["a"])(i)&&(e[5]=i)}function ne(e,t,i){Object(a["a"])(t)&&(e.minimumHeight=t),Object(a["a"])(i)&&(e.maximumHeight=i)}function se(e,t,i,n,s,r){let c;return c=!Object(a["a"])(r)||!Object(a["a"])(r.boundingVolume)||!ee(r.boundingVolume,r)&&ee(e.boundingVolume,r)?oe(e,t,i,Object(o["a"])(n,!1),s):r.boundingVolume,te(c,r),c}function re(e,t){let i;return Object(a["a"])(t)&&(i=t.boundingVolume),ee(i,t)?te(i,t):ee(e,t)&&(i=Object(s["a"])(e,!0),te(i,t)),i}function oe(e,t,i,n,s){const r=e.boundingVolume;if(Object(p["a"])(r,"3DTILES_bounding_volume_S2"))return ae(n,s,i,t.level,t.x,t.y,t.z);if(Object(a["a"])(r.region)){const e=be(r.region,t.level,t.x,t.y,t.z);return{region:e}}const o=de(r.box,t.level,t.x,t.y,t.z);return{box:o}}function ae(e,t,i,n,s,r,o){const c=t._boundingVolume;if(e)return{extensions:{"3DTILES_bounding_volume_S2":{token:f["a"].getTokenFromId(c.s2Cell._cellId),minimumHeight:c.minimumHeight,maximumHeight:c.maximumHeight}}};const l=Number(t._boundingVolume.s2Cell._cellId>>BigInt(61)),h=l%2===0?u["a"].encode2D(n,s,r):u["a"].encode2D(n,r,s),d=f["a"].fromFacePositionLevel(l,BigInt(h),n);let b,m;if(Object(a["a"])(o)){const e=(c.maximumHeight+c.minimumHeight)/2;b=i<4?c.minimumHeight:e,m=i<4?e:c.maximumHeight}else b=c.minimumHeight,m=c.maximumHeight;return{extensions:{"3DTILES_bounding_volume_S2":{token:f["a"].getTokenFromId(d._cellId),minimumHeight:b,maximumHeight:m}}}}Object.defineProperties(W.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._url}},metadata:{get:function(){},set:function(){}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const ce=new n["a"],le=new n["a"],ue=new n["a"],he=new h["a"];function de(e,t,i,s,r){if(0===t)return e;const o=n["a"].unpack(e,0,le),c=h["a"].unpack(e,3,he),l=Math.pow(2,-t),u=(2*i+1)*l-1,d=(2*s+1)*l-1;let f=0;const b=n["a"].fromElements(l,l,1,ce);Object(a["a"])(r)&&(f=(2*r+1)*l-1,b.z=l);let m=n["a"].fromElements(u,d,f,ue);m=h["a"].multiplyByVector(c,m,ue),m=n["a"].add(m,o,ue);let p=h["a"].clone(c);p=h["a"].multiplyByScale(p,b,p);const _=new Array(12);return n["a"].pack(m,_),h["a"].pack(p,_,3),_}const fe=new d["a"];function be(e,t,i,n,s){if(0===t)return e.slice();const r=d["a"].unpack(e,0,fe),o=e[4],c=e[5],u=Math.pow(2,-t),h=u*r.width,f=l["a"].negativePiToPi(r.west+i*h),b=l["a"].negativePiToPi(f+h),m=u*r.height,p=l["a"].negativePiToPi(r.south+n*m),_=l["a"].negativePiToPi(p+m);let g=o,y=c;if(Object(a["a"])(s)){const e=u*(c-o);g+=s*e,y=g+e}return[f,p,b,_,g,y]}function me(e,t,i){const n=e._implicitTileset,s=t.implicitCoordinates.getChildCoordinates(i),r=oe(n,s,i,!1,t),o=Z(void 0,n,s),a=n.subtreeUriTemplate.getDerivedResource({templateValues:s.getTemplateValues()}).url,c={boundingVolume:r,geometricError:o,refine:n.refine,contents:[{uri:a}]},l=pe(e,n.baseResource,c,t);return l.implicitTileset=n,l.implicitCoordinates=s,l}function pe(e,t,i,n){const s=e._tile.constructor;return new s(e._tileset,t,i,n)}W.prototype.hasProperty=function(e,t){return!1},W.prototype.getFeature=function(e){},W.prototype.applyDebugSettings=function(e,t){},W.prototype.applyStyle=function(e){},W.prototype.update=function(e,t){},W.prototype.isDestroyed=function(){return!1},W.prototype.destroy=function(){return this._implicitSubtree=this._implicitSubtree&&this._implicitSubtree.destroy(),Object(c["a"])(this)},W._deriveBoundingBox=de,W._deriveBoundingRegion=be,W._deriveBoundingVolumeS2=ae},d57b:function(e,t,i){"use strict";var n=i("bd8d"),s=i("2f63"),r=i("7d62"),o=i("e42d"),a=i("f845"),c=i("f630"),l=i("6ef5"),u=i("8a65"),h=i("3550"),d=i("6dc0"),f=i("5770"),b=i("a913"),m=i("3720"),p=i("b7c8"),_=i("3626"),g=i("6102"),y=i("25ef");function v(){this._numSamples=1,this.previousFramebuffer=void 0,this._previousFramebuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this._fbo=new c["a"]({depthStencil:!0,createDepthAttachments:!1}),this._fboClassified=new c["a"]({depthStencil:!0,createDepthAttachments:!1}),this._rsUnclassified=void 0,this._rsClassified=void 0,this._unclassifiedCommand=void 0,this._classifiedCommand=void 0,this._translucentCommand=void 0,this._clearColorCommand=new a["a"]({color:new n["a"](0,0,0,0),owner:this}),this._clearCommand=new a["a"]({color:new n["a"](0,0,0,0),depth:1,stencil:0});const e=this;this._uniformMap={colorTexture:function(){return e._fbo.getColorTexture()},depthTexture:function(){return e._depthStencilTexture},classifiedTexture:function(){return e._fboClassified.getColorTexture()}}}Object.defineProperties(v.prototype,{unclassifiedCommand:{get:function(){return this._unclassifiedCommand}}}),v.isTranslucencySupported=function(e){return e.depthTexture&&e.fragmentDepth};const T={depthMask:!1,stencilTest:{enabled:!0,frontFunction:g["a"].EQUAL,frontOperation:{fail:y["a"].KEEP,zFail:y["a"].KEEP,zPass:y["a"].KEEP},backFunction:g["a"].NEVER,reference:0,mask:_["a"].CLASSIFICATION_MASK},blending:p["a"].ALPHA_BLEND},O={depthMask:!1,stencilTest:{enabled:!0,frontFunction:g["a"].NOT_EQUAL,frontOperation:{fail:y["a"].KEEP,zFail:y["a"].KEEP,zPass:y["a"].KEEP},backFunction:g["a"].NEVER,reference:0,mask:_["a"].CLASSIFICATION_MASK},blending:p["a"].ALPHA_BLEND},C={depthMask:!0,depthTest:{enabled:!0},stencilTest:_["a"].setCesium3DTileBit(),stencilMask:_["a"].CESIUM_3D_TILE_MASK,blending:p["a"].ALPHA_BLEND},S="#extension GL_EXT_frag_depth : enable\nuniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nuniform sampler2D classifiedTexture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n    bool isClassified = all(equal(texture2D(classifiedTexture, v_textureCoordinates), vec4(0.0)));\n#ifdef UNCLASSIFIED\n    vec4 highlightColor = czm_invertClassificationColor;\n    if (isClassified)\n    {\n        discard;\n    }\n#else\n    vec4 highlightColor = vec4(1.0);\n    if (!isClassified)\n    {\n        discard;\n    }\n#endif\n    gl_FragColor = color * highlightColor;\n    gl_FragDepthEXT = texture2D(depthTexture, v_textureCoordinates).r;\n}\n",E="uniform sampler2D colorTexture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n#ifdef UNCLASSIFIED\n    gl_FragColor = color * czm_invertClassificationColor;\n#else\n    gl_FragColor = color;\n#endif\n}\n";v.prototype.update=function(e,t,i){const n=this._fbo.getColorTexture(),r=this.previousFramebuffer!==this._previousFramebuffer;this._previousFramebuffer=this.previousFramebuffer;const a=this._numSamples!==t,c=e.drawingBufferWidth,p=e.drawingBufferHeight,_=!Object(s["a"])(n)||n.width!==c||n.height!==p;if((_||r||a)&&(this._numSamples=t,this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),Object(s["a"])(this._previousFramebuffer)||(this._depthStencilTexture=new b["a"]({context:e,width:c,height:p,pixelFormat:o["a"].DEPTH_STENCIL,pixelDatatype:l["a"].UNSIGNED_INT_24_8}),t>1&&(this._depthStencilRenderbuffer=new u["a"]({context:e,width:c,height:p,format:h["a"].DEPTH24_STENCIL8,numSamples:t})))),!Object(s["a"])(this._fbo.framebuffer)||_||r||a){let n,r;this._fbo.destroy(),this._fboClassified.destroy(),Object(s["a"])(this._previousFramebuffer)?(n=i.getDepthStencilTexture(),r=i.getDepthStencilRenderbuffer()):(n=this._depthStencilTexture,r=this._depthStencilRenderbuffer),this._fbo.setDepthStencilTexture(n),Object(s["a"])(r)&&this._fbo.setDepthStencilRenderbuffer(r),this._fbo.update(e,c,p,t),Object(s["a"])(this._previousFramebuffer)||(this._fboClassified.setDepthStencilTexture(n),this._fboClassified.update(e,c,p))}if(Object(s["a"])(this._rsUnclassified)||(this._rsUnclassified=d["a"].fromCache(T),this._rsClassified=d["a"].fromCache(O),this._rsDefault=d["a"].fromCache(C)),!Object(s["a"])(this._unclassifiedCommand)||r||a){Object(s["a"])(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy());const t=Object(s["a"])(this._previousFramebuffer)?E:S,i=new f["a"]({defines:["UNCLASSIFIED"],sources:[t]}),n=new f["a"]({sources:[t]});this._unclassifiedCommand=e.createViewportQuadCommand(i,{renderState:Object(s["a"])(this._previousFramebuffer)?this._rsUnclassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),this._classifiedCommand=e.createViewportQuadCommand(n,{renderState:Object(s["a"])(this._previousFramebuffer)?this._rsClassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),Object(s["a"])(this._translucentCommand)&&(this._translucentCommand.shaderProgram=this._translucentCommand.shaderProgram&&this._translucentCommand.shaderProgram.destroy()),Object(s["a"])(this._previousFramebuffer)||(this._translucentCommand=e.createViewportQuadCommand(m["a"],{renderState:this._rsUnclassified,uniformMap:this._uniformMap,owner:this}))}},v.prototype.prepareTextures=function(e,t){this._fbo._numSamples>1&&this._fbo.prepareTextures(e,t)},v.prototype.clear=function(e,t){Object(s["a"])(this._previousFramebuffer)?this._fbo.clear(e,this._clearColorCommand,t):(this._fbo.clear(e,this._clearCommand,t),this._fboClassified.clear(e,this._clearCommand,t))},v.prototype.executeClassified=function(e,t){if(!Object(s["a"])(this._previousFramebuffer)){const i=t.framebuffer;this.prepareTextures(e,!0),t.framebuffer=this._fboClassified.framebuffer,this._translucentCommand.execute(e,t),t.framebuffer=i}this._classifiedCommand.execute(e,t)},v.prototype.executeUnclassified=function(e,t){this._unclassifiedCommand.execute(e,t)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return this._fbo.destroy(),this._fboClassified.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),Object(s["a"])(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy()),Object(r["a"])(this)},t["a"]=v},edfc:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("dc1c"),s=i("2f63"),r=i("d4ed"),o=i("283e"),a=i("55d8"),c=i("5157");function l(e,t,i){const l=Object(a["a"])(t,"3DTILES_implicit_tiling")?t.extensions["3DTILES_implicit_tiling"]:t.implicitTiling;this.baseResource=e,this.geometricError=t.geometricError,this.metadataSchema=i;const d=t.boundingVolume;if(!Object(s["a"])(d.box)&&!Object(s["a"])(d.region)&&!Object(a["a"])(d,"3DTILES_bounding_volume_S2"))throw new o["a"]("Only box, region and 3DTILES_bounding_volume_S2 are supported for implicit tiling");this.boundingVolume=d,this.refine=t.refine,this.subtreeUriTemplate=new r["a"]({url:l.subtrees.uri}),this.contentUriTemplates=[],this.contentHeaders=[];const f=u(t);for(let s=0;s<f.length;s++){const e=f[s];this.contentHeaders.push(Object(n["a"])(e,!0));const t=new r["a"]({url:e.uri});this.contentUriTemplates.push(t)}this.contentCount=this.contentHeaders.length,this.tileHeader=h(t),this.subdivisionScheme=c["a"][l.subdivisionScheme],this.branchingFactor=c["a"].getBranchingFactor(this.subdivisionScheme),this.subtreeLevels=l.subtreeLevels,Object(s["a"])(l.availableLevels)?this.availableLevels=l.availableLevels:this.availableLevels=l.maximumLevel+1}function u(e){if(Object(a["a"])(e,"3DTILES_multiple_contents")){const t=e.extensions["3DTILES_multiple_contents"];return Object(s["a"])(t.contents)?t.contents:t.content}return Object(s["a"])(e.contents)?e.contents:Object(s["a"])(e.content)?[e.content]:[]}function h(e){const t=Object(n["a"])(e,!0);return Object(s["a"])(t.extensions)&&(delete t.extensions["3DTILES_implicit_tiling"],delete t.extensions["3DTILES_multiple_contents"],0===Object.keys(t.extensions).length&&delete t.extensions),delete t.implicitTiling,delete t.contents,delete t.content,t}}}]);