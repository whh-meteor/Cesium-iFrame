(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~1acf902e"],{"06f0":function(e,t,a){"use strict";var n=a("daa2");const r={NEVER:n["a"].NEVER,LESS:n["a"].LESS,EQUAL:n["a"].EQUAL,LESS_OR_EQUAL:n["a"].LEQUAL,GREATER:n["a"].GREATER,NOT_EQUAL:n["a"].NOTEQUAL,GREATER_OR_EQUAL:n["a"].GEQUAL,ALWAYS:n["a"].ALWAYS};t["a"]=Object.freeze(r)},"08b8":function(e,t,a){"use strict";var n=a("abab"),r=a("2f63"),i=a("5e57"),o=a("6a29"),s=a("9937");function u(){}function c(e,t){const a="runtime."+Object.keys(e.createdBufferViews).length,n=e.buffers,r=Object.keys(n).length;return n[r]=t,e.createdBufferViews[a]={buffer:r,byteOffset:0,byteLength:t.byteLength},a}function l(e,t,a){const n=t._loadResources,r=c(n,e);return n.vertexBuffersToCreate.enqueue(r),r}function f(e,t,a){const r=e.typedArray,i=t._loadResources,o=c(i,r);return i.indexBuffersToCreate.enqueue({id:o,componentType:n["a"].fromTypedArray(r)}),{bufferViewId:o,numberOfIndices:e.numberOfIndices}}function h(e,t,a,n){if(!u._taskProcessorReady)return;const i=a.primitivesToDecode.peek();if(!Object(r["a"])(i))return;const o=e.scheduleTask(i,[i.array.buffer]);return Object(r["a"])(o)?(a.activeDecodingTasks++,a.primitivesToDecode.dequeue(),o.then((function(e){a.activeDecodingTasks--;const r=f(e.indexArray,t,n),o={},s=e.attributeData;for(const a in s)if(s.hasOwnProperty(a)){const e=s[a],r=e.array,i=l(r,t,n),u=e.data;u.bufferView=i,o[a]=u}t._decodedData[`${i.mesh}.primitive.${i.primitive}`]={bufferView:r.bufferViewId,numberOfIndices:r.numberOfIndices,attributes:o}}))):void 0}u._maxDecodingConcurrency=Math.max(i["a"].hardwareConcurrency-1,1),u._decoderTaskProcessor=void 0,u._taskProcessorReady=!1,u._getDecoderTaskProcessor=function(){if(!Object(r["a"])(u._decoderTaskProcessor)){const e=new o["a"]("decodeDraco",u._maxDecodingConcurrency);e.initWebAssemblyModule({modulePath:"ThirdParty/Workers/draco_decoder_nodejs.js",wasmBinaryFile:"ThirdParty/draco_decoder.wasm"}).then((function(){u._taskProcessorReady=!0})),u._decoderTaskProcessor=e}return u._decoderTaskProcessor},u.hasExtension=function(e){return Object(r["a"])(e.extensionsRequired.KHR_draco_mesh_compression)||Object(r["a"])(e.extensionsUsed.KHR_draco_mesh_compression)},u._decodedModelResourceCache=void 0,u.parse=function(e,t){if(!u.hasExtension(e))return;const a=e._loadResources,n=e.cacheKey;if(Object(r["a"])(n)){Object(r["a"])(u._decodedModelResourceCache)||(Object(r["a"])(t.cache.modelDecodingCache)||(t.cache.modelDecodingCache={}),u._decodedModelResourceCache=t.cache.modelDecodingCache);const e=u._decodedModelResourceCache[n];if(Object(r["a"])(e))return e.count++,void(a.pendingDecodingCache=!0)}const i=e._dequantizeInShader,o=e.gltfInternal;s["a"].mesh(o,(function(e,t){s["a"].meshPrimitive(e,(function(e,n){if(!Object(r["a"])(e.extensions))return;const s=e.extensions.KHR_draco_mesh_compression;if(!Object(r["a"])(s))return;const u=o.bufferViews[s.bufferView],c=o.buffers[u.buffer].extras._pipeline.source,l=c.slice(u.byteOffset,u.byteOffset+u.byteLength);a.primitivesToDecode.enqueue({mesh:t,primitive:n,array:l,bufferView:u,compressedAttributes:s.attributes,dequantizeInShader:i})}))}))},u.decodeModel=function(e,t){if(!u.hasExtension(e))return Promise.resolve();const a=e._loadResources,n=e.cacheKey;if(Object(r["a"])(n)&&Object(r["a"])(u._decodedModelResourceCache)){const t=u._decodedModelResourceCache[n];if(Object(r["a"])(t)&&a.pendingDecodingCache)return Promise.resolve(t.ready).then((function(){e._decodedData=t.data,a.pendingDecodingCache=!1}));u._decodedModelResourceCache[n]={ready:!1,count:1,data:void 0}}if(0===a.primitivesToDecode.length)return Promise.resolve();const i=u._getDecoderTaskProcessor(),o=[];let s=h(i,e,a,t);while(Object(r["a"])(s))o.push(s),s=h(i,e,a,t);return Promise.all(o)},u.decodePointCloud=function(e){const t=u._getDecoderTaskProcessor();if(u._taskProcessorReady)return t.scheduleTask(e,[e.buffer.buffer])},u.decodeBufferView=function(e){const t=u._getDecoderTaskProcessor();if(u._taskProcessorReady)return t.scheduleTask(e,[e.array.buffer])},u.cacheDataForModel=function(e){const t=e.cacheKey;if(Object(r["a"])(t)&&Object(r["a"])(u._decodedModelResourceCache)){const a=u._decodedModelResourceCache[t];Object(r["a"])(a)&&(a.ready=!0,a.data=e._decodedData)}},u.destroyCachedDataForModel=function(e){const t=e.cacheKey;if(Object(r["a"])(t)&&Object(r["a"])(u._decodedModelResourceCache)){const e=u._decodedModelResourceCache[t];Object(r["a"])(e)&&0===--e.count&&delete u._decodedModelResourceCache[t]}},t["a"]=u},1360:function(e,t,a){"use strict";var n=a("2f63");function r(e){}let i;r.prototype.isReady=function(){return!0},r.prototype.shouldDiscardImage=function(e){return r.EMPTY_IMAGE===e},Object.defineProperties(r,{EMPTY_IMAGE:{get:function(){return Object(n["a"])(i)||(i=new Image,i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),i}}}),t["a"]=r},"37eb":function(e,t,a){"use strict";var n=a("cef5"),r=a("b482"),i=a("be18"),o=a("2bb9"),s=a("535a"),u=a("2f63"),c=a("7d62"),l=a("52f0"),f=a("0541"),h=a("8b68"),d=a("a894"),m=a("d289"),p=a("6dc0"),_=a("e90c"),g=a("5770"),v=a("7c5e"),y=a("fc40"),b=a("ed46"),w=a("b7c8"),E=a("29ab"),O=a("aea3"),A=a("a307");const L={position:0};function C(e){e=Object(s["a"])(e,s["a"].EMPTY_OBJECT),this.center=i["a"].clone(Object(s["a"])(e.center,i["a"].ZERO)),this._center=new i["a"],this.radii=i["a"].clone(e.radii),this._radii=new i["a"],this._oneOverEllipsoidRadiiSquared=new i["a"],this._boundingSphere=new n["a"],this.modelMatrix=l["a"].clone(Object(s["a"])(e.modelMatrix,l["a"].IDENTITY)),this._modelMatrix=new l["a"],this._computedModelMatrix=new l["a"],this.show=Object(s["a"])(e.show,!0),this.material=Object(s["a"])(e.material,O["a"].fromType(O["a"].ColorType)),this._material=void 0,this._translucent=void 0,this.id=e.id,this._id=void 0,this.debugShowBoundingVolume=Object(s["a"])(e.debugShowBoundingVolume,!1),this.onlySunLighting=Object(s["a"])(e.onlySunLighting,!1),this._onlySunLighting=!1,this._depthTestEnabled=Object(s["a"])(e.depthTestEnabled,!0),this._useLogDepth=!1,this._sp=void 0,this._rs=void 0,this._va=void 0,this._pickSP=void 0,this._pickId=void 0,this._colorCommand=new d["a"]({owner:Object(s["a"])(e._owner,this)}),this._pickCommand=new d["a"]({owner:Object(s["a"])(e._owner,this),pickOnly:!0});const t=this;this._uniforms={u_radii:function(){return t.radii},u_oneOverEllipsoidRadiiSquared:function(){return t._oneOverEllipsoidRadiiSquared}},this._pickUniforms={czm_pickColor:function(){return t._pickId.color}}}function x(e){let t=e.cache.ellipsoidPrimitive_vertexArray;if(Object(u["a"])(t))return t;const a=r["a"].createGeometry(r["a"].fromDimensions({dimensions:new i["a"](2,2,2),vertexFormat:f["a"].POSITION_ONLY}));return t=v["a"].fromGeometry({context:e,geometry:a,attributeLocations:L,bufferUsage:h["a"].STATIC_DRAW,interleave:!0}),e.cache.ellipsoidPrimitive_vertexArray=t,t}const R="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";C.prototype.update=function(e){if(!this.show||e.mode!==A["a"].SCENE3D||!Object(u["a"])(this.center)||!Object(u["a"])(this.radii))return;const t=e.context,a=this.material.isTranslucent(),r=this._translucent!==a;Object(u["a"])(this._rs)&&!r||(this._translucent=a,this._rs=p["a"].fromCache({cull:{enabled:!0,face:E["a"].FRONT},depthTest:{enabled:this._depthTestEnabled},depthMask:!a&&t.fragmentDepth,blending:a?w["a"].ALPHA_BLEND:void 0})),Object(u["a"])(this._va)||(this._va=x(t));let s=!1;const c=this.radii;if(!i["a"].equals(this._radii,c)){i["a"].clone(c,this._radii);const e=this._oneOverEllipsoidRadiiSquared;e.x=1/(c.x*c.x),e.y=1/(c.y*c.y),e.z=1/(c.z*c.z),s=!0}l["a"].equals(this.modelMatrix,this._modelMatrix)&&i["a"].equals(this.center,this._center)||(l["a"].clone(this.modelMatrix,this._modelMatrix),i["a"].clone(this.center,this._center),l["a"].multiplyByTranslation(this.modelMatrix,this.center,this._computedModelMatrix),s=!0),s&&(i["a"].clone(i["a"].ZERO,this._boundingSphere.center),this._boundingSphere.radius=i["a"].maximumComponent(c),n["a"].transform(this._boundingSphere,this._computedModelMatrix,this._boundingSphere));const f=this._material!==this.material;this._material=this.material,this._material.update(t);const h=this.onlySunLighting!==this._onlySunLighting;this._onlySunLighting=this.onlySunLighting;const d=e.useLogDepth,v=this._useLogDepth!==d;this._useLogDepth=d;const O=this._colorCommand;let C,I;(f||h||r||v)&&(C=new g["a"]({sources:[b["a"]]}),I=new g["a"]({sources:[this.material.shaderSource,y["a"]]}),this.onlySunLighting&&I.defines.push("ONLY_SUN_LIGHTING"),!a&&t.fragmentDepth&&I.defines.push("WRITE_DEPTH"),this._useLogDepth&&(C.defines.push("LOG_DEPTH"),I.defines.push("LOG_DEPTH"),I.sources.push(R)),this._sp=_["a"].replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:C,fragmentShaderSource:I,attributeLocations:L}),O.vertexArray=this._va,O.renderState=this._rs,O.shaderProgram=this._sp,O.uniformMap=Object(o["a"])(this._uniforms,this.material._uniforms),O.executeInClosestFrustum=a);const S=e.commandList,T=e.passes;if(T.render&&(O.boundingVolume=this._boundingSphere,O.debugShowBoundingVolume=this.debugShowBoundingVolume,O.modelMatrix=this._computedModelMatrix,O.pass=a?m["a"].TRANSLUCENT:m["a"].OPAQUE,S.push(O)),T.pick){const e=this._pickCommand;Object(u["a"])(this._pickId)&&this._id===this.id||(this._id=this.id,this._pickId=this._pickId&&this._pickId.destroy(),this._pickId=t.createPickId({primitive:this,id:this.id})),(f||h||!Object(u["a"])(this._pickSP)||v)&&(C=new g["a"]({sources:[b["a"]]}),I=new g["a"]({sources:[this.material.shaderSource,y["a"]],pickColorQualifier:"uniform"}),this.onlySunLighting&&I.defines.push("ONLY_SUN_LIGHTING"),!a&&t.fragmentDepth&&I.defines.push("WRITE_DEPTH"),this._useLogDepth&&(C.defines.push("LOG_DEPTH"),I.defines.push("LOG_DEPTH"),I.sources.push(R)),this._pickSP=_["a"].replaceCache({context:t,shaderProgram:this._pickSP,vertexShaderSource:C,fragmentShaderSource:I,attributeLocations:L}),e.vertexArray=this._va,e.renderState=this._rs,e.shaderProgram=this._pickSP,e.uniformMap=Object(o["a"])(Object(o["a"])(this._uniforms,this._pickUniforms),this.material._uniforms),e.executeInClosestFrustum=a),e.boundingVolume=this._boundingSphere,e.modelMatrix=this._computedModelMatrix,e.pass=a?m["a"].TRANSLUCENT:m["a"].OPAQUE,S.push(e)}},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._pickSP=this._pickSP&&this._pickSP.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),Object(c["a"])(this)},t["a"]=C},6928:function(e,t,a){"use strict";var n=a("670c"),r=a("be18"),i=a("a561"),o=a("bd8d"),s=a("2f63"),u=a("93da"),c=a("283e"),l=a("160b"),f=a.n(l);const h={VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18};var d=Object.freeze(h);function m(e,t){let a;this._expression=e,e=B(e,t),e=G(k(e)),f.a.addBinaryOp("=~",0),f.a.addBinaryOp("!~",0);try{a=f()(e)}catch(n){throw new c["a"](n)}this._runtimeAst=J(this,a)}Object.defineProperties(m.prototype,{expression:{get:function(){return this._expression}}});const p={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new n["a"]],cartesian3Array:[new r["a"]],cartesian4Array:[new i["a"]],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);const e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new n["a"]),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new r["a"]),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new i["a"]),this.cartesian4Array[this.cartesian4Index++]}};m.prototype.evaluate=function(e,t){p.reset();const a=this._runtimeAst.evaluate(e);return t instanceof o["a"]&&a instanceof i["a"]?o["a"].fromCartesian4(a,t):a instanceof n["a"]||a instanceof r["a"]||a instanceof i["a"]?a.clone(t):a},m.prototype.evaluateColor=function(e,t){p.reset();const a=this._runtimeAst.evaluate(e);return o["a"].fromCartesian4(a,t)},m.prototype.getShaderFunction=function(e,t,a,n){let r=this.getShaderExpression(t,a);return r=`${n} ${e}\n{\n    return ${r};\n}\n`,r},m.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)},m.prototype.getVariables=function(){let e=[];return this._runtimeAst.getVariables(e),e=e.filter((function(e,t,a){return a.indexOf(e)===t})),e};const _=["!","-","+"],g=["+","-","*","/","%","===","!==",">",">=","<","<=","&&","||","!~","=~"],v=/\${(.*?)}/g,y=/\\/g,b="@#%",w=/@#%/g,E=new o["a"],O={abs:I(Math.abs),sqrt:I(Math.sqrt),cos:I(Math.cos),sin:I(Math.sin),tan:I(Math.tan),acos:I(Math.acos),asin:I(Math.asin),atan:I(Math.atan),radians:I(u["a"].toRadians),degrees:I(u["a"].toDegrees),sign:I(u["a"].sign),floor:I(Math.floor),ceil:I(Math.ceil),round:I(Math.round),exp:I(Math.exp),exp2:I(x),log:I(Math.log),log2:I(R),fract:I(C),length:N,normalize:$},A={atan2:S(Math.atan2,!1),pow:S(Math.pow,!1),min:S(Math.min,!0),max:S(Math.max,!0),distance:P,dot:j,cross:M},L={clamp:T(u["a"].clamp,!0),mix:T(u["a"].lerp,!0)};function C(e){return e-Math.floor(e)}function x(e){return Math.pow(2,e)}function R(e){return u["a"].log2(e)}function I(e){return function(t,a){if("number"===typeof a)return e(a);if(a instanceof n["a"])return n["a"].fromElements(e(a.x),e(a.y),p.getCartesian2());if(a instanceof r["a"])return r["a"].fromElements(e(a.x),e(a.y),e(a.z),p.getCartesian3());if(a instanceof i["a"])return i["a"].fromElements(e(a.x),e(a.y),e(a.z),e(a.w),p.getCartesian4());throw new c["a"](`Function "${t}" requires a vector or number argument. Argument is ${a}.`)}}function S(e,t){return function(a,o,s){if(t&&"number"===typeof s){if("number"===typeof o)return e(o,s);if(o instanceof n["a"])return n["a"].fromElements(e(o.x,s),e(o.y,s),p.getCartesian2());if(o instanceof r["a"])return r["a"].fromElements(e(o.x,s),e(o.y,s),e(o.z,s),p.getCartesian3());if(o instanceof i["a"])return i["a"].fromElements(e(o.x,s),e(o.y,s),e(o.z,s),e(o.w,s),p.getCartesian4())}if("number"===typeof o&&"number"===typeof s)return e(o,s);if(o instanceof n["a"]&&s instanceof n["a"])return n["a"].fromElements(e(o.x,s.x),e(o.y,s.y),p.getCartesian2());if(o instanceof r["a"]&&s instanceof r["a"])return r["a"].fromElements(e(o.x,s.x),e(o.y,s.y),e(o.z,s.z),p.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"])return i["a"].fromElements(e(o.x,s.x),e(o.y,s.y),e(o.z,s.z),e(o.w,s.w),p.getCartesian4());throw new c["a"](`Function "${a}" requires vector or number arguments of matching types. Arguments are ${o} and ${s}.`)}}function T(e,t){return function(a,o,s,u){if(t&&"number"===typeof u){if("number"===typeof o&&"number"===typeof s)return e(o,s,u);if(o instanceof n["a"]&&s instanceof n["a"])return n["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),p.getCartesian2());if(o instanceof r["a"]&&s instanceof r["a"])return r["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),e(o.z,s.z,u),p.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"])return i["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),e(o.z,s.z,u),e(o.w,s.w,u),p.getCartesian4())}if("number"===typeof o&&"number"===typeof s&&"number"===typeof u)return e(o,s,u);if(o instanceof n["a"]&&s instanceof n["a"]&&u instanceof n["a"])return n["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),p.getCartesian2());if(o instanceof r["a"]&&s instanceof r["a"]&&u instanceof r["a"])return r["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),e(o.z,s.z,u.z),p.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"]&&u instanceof i["a"])return i["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),e(o.z,s.z,u.z),e(o.w,s.w,u.w),p.getCartesian4());throw new c["a"](`Function "${a}" requires vector or number arguments of matching types. Arguments are ${o}, ${s}, and ${u}.`)}}function N(e,t){if("number"===typeof t)return Math.abs(t);if(t instanceof n["a"])return n["a"].magnitude(t);if(t instanceof r["a"])return r["a"].magnitude(t);if(t instanceof i["a"])return i["a"].magnitude(t);throw new c["a"](`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}function $(e,t){if("number"===typeof t)return 1;if(t instanceof n["a"])return n["a"].normalize(t,p.getCartesian2());if(t instanceof r["a"])return r["a"].normalize(t,p.getCartesian3());if(t instanceof i["a"])return i["a"].normalize(t,p.getCartesian4());throw new c["a"](`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}function P(e,t,a){if("number"===typeof t&&"number"===typeof a)return Math.abs(t-a);if(t instanceof n["a"]&&a instanceof n["a"])return n["a"].distance(t,a);if(t instanceof r["a"]&&a instanceof r["a"])return r["a"].distance(t,a);if(t instanceof i["a"]&&a instanceof i["a"])return i["a"].distance(t,a);throw new c["a"](`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${a}.`)}function j(e,t,a){if("number"===typeof t&&"number"===typeof a)return t*a;if(t instanceof n["a"]&&a instanceof n["a"])return n["a"].dot(t,a);if(t instanceof r["a"]&&a instanceof r["a"])return r["a"].dot(t,a);if(t instanceof i["a"]&&a instanceof i["a"])return i["a"].dot(t,a);throw new c["a"](`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${a}.`)}function M(e,t,a){if(t instanceof r["a"]&&a instanceof r["a"])return r["a"].cross(t,a,p.getCartesian3());throw new c["a"](`Function "${e}" requires vec3 arguments. Arguments are ${t} and ${a}.`)}function D(e,t,a,n,r){this._type=e,this._value=t,this._left=a,this._right=n,this._test=r,this.evaluate=void 0,Z(this)}function B(e,t){if(!Object(s["a"])(t))return e;for(const a in t)if(t.hasOwnProperty(a)){const n=new RegExp(`\\$\\{${a}\\}`,"g"),r=`(${t[a]})`;Object(s["a"])(r)&&(e=e.replace(n,r))}return e}function k(e){return e.replace(y,b)}function U(e){return e.replace(w,"\\")}function G(e){let t=e,a="",n=t.indexOf("${");while(n>=0){const e=t.indexOf("'"),r=t.indexOf('"');let i;if(e>=0&&e<n)i=t.indexOf("'",e+1),a+=t.substr(0,i+1),t=t.substr(i+1),n=t.indexOf("${");else if(r>=0&&r<n)i=t.indexOf('"',r+1),a+=t.substr(0,i+1),t=t.substr(i+1),n=t.indexOf("${");else{a+=t.substr(0,n);const e=t.indexOf("}");if(e<0)throw new c["a"]("Unmatched {.");a+="czm_"+t.substr(n+2,e-(n+2)),t=t.substr(e+1),n=t.indexOf("${")}}return a+=t,a}function z(e){const t=typeof e.value;return null===e.value?new D(d.LITERAL_NULL,null):"boolean"===t?new D(d.LITERAL_BOOLEAN,e.value):"number"===t?new D(d.LITERAL_NUMBER,e.value):"string"===t?e.value.indexOf("${")>=0?new D(d.VARIABLE_IN_STRING,e.value):new D(d.LITERAL_STRING,U(e.value)):void 0}function q(e,t){const a=t.arguments,n=a.length;let r,i,o,u;if("MemberExpression"===t.callee.type){r=t.callee.property.name;const s=t.callee.object;if("test"===r||"exec"===r){if("regExp"!==s.callee.name)throw new c["a"](r+" is not a function.");return 0===n?"test"===r?new D(d.LITERAL_BOOLEAN,!1):new D(d.LITERAL_NULL,null):(o=J(e,s),u=J(e,a[0]),new D(d.FUNCTION_CALL,r,o,u))}if("toString"===r)return i=J(e,s),new D(d.FUNCTION_CALL,r,i);throw new c["a"](`Unexpected function call "${r}".`)}if(r=t.callee.name,"color"===r){if(0===n)return new D(d.LITERAL_COLOR,r);if(i=J(e,a[0]),Object(s["a"])(a[1])){const t=J(e,a[1]);return new D(d.LITERAL_COLOR,r,[i,t])}return new D(d.LITERAL_COLOR,r,[i])}if("rgb"===r||"hsl"===r){if(n<3)throw new c["a"](r+" requires three arguments.");return i=[J(e,a[0]),J(e,a[1]),J(e,a[2])],new D(d.LITERAL_COLOR,r,i)}if("rgba"===r||"hsla"===r){if(n<4)throw new c["a"](r+" requires four arguments.");return i=[J(e,a[0]),J(e,a[1]),J(e,a[2]),J(e,a[3])],new D(d.LITERAL_COLOR,r,i)}if("vec2"===r||"vec3"===r||"vec4"===r){i=new Array(n);for(let t=0;t<n;++t)i[t]=J(e,a[t]);return new D(d.LITERAL_VECTOR,r,i)}if("isNaN"===r||"isFinite"===r)return 0===n?new D(d.LITERAL_BOOLEAN,"isNaN"===r):(i=J(e,a[0]),new D(d.UNARY,r,i));if("isExactClass"===r||"isClass"===r){if(n<1||n>1)throw new c["a"](r+" requires exactly one argument.");return i=J(e,a[0]),new D(d.UNARY,r,i)}if("getExactClassName"===r){if(n>0)throw new c["a"](r+" does not take any argument.");return new D(d.UNARY,r)}if(Object(s["a"])(O[r])){if(1!==n)throw new c["a"](r+" requires exactly one argument.");return i=J(e,a[0]),new D(d.UNARY,r,i)}if(Object(s["a"])(A[r])){if(2!==n)throw new c["a"](r+" requires exactly two arguments.");return o=J(e,a[0]),u=J(e,a[1]),new D(d.BINARY,r,o,u)}if(Object(s["a"])(L[r])){if(3!==n)throw new c["a"](r+" requires exactly three arguments.");o=J(e,a[0]),u=J(e,a[1]);const t=J(e,a[2]);return new D(d.TERNARY,r,o,u,t)}if("Boolean"===r)return 0===n?new D(d.LITERAL_BOOLEAN,!1):(i=J(e,a[0]),new D(d.UNARY,r,i));if("Number"===r)return 0===n?new D(d.LITERAL_NUMBER,0):(i=J(e,a[0]),new D(d.UNARY,r,i));if("String"===r)return 0===n?new D(d.LITERAL_STRING,""):(i=J(e,a[0]),new D(d.UNARY,r,i));if("regExp"===r)return F(e,t);throw new c["a"](`Unexpected function call "${r}".`)}function F(e,t){const a=t.arguments;if(0===a.length)return new D(d.LITERAL_REGEX,new RegExp);const n=J(e,a[0]);let r;if(a.length>1){const t=J(e,a[1]);if(W(n)&&W(t)){try{r=new RegExp(U(String(n._value)),t._value)}catch(i){throw new c["a"](i)}return new D(d.LITERAL_REGEX,r)}return new D(d.REGEX,n,t)}if(W(n)){try{r=new RegExp(U(String(n._value)))}catch(i){throw new c["a"](i)}return new D(d.LITERAL_REGEX,r)}return new D(d.REGEX,n)}function V(e){if(Q(e.name)){const t=K(e.name);return"tiles3d_"===t.substr(0,8)?new D(d.BUILTIN_VARIABLE,t):new D(d.VARIABLE,t)}if("NaN"===e.name)return new D(d.LITERAL_NUMBER,NaN);if("Infinity"===e.name)return new D(d.LITERAL_NUMBER,1/0);if("undefined"===e.name)return new D(d.LITERAL_UNDEFINED,void 0);throw new c["a"](e.name+" is not defined.")}function Y(e){const t=e.property.name;return"PI"===t?new D(d.LITERAL_NUMBER,Math.PI):"E"===t?new D(d.LITERAL_NUMBER,Math.E):void 0}function H(e){const t=e.property.name;if("POSITIVE_INFINITY"===t)return new D(d.LITERAL_NUMBER,Number.POSITIVE_INFINITY)}function X(e,t){if("Math"===t.object.name)return Y(t);if("Number"===t.object.name)return H(t);let a;const n=J(e,t.object);return t.computed?(a=J(e,t.property),new D(d.MEMBER,"brackets",n,a)):(a=new D(d.LITERAL_STRING,t.property.name),new D(d.MEMBER,"dot",n,a))}function W(e){return e._type>=d.LITERAL_NULL}function Q(e){return"czm_"===e.substr(0,4)}function K(e){return e.substr(4)}function J(e,t){let a,n,r,i;if("Literal"===t.type)a=z(t);else if("CallExpression"===t.type)a=q(e,t);else if("Identifier"===t.type)a=V(t);else if("UnaryExpression"===t.type){n=t.operator;const r=J(e,t.argument);if(!(_.indexOf(n)>-1))throw new c["a"](`Unexpected operator "${n}".`);a=new D(d.UNARY,n,r)}else if("BinaryExpression"===t.type){if(n=t.operator,r=J(e,t.left),i=J(e,t.right),!(g.indexOf(n)>-1))throw new c["a"](`Unexpected operator "${n}".`);a=new D(d.BINARY,n,r,i)}else if("LogicalExpression"===t.type)n=t.operator,r=J(e,t.left),i=J(e,t.right),g.indexOf(n)>-1&&(a=new D(d.BINARY,n,r,i));else if("ConditionalExpression"===t.type){const n=J(e,t.test);r=J(e,t.consequent),i=J(e,t.alternate),a=new D(d.CONDITIONAL,"?",r,i,n)}else if("MemberExpression"===t.type)a=X(e,t);else{if("ArrayExpression"!==t.type)throw"Compound"===t.type?new c["a"]("Provide exactly one expression."):new c["a"]("Cannot parse expression.");{const n=[];for(let a=0;a<t.elements.length;a++)n[a]=J(e,t.elements[a]);a=new D(d.ARRAY,n)}}return a}function Z(e){e._type===d.CONDITIONAL?e.evaluate=e._evaluateConditional:e._type===d.FUNCTION_CALL?"test"===e._value?e.evaluate=e._evaluateRegExpTest:"exec"===e._value?e.evaluate=e._evaluateRegExpExec:"toString"===e._value&&(e.evaluate=e._evaluateToString):e._type===d.UNARY?"!"===e._value?e.evaluate=e._evaluateNot:"-"===e._value?e.evaluate=e._evaluateNegative:"+"===e._value?e.evaluate=e._evaluatePositive:"isNaN"===e._value?e.evaluate=e._evaluateNaN:"isFinite"===e._value?e.evaluate=e._evaluateIsFinite:"isExactClass"===e._value?e.evaluate=e._evaluateIsExactClass:"isClass"===e._value?e.evaluate=e._evaluateIsClass:"getExactClassName"===e._value?e.evaluate=e._evaluateGetExactClassName:"Boolean"===e._value?e.evaluate=e._evaluateBooleanConversion:"Number"===e._value?e.evaluate=e._evaluateNumberConversion:"String"===e._value?e.evaluate=e._evaluateStringConversion:Object(s["a"])(O[e._value])&&(e.evaluate=te(e._value)):e._type===d.BINARY?"+"===e._value?e.evaluate=e._evaluatePlus:"-"===e._value?e.evaluate=e._evaluateMinus:"*"===e._value?e.evaluate=e._evaluateTimes:"/"===e._value?e.evaluate=e._evaluateDivide:"%"===e._value?e.evaluate=e._evaluateMod:"==="===e._value?e.evaluate=e._evaluateEqualsStrict:"!=="===e._value?e.evaluate=e._evaluateNotEqualsStrict:"<"===e._value?e.evaluate=e._evaluateLessThan:"<="===e._value?e.evaluate=e._evaluateLessThanOrEquals:">"===e._value?e.evaluate=e._evaluateGreaterThan:">="===e._value?e.evaluate=e._evaluateGreaterThanOrEquals:"&&"===e._value?e.evaluate=e._evaluateAnd:"||"===e._value?e.evaluate=e._evaluateOr:"=~"===e._value?e.evaluate=e._evaluateRegExpMatch:"!~"===e._value?e.evaluate=e._evaluateRegExpNotMatch:Object(s["a"])(A[e._value])&&(e.evaluate=ae(e._value)):e._type===d.TERNARY?e.evaluate=ne(e._value):e._type===d.MEMBER?"brackets"===e._value?e.evaluate=e._evaluateMemberBrackets:e.evaluate=e._evaluateMemberDot:e._type===d.ARRAY?e.evaluate=e._evaluateArray:e._type===d.VARIABLE?e.evaluate=e._evaluateVariable:e._type===d.VARIABLE_IN_STRING?e.evaluate=e._evaluateVariableString:e._type===d.LITERAL_COLOR?e.evaluate=e._evaluateLiteralColor:e._type===d.LITERAL_VECTOR?e.evaluate=e._evaluateLiteralVector:e._type===d.LITERAL_STRING?e.evaluate=e._evaluateLiteralString:e._type===d.REGEX?e.evaluate=e._evaluateRegExp:e._type===d.BUILTIN_VARIABLE?"tiles3d_tileset_time"===e._value&&(e.evaluate=ee):e.evaluate=e._evaluateLiteral}function ee(e){return Object(s["a"])(e)?e.content.tileset.timeSinceLoad:0}function te(e){const t=O[e];return function(a){const n=this._left.evaluate(a);return t(e,n)}}function ae(e){const t=A[e];return function(a){const n=this._left.evaluate(a),r=this._right.evaluate(a);return t(e,n,r)}}function ne(e){const t=L[e];return function(a){const n=this._left.evaluate(a),r=this._right.evaluate(a),i=this._test.evaluate(a);return t(e,n,r,i)}}function re(e,t){if(Object(s["a"])(e))return e.getPropertyInherited(t)}function ie(e){return"feature"===e._value}function oe(e){const t=e._left,a=t.length;for(let o=0;o<a;++o)if(t[o]._type!==d.LITERAL_NUMBER)return;const n=t[0]._value,r=t[1]._value,i=t[2]._value,s=4===a?t[3]._value:1;return o["a"].fromHsl(n,r,i,s,E)}function se(e){const t=e._left,a=t.length;for(let r=0;r<a;++r)if(t[r]._type!==d.LITERAL_NUMBER)return;const n=E;return n.red=t[0]._value/255,n.green=t[1]._value/255,n.blue=t[2]._value/255,n.alpha=4===a?t[3]._value:1,n}function ue(e){return e%1===0?e.toFixed(1):e.toString()}function ce(e){const t=ue(e.red),a=ue(e.green),n=ue(e.blue);return`vec3(${t}, ${a}, ${n})`}function le(e){const t=ue(e.red),a=ue(e.green),n=ue(e.blue),r=ue(e.alpha);return`vec4(${t}, ${a}, ${n}, ${r})`}function fe(e,t,a,n){const r=e.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=e[o].getShaderExpression(t,a,n);return i}function he(e,t){return Object(s["a"])(t[e])?t[e]:m.NULL_SENTINEL}D.prototype._evaluateLiteral=function(){return this._value},D.prototype._evaluateLiteralColor=function(e){const t=E,a=this._left;if("color"===this._value)Object(s["a"])(a)?a.length>1?(o["a"].fromCssColorString(a[0].evaluate(e),t),t.alpha=a[1].evaluate(e)):o["a"].fromCssColorString(a[0].evaluate(e),t):o["a"].fromBytes(255,255,255,255,t);else if("rgb"===this._value)o["a"].fromBytes(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),255,t);else if("rgba"===this._value){const n=255*a[3].evaluate(e);o["a"].fromBytes(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),n,t)}else"hsl"===this._value?o["a"].fromHsl(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),1,t):"hsla"===this._value&&o["a"].fromHsl(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),a[3].evaluate(e),t);return i["a"].fromColor(t,p.getCartesian4())},D.prototype._evaluateLiteralVector=function(e){const t=p.getArray(),a=this._value,o=this._left,s=o.length;for(let f=0;f<s;++f){const s=o[f].evaluate(e);if("number"===typeof s)t.push(s);else if(s instanceof n["a"])t.push(s.x,s.y);else if(s instanceof r["a"])t.push(s.x,s.y,s.z);else{if(!(s instanceof i["a"]))throw new c["a"](`${a} argument must be a vector or number. Argument is ${s}.`);t.push(s.x,s.y,s.z,s.w)}}const u=t.length,l=parseInt(a.charAt(3));if(0===u)throw new c["a"](`Invalid ${a} constructor. No valid arguments.`);if(u<l&&u>1)throw new c["a"](`Invalid ${a} constructor. Not enough arguments.`);if(u>l&&s>1)throw new c["a"](`Invalid ${a} constructor. Too many arguments.`);if(1===u){const e=t[0];t.push(e,e,e)}return"vec2"===a?n["a"].fromArray(t,0,p.getCartesian2()):"vec3"===a?r["a"].fromArray(t,0,p.getCartesian3()):"vec4"===a?i["a"].fromArray(t,0,p.getCartesian4()):void 0},D.prototype._evaluateLiteralString=function(){return this._value},D.prototype._evaluateVariableString=function(e){let t=this._value,a=v.exec(t);while(null!==a){const n=a[0],r=a[1];let i=re(e,r);Object(s["a"])(i)||(i=""),t=t.replace(n,i),a=v.exec(t)}return t},D.prototype._evaluateVariable=function(e){return re(e,this._value)},D.prototype._evaluateMemberDot=function(e){if(ie(this._left))return re(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!Object(s["a"])(t))return;const a=this._right.evaluate(e);if(t instanceof n["a"]||t instanceof r["a"]||t instanceof i["a"]){if("r"===a)return t.x;if("g"===a)return t.y;if("b"===a)return t.z;if("a"===a)return t.w}return t[a]},D.prototype._evaluateMemberBrackets=function(e){if(ie(this._left))return re(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!Object(s["a"])(t))return;const a=this._right.evaluate(e);if(t instanceof n["a"]||t instanceof r["a"]||t instanceof i["a"]){if(0===a||"r"===a)return t.x;if(1===a||"g"===a)return t.y;if(2===a||"b"===a)return t.z;if(3===a||"a"===a)return t.w}return t[a]},D.prototype._evaluateArray=function(e){const t=[];for(let a=0;a<this._value.length;a++)t[a]=this._value[a].evaluate(e);return t},D.prototype._evaluateNot=function(e){const t=this._left.evaluate(e);if("boolean"!==typeof t)throw new c["a"](`Operator "!" requires a boolean argument. Argument is ${t}.`);return!t},D.prototype._evaluateNegative=function(e){const t=this._left.evaluate(e);if(t instanceof n["a"])return n["a"].negate(t,p.getCartesian2());if(t instanceof r["a"])return r["a"].negate(t,p.getCartesian3());if(t instanceof i["a"])return i["a"].negate(t,p.getCartesian4());if("number"===typeof t)return-t;throw new c["a"](`Operator "-" requires a vector or number argument. Argument is ${t}.`)},D.prototype._evaluatePositive=function(e){const t=this._left.evaluate(e);if(!(t instanceof n["a"]||t instanceof r["a"]||t instanceof i["a"]||"number"===typeof t))throw new c["a"](`Operator "+" requires a vector or number argument. Argument is ${t}.`);return t},D.prototype._evaluateLessThan=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new c["a"](`Operator "<" requires number arguments. Arguments are ${t} and ${a}.`);return t<a},D.prototype._evaluateLessThanOrEquals=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new c["a"](`Operator "<=" requires number arguments. Arguments are ${t} and ${a}.`);return t<=a},D.prototype._evaluateGreaterThan=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new c["a"](`Operator ">" requires number arguments. Arguments are ${t} and ${a}.`);return t>a},D.prototype._evaluateGreaterThanOrEquals=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new c["a"](`Operator ">=" requires number arguments. Arguments are ${t} and ${a}.`);return t>=a},D.prototype._evaluateOr=function(e){const t=this._left.evaluate(e);if("boolean"!==typeof t)throw new c["a"](`Operator "||" requires boolean arguments. First argument is ${t}.`);if(t)return!0;const a=this._right.evaluate(e);if("boolean"!==typeof a)throw new c["a"](`Operator "||" requires boolean arguments. Second argument is ${a}.`);return t||a},D.prototype._evaluateAnd=function(e){const t=this._left.evaluate(e);if("boolean"!==typeof t)throw new c["a"](`Operator "&&" requires boolean arguments. First argument is ${t}.`);if(!t)return!1;const a=this._right.evaluate(e);if("boolean"!==typeof a)throw new c["a"](`Operator "&&" requires boolean arguments. Second argument is ${a}.`);return t&&a},D.prototype._evaluatePlus=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].add(t,a,p.getCartesian2());if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].add(t,a,p.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].add(t,a,p.getCartesian4());if("string"===typeof t||"string"===typeof a)return t+a;if("number"===typeof t&&"number"===typeof a)return t+a;throw new c["a"](`Operator "+" requires vector or number arguments of matching types, or at least one string argument. Arguments are ${t} and ${a}.`)},D.prototype._evaluateMinus=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].subtract(t,a,p.getCartesian2());if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].subtract(t,a,p.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].subtract(t,a,p.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t-a;throw new c["a"](`Operator "-" requires vector or number arguments of matching types. Arguments are ${t} and ${a}.`)},D.prototype._evaluateTimes=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].multiplyComponents(t,a,p.getCartesian2());if(a instanceof n["a"]&&"number"===typeof t)return n["a"].multiplyByScalar(a,t,p.getCartesian2());if(t instanceof n["a"]&&"number"===typeof a)return n["a"].multiplyByScalar(t,a,p.getCartesian2());if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].multiplyComponents(t,a,p.getCartesian3());if(a instanceof r["a"]&&"number"===typeof t)return r["a"].multiplyByScalar(a,t,p.getCartesian3());if(t instanceof r["a"]&&"number"===typeof a)return r["a"].multiplyByScalar(t,a,p.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].multiplyComponents(t,a,p.getCartesian4());if(a instanceof i["a"]&&"number"===typeof t)return i["a"].multiplyByScalar(a,t,p.getCartesian4());if(t instanceof i["a"]&&"number"===typeof a)return i["a"].multiplyByScalar(t,a,p.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t*a;throw new c["a"](`Operator "*" requires vector or number arguments. If both arguments are vectors they must be matching types. Arguments are ${t} and ${a}.`)},D.prototype._evaluateDivide=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].divideComponents(t,a,p.getCartesian2());if(t instanceof n["a"]&&"number"===typeof a)return n["a"].divideByScalar(t,a,p.getCartesian2());if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].divideComponents(t,a,p.getCartesian3());if(t instanceof r["a"]&&"number"===typeof a)return r["a"].divideByScalar(t,a,p.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].divideComponents(t,a,p.getCartesian4());if(t instanceof i["a"]&&"number"===typeof a)return i["a"].divideByScalar(t,a,p.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t/a;throw new c["a"](`Operator "/" requires vector or number arguments of matching types, or a number as the second argument. Arguments are ${t} and ${a}.`)},D.prototype._evaluateMod=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].fromElements(t.x%a.x,t.y%a.y,p.getCartesian2());if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].fromElements(t.x%a.x,t.y%a.y,t.z%a.z,p.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].fromElements(t.x%a.x,t.y%a.y,t.z%a.z,t.w%a.w,p.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t%a;throw new c["a"](`Operator "%" requires vector or number arguments of matching types. Arguments are ${t} and ${a}.`)},D.prototype._evaluateEqualsStrict=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);return a instanceof n["a"]&&t instanceof n["a"]||a instanceof r["a"]&&t instanceof r["a"]||a instanceof i["a"]&&t instanceof i["a"]?t.equals(a):t===a},D.prototype._evaluateNotEqualsStrict=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);return a instanceof n["a"]&&t instanceof n["a"]||a instanceof r["a"]&&t instanceof r["a"]||a instanceof i["a"]&&t instanceof i["a"]?!t.equals(a):t!==a},D.prototype._evaluateConditional=function(e){const t=this._test.evaluate(e);if("boolean"!==typeof t)throw new c["a"](`Conditional argument of conditional expression must be a boolean. Argument is ${t}.`);return t?this._left.evaluate(e):this._right.evaluate(e)},D.prototype._evaluateNaN=function(e){return isNaN(this._left.evaluate(e))},D.prototype._evaluateIsFinite=function(e){return isFinite(this._left.evaluate(e))},D.prototype._evaluateIsExactClass=function(e){return!!Object(s["a"])(e)&&e.isExactClass(this._left.evaluate(e))},D.prototype._evaluateIsClass=function(e){return!!Object(s["a"])(e)&&e.isClass(this._left.evaluate(e))},D.prototype._evaluateGetExactClassName=function(e){if(Object(s["a"])(e))return e.getExactClassName()},D.prototype._evaluateBooleanConversion=function(e){return Boolean(this._left.evaluate(e))},D.prototype._evaluateNumberConversion=function(e){return Number(this._left.evaluate(e))},D.prototype._evaluateStringConversion=function(e){return String(this._left.evaluate(e))},D.prototype._evaluateRegExp=function(e){const t=this._value.evaluate(e);let a,n="";Object(s["a"])(this._left)&&(n=this._left.evaluate(e));try{a=new RegExp(t,n)}catch(r){throw new c["a"](r)}return a},D.prototype._evaluateRegExpTest=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"===typeof a))throw new c["a"](`RegExp.test requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${a}.`);return t.test(a)},D.prototype._evaluateRegExpMatch=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(t instanceof RegExp&&"string"===typeof a)return t.test(a);if(a instanceof RegExp&&"string"===typeof t)return a.test(t);throw new c["a"](`Operator "=~" requires one RegExp argument and one string argument. Arguments are ${t} and ${a}.`)},D.prototype._evaluateRegExpNotMatch=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(t instanceof RegExp&&"string"===typeof a)return!t.test(a);if(a instanceof RegExp&&"string"===typeof t)return!a.test(t);throw new c["a"](`Operator "!~" requires one RegExp argument and one string argument. Arguments are ${t} and ${a}.`)},D.prototype._evaluateRegExpExec=function(e){const t=this._left.evaluate(e),a=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"===typeof a))throw new c["a"](`RegExp.exec requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${a}.`);const n=t.exec(a);return Object(s["a"])(n)?n[1]:null},D.prototype._evaluateToString=function(e){const t=this._left.evaluate(e);if(t instanceof RegExp||t instanceof n["a"]||t instanceof r["a"]||t instanceof i["a"])return String(t);throw new c["a"](`Unexpected function call "${this._value}".`)},m.NULL_SENTINEL="czm_infinity",D.prototype.getShaderExpression=function(e,t,a){let n,r,i,u;const l=this._type;let f,h,p,_=this._value;switch(Object(s["a"])(this._left)&&(r=Array.isArray(this._left)?fe(this._left,e,t,this):this._left.getShaderExpression(e,t,this)),Object(s["a"])(this._right)&&(i=this._right.getShaderExpression(e,t,this)),Object(s["a"])(this._test)&&(u=this._test.getShaderExpression(e,t,this)),Array.isArray(this._value)&&(_=fe(this._value,e,t,this)),l){case d.VARIABLE:if(ie(this))return;return he(_,e);case d.UNARY:if("Boolean"===_)return`bool(${r})`;if("Number"===_)return`float(${r})`;if("round"===_)return`floor(${r} + 0.5)`;if(Object(s["a"])(O[_]))return`${_}(${r})`;if("isNaN"===_)return`(${r} != ${r})`;if("isFinite"===_)return`(abs(${r}) < czm_infinity)`;if("String"===_||"isExactClass"===_||"isClass"===_||"getExactClassName"===_)throw new c["a"](`Error generating style shader: "${_}" is not supported.`);return _+r;case d.BINARY:return"%"===_?`mod(${r}, ${i})`:"==="===_?`(${r} == ${i})`:"!=="===_?`(${r} != ${i})`:"atan2"===_?`atan(${r}, ${i})`:Object(s["a"])(A[_])?`${_}(${r}, ${i})`:`(${r} ${_} ${i})`;case d.TERNARY:if(Object(s["a"])(L[_]))return`${_}(${r}, ${i}, ${u})`;break;case d.CONDITIONAL:return`(${u} ? ${r} : ${i})`;case d.MEMBER:return ie(this._left)?he(i,e):"r"===i||"x"===i||"0.0"===i?r+"[0]":"g"===i||"y"===i||"1.0"===i?r+"[1]":"b"===i||"z"===i||"2.0"===i?r+"[2]":"a"===i||"w"===i||"3.0"===i?r+"[3]":`${r}[int(${i})]`;case d.FUNCTION_CALL:throw new c["a"](`Error generating style shader: "${_}" is not supported.`);case d.ARRAY:if(4===_.length)return`vec4(${_[0]}, ${_[1]}, ${_[2]}, ${_[3]})`;if(3===_.length)return`vec3(${_[0]}, ${_[1]}, ${_[2]})`;if(2===_.length)return`vec2(${_[0]}, ${_[1]})`;throw new c["a"]("Error generating style shader: Invalid array length. Array length should be 2, 3, or 4.");case d.REGEX:throw new c["a"]("Error generating style shader: Regular expressions are not supported.");case d.VARIABLE_IN_STRING:throw new c["a"]("Error generating style shader: Converting a variable to a string is not supported.");case d.LITERAL_NULL:return m.NULL_SENTINEL;case d.LITERAL_BOOLEAN:return _?"true":"false";case d.LITERAL_NUMBER:return ue(_);case d.LITERAL_STRING:if(Object(s["a"])(a)&&a._type===d.MEMBER&&("r"===_||"g"===_||"b"===_||"a"===_||"x"===_||"y"===_||"z"===_||"w"===_||ie(a._left)))return _;if(n=o["a"].fromCssColorString(_,E),Object(s["a"])(n))return ce(n);throw new c["a"]("Error generating style shader: String literals are not supported.");case d.LITERAL_COLOR:if(f=r,"color"===_){if(!Object(s["a"])(f))return"vec4(1.0)";if(f.length>1){const e=f[0],a=f[1];return"1.0"!==a&&(t.translucent=!0),`vec4(${e}, ${a})`}return`vec4(${f[0]}, 1.0)`}if("rgb"===_)return n=se(this),Object(s["a"])(n)?le(n):`vec4(${f[0]} / 255.0, ${f[1]} / 255.0, ${f[2]} / 255.0, 1.0)`;if("rgba"===_)return"1.0"!==f[3]&&(t.translucent=!0),n=se(this),Object(s["a"])(n)?le(n):`vec4(${f[0]} / 255.0, ${f[1]} / 255.0, ${f[2]} / 255.0, ${f[3]})`;if("hsl"===_)return n=oe(this),Object(s["a"])(n)?le(n):`vec4(czm_HSLToRGB(vec3(${f[0]}, ${f[1]}, ${f[2]})), 1.0)`;if("hsla"===_)return n=oe(this),Object(s["a"])(n)?(1!==n.alpha&&(t.translucent=!0),le(n)):("1.0"!==f[3]&&(t.translucent=!0),`vec4(czm_HSLToRGB(vec3(${f[0]}, ${f[1]}, ${f[2]})), ${f[3]})`);break;case d.LITERAL_VECTOR:h=r.length,p=_+"(";for(let e=0;e<h;++e)p+=r[e],e<h-1&&(p+=", ");return p+=")",p;case d.LITERAL_REGEX:throw new c["a"]("Error generating style shader: Regular expressions are not supported.");case d.LITERAL_UNDEFINED:return m.NULL_SENTINEL;case d.BUILTIN_VARIABLE:if("tiles3d_tileset_time"===_)return _}},D.prototype.getVariables=function(e,t){let a,n,r;const i=this._type,o=this._value;if(Object(s["a"])(this._left))if(Array.isArray(this._left))for(a=this._left,n=a.length,r=0;r<n;++r)a[r].getVariables(e,this);else this._left.getVariables(e,this);if(Object(s["a"])(this._right)&&this._right.getVariables(e,this),Object(s["a"])(this._test)&&this._test.getVariables(e,this),Array.isArray(this._value))for(a=this._value,n=a.length,r=0;r<n;++r)a[r].getVariables(e,this);let u;switch(i){case d.VARIABLE:ie(this)||e.push(o);break;case d.VARIABLE_IN_STRING:u=v.exec(o);while(null!==u)e.push(u[1]),u=v.exec(o);break;case d.LITERAL_STRING:Object(s["a"])(t)&&t._type===d.MEMBER&&ie(t._left)&&e.push(o);break}};t["a"]=m},"71af":function(e,t,a){"use strict";var n=a("535a"),r=a("2f63"),i=a("2720"),o=a("d4ed");function s(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT),this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;const t=o["a"].createIfNeeded(e.missingImageUrl),a=this;function s(t){Object(r["a"])(t.blob)&&(a._missingImageByteLength=t.blob.size);let n=Object(i["a"])(t);if(e.disableCheckIfAllPixelsAreTransparent){let a=!0;const r=t.width,i=e.pixelsToCheck;for(let e=0,t=i.length;a&&e<t;++e){const t=i[e],o=4*t.x+t.y*r,s=n[o+3];s>0&&(a=!1)}a&&(n=void 0)}a._missingImagePixels=n,a._isReady=!0}function u(){a._missingImagePixels=void 0,a._isReady=!0}t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then(s).catch(u)}s.prototype.isReady=function(){return this._isReady},s.prototype.shouldDiscardImage=function(e){const t=this._pixelsToCheck,a=this._missingImagePixels;if(!Object(r["a"])(a))return!1;if(Object(r["a"])(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;const n=Object(i["a"])(e),o=e.width;for(let r=0,i=t.length;r<i;++r){const e=t[r],i=4*e.x+e.y*o;for(let t=0;t<4;++t){const e=i+t;if(n[e]!==a[e])return!1}}return!0},t["a"]=s},"81e1":function(e,t,a){"use strict";var n=a("cef5"),r=a("be18"),i=a("abab"),o=a("2f63"),s=a("5e57"),u=a("d2c7"),c=a("81d7"),l=a("713f"),f=a("1b8d"),h=a("8b68"),d=a("a894"),m=a("d289"),p=a("6dc0"),_=a("e90c"),g=a("5770"),v=a("7c5e"),y=a("9182"),b=a("9c6c"),w=a("a307"),E=a("535a"),O=a("c52f");function A(e){this._rs=void 0,this._sp=void 0,this._va=void 0,this._command=void 0,this._mode=void 0,this._useLogDepth=!1,this._ellipsoidOffset=Object(E["a"])(e,0)}const L=s["a"].supportsTypedArrays()?new Float32Array(12):[],C=new r["a"],x=new r["a"],R=new r["a"],I=new r["a"],S=new r["a"];function T(e,t){const a=e.radii,n=t.camera;let i,o,s;if(n.frustum instanceof l["a"])i=r["a"].ZERO,o=n.rightWC,s=n.upWC;else{const t=n.positionWC,a=r["a"].multiplyComponents(e.oneOverRadii,t,C),u=r["a"].normalize(a,x),c=r["a"].normalize(r["a"].cross(r["a"].UNIT_Z,a,R),R),l=r["a"].normalize(r["a"].cross(u,c,I),I),f=r["a"].magnitude(a),h=Math.sqrt(f*f-1);i=r["a"].multiplyByScalar(u,1/f,C);const d=h/f;o=r["a"].multiplyByScalar(c,d,x),s=r["a"].multiplyByScalar(l,d,R)}const u=r["a"].add(i,s,S);r["a"].subtract(u,o,u),r["a"].multiplyComponents(a,u,u),r["a"].pack(u,L,0);const c=r["a"].subtract(i,s,S);r["a"].subtract(c,o,c),r["a"].multiplyComponents(a,c,c),r["a"].pack(c,L,3);const f=r["a"].add(i,s,S);r["a"].add(f,o,f),r["a"].multiplyComponents(a,f,f),r["a"].pack(f,L,6);const h=r["a"].subtract(i,s,S);return r["a"].add(h,o,h),r["a"].multiplyComponents(a,h,h),r["a"].pack(h,L,9),L}A.prototype.update=function(e){if(this._mode=e.mode,e.mode!==w["a"].SCENE3D)return;const t=e.context,a=e.mapProjection.ellipsoid.radii,s=new O["a"](a.x+this._ellipsoidOffset,a.y+this._ellipsoidOffset,a.z+this._ellipsoidOffset),l=e.useLogDepth;if(Object(o["a"])(this._command)||(this._rs=p["a"].fromCache({cull:{enabled:!0},depthTest:{enabled:!0},colorMask:{red:!1,green:!1,blue:!1,alpha:!1}}),this._command=new d["a"]({renderState:this._rs,boundingVolume:new n["a"](r["a"].ZERO,s.maximumRadius),pass:m["a"].OPAQUE,owner:this})),!Object(o["a"])(this._sp)||this._useLogDepth!==l){this._useLogDepth=l;const e=new g["a"]({sources:[b["a"]]}),a=new g["a"]({sources:[y["a"]]});if(l){const t="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";a.sources.push(t),a.defines.push("LOG_DEPTH"),e.defines.push("LOG_DEPTH")}this._sp=_["a"].replaceCache({shaderProgram:this._sp,context:t,vertexShaderSource:e,fragmentShaderSource:a,attributeLocations:{position:0}}),this._command.shaderProgram=this._sp}const E=T(s,e);if(Object(o["a"])(this._va))this._va.getAttribute(0).vertexBuffer.copyFromArrayView(E);else{const e=new u["a"]({attributes:{position:new c["a"]({componentDatatype:i["a"].FLOAT,componentsPerAttribute:3,values:E})},indices:[0,1,2,2,1,3],primitiveType:f["a"].TRIANGLES});this._va=v["a"].fromGeometry({context:t,geometry:e,attributeLocations:{position:0},bufferUsage:h["a"].DYNAMIC_DRAW}),this._command.vertexArray=this._va}},A.prototype.execute=function(e,t){this._mode===w["a"].SCENE3D&&this._command.execute(e,t)},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){this._sp=this._sp&&this._sp.destroy(),this._va=this._va&&this._va.destroy()},t["a"]=A},"8e47":function(e,t,a){"use strict";var n=a("bd8d"),r=a("a894"),i=a("5770"),o=a("e90c"),s=a("2f63");function u(){this._cachedShowFrustumsShaders={}}function c(e){const t={},a=e.vertexAttributes;for(const n in a)a.hasOwnProperty(n)&&(t[n]=a[n].index);return t}function l(e,t){const a=e.context,n=t,r=n.fragmentShaderSource.clone(),s=[];r.sources=r.sources.map((function(e){e=i["a"].replaceMain(e,"czm_Debug_main");const t=/gl_FragData\[(\d+)\]/g;let a;while(null!==(a=t.exec(e)))-1===s.indexOf(a[1])&&s.push(a[1]);return e}));const u=s.length;let l,f="";if(f+="uniform vec3 debugShowCommandsColor;\n",f+="uniform vec3 debugShowFrustumsColor;\n",f+="void main() \n{ \n    czm_Debug_main(); \n",u>0)for(l=0;l<u;++l)f+=`    gl_FragData[${s[l]}].rgb *= debugShowCommandsColor;\n`,f+=`    gl_FragData[${s[l]}].rgb *= debugShowFrustumsColor;\n`;else f+="    gl_FragColor.rgb *= debugShowCommandsColor;\n",f+="    gl_FragColor.rgb *= debugShowFrustumsColor;\n";f+="}",r.sources.push(f);const h=c(n);return o["a"].fromCache({context:a,vertexShaderSource:n.vertexShaderSource,fragmentShaderSource:r,attributeLocations:h})}const f=new n["a"];function h(e,t){let a;return a=Object(s["a"])(t.uniformMap)?t.uniformMap:{},Object(s["a"])(a.debugShowCommandsColor)||Object(s["a"])(a.debugShowFrustumsColor)||(a.debugShowCommandsColor=function(){return e.debugShowCommands?(Object(s["a"])(t._debugColor)||(t._debugColor=n["a"].fromRandom()),t._debugColor):n["a"].WHITE},a.debugShowFrustumsColor=function(){return e.debugShowFrustums?(f.red=1&t.debugOverlappingFrustums?1:0,f.green=2&t.debugOverlappingFrustums?1:0,f.blue=4&t.debugOverlappingFrustums?1:0,f.alpha=1,f):n["a"].WHITE}),a}const d=new r["a"];u.prototype.executeDebugShowFrustumsCommand=function(e,t,a){const n=t.shaderProgram.id;let i=this._cachedShowFrustumsShaders[n];Object(s["a"])(i)||(i=l(e,t.shaderProgram),this._cachedShowFrustumsShaders[n]=i);const o=r["a"].shallowClone(t,d);o.shaderProgram=i,o.uniformMap=h(e,t),o.execute(e.context,a)},t["a"]=u},"9cff":function(e,t,a){"use strict";var n=a("2f63"),r=a("7d62"),i=a("93da"),o=a("df07"),s=a("0260");function u(e){this._scene=e,this._lastAlpha=void 0,this._lastBeta=void 0,this._lastGamma=void 0,this._alpha=void 0,this._beta=void 0,this._gamma=void 0;const t=this;function a(e){const a=e.alpha;if(!Object(n["a"])(a))return t._alpha=void 0,t._beta=void 0,void(t._gamma=void 0);t._alpha=i["a"].toRadians(a),t._beta=i["a"].toRadians(e.beta),t._gamma=i["a"].toRadians(e.gamma)}window.addEventListener("deviceorientation",a,!1),this._removeListener=function(){window.removeEventListener("deviceorientation",a,!1)}}const c=new s["a"],l=new s["a"],f=new o["a"];function h(e,t,a,n){const r=e.direction,i=e.right,u=e.up,h=s["a"].fromAxisAngle(r,a,l),d=s["a"].fromAxisAngle(i,n,c),m=s["a"].multiply(d,h,d),p=s["a"].fromAxisAngle(u,t,l);s["a"].multiply(p,m,m);const _=o["a"].fromQuaternion(m,f);o["a"].multiplyByVector(_,i,i),o["a"].multiplyByVector(_,u,u),o["a"].multiplyByVector(_,r,r)}u.prototype.update=function(){if(!Object(n["a"])(this._alpha))return;Object(n["a"])(this._lastAlpha)||(this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma);const e=this._lastAlpha-this._alpha,t=this._lastBeta-this._beta,a=this._lastGamma-this._gamma;h(this._scene.camera,-e,t,a),this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._removeListener(),Object(r["a"])(this)},t["a"]=u},c872:function(e,t,a){"use strict";var n=a("7d62");function r(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(r.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(e){}},batchTable:{get:function(){}},group:{get:function(){},set:function(e){}}}),r.prototype.hasProperty=function(e,t){return!1},r.prototype.getFeature=function(e){},r.prototype.applyDebugSettings=function(e,t){},r.prototype.applyStyle=function(e){},r.prototype.update=function(e,t){},r.prototype.isDestroyed=function(){return!1},r.prototype.destroy=function(){return Object(n["a"])(this)},t["a"]=r},c965:function(e,t,a){"use strict";var n=a("be18"),r=a("bd8d"),i=a("9541"),o=a("535a"),s=a("2f63"),u=a("7d62"),c=a("8d4e"),l=a("797c"),f=a("d940"),h=a("df07"),d=a("713f"),m=a("c34a"),p=a("4e1a"),_=a("4dc8"),g=a("0260"),v=a("3a8e"),y=a("894b");function b(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._camera=e.camera,this._frustumSplits=e.frustumSplits,this._color=Object(o["a"])(e.color,r["a"].CYAN),this._updateOnChange=Object(o["a"])(e.updateOnChange,!0),this.show=Object(o["a"])(e.show,!0),this.id=e.id,this._id=void 0,this._outlinePrimitives=[],this._planesPrimitives=[]}const w=new n["a"],E=new h["a"],O=new g["a"],A=new p["a"],L=new _["a"],C=new d["a"],x=new m["a"],R=new r["a"],I=[1,1e5];b.prototype.update=function(e){if(!this.show)return;const t=this._planesPrimitives,a=this._outlinePrimitives;let o,u;if(this._updateOnChange){for(u=t.length,o=0;o<u;++o)a[o]=a[o]&&a[o].destroy(),t[o]=t[o]&&t[o].destroy();t.length=0,a.length=0}if(0===t.length){const e=this._camera,u=e.frustum;let m,b;m=u instanceof p["a"]?A:u instanceof _["a"]?L:u instanceof d["a"]?C:x,m=u.clone(m);let S=this._frustumSplits;!Object(s["a"])(S)||S.length<=1?(S=I,S[0]=this._camera.frustum.near,S[1]=this._camera.frustum.far,b=1):b=S.length-1;const T=e.positionWC,N=e.directionWC,$=e.upWC;let P=e.rightWC;P=n["a"].negate(P,w);const j=E;h["a"].setColumn(j,0,P,j),h["a"].setColumn(j,1,$,j),h["a"].setColumn(j,2,N,j);const M=g["a"].fromRotationMatrix(j,O);for(t.length=a.length=b,o=0;o<b;++o)m.near=S[o],m.far=S[o+1],t[o]=new y["a"]({geometryInstances:new f["a"]({geometry:new c["a"]({origin:T,orientation:M,frustum:m,_drawNearPlane:0===o}),attributes:{color:i["a"].fromColor(r["a"].fromAlpha(this._color,.1,R))},id:this.id,pickPrimitive:this}),appearance:new v["a"]({translucent:!0,flat:!0}),asynchronous:!1}),a[o]=new y["a"]({geometryInstances:new f["a"]({geometry:new l["a"]({origin:T,orientation:M,frustum:m,_drawNearPlane:0===o}),attributes:{color:i["a"].fromColor(this._color)},id:this.id,pickPrimitive:this}),appearance:new v["a"]({translucent:!1,flat:!0}),asynchronous:!1})}for(u=t.length,o=0;o<u;++o)a[o].update(e),t[o].update(e)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){const e=this._planesPrimitives.length;for(let t=0;t<e;++t)this._outlinePrimitives[t]=this._outlinePrimitives[t]&&this._outlinePrimitives[t].destroy(),this._planesPrimitives[t]=this._planesPrimitives[t]&&this._planesPrimitives[t].destroy();return Object(u["a"])(this)},t["a"]=b},ed8b:function(e,t,a){"use strict";var n=a("2f63"),r=a("a894"),i=a("6dc0"),o=a("5770");function s(){}const u=/\bgl_FragDepthEXT\b/,c=/\bdiscard\b/;function l(e,t){let a=e.shaderCache.getDerivedShaderProgram(t,"depthOnly");if(!Object(n["a"])(a)){const n=t._attributeLocations;let r,i=t.fragmentShaderSource,s=!1;const l=i.sources;let f=l.length;for(r=0;r<f;++r)if(u.test(l[r])||c.test(l[r])){s=!0;break}let h=!1;const d=i.defines;for(f=d.length,r=0;r<f;++r)if("LOG_DEPTH"===d[r]){h=!0;break}let m;s||h?!s&&h&&(m="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\nvoid main() \n{ \n    gl_FragColor = vec4(1.0); \n    czm_writeLogDepth(); \n} \n",i=new o["a"]({defines:["LOG_DEPTH"],sources:[m]})):(m="void main() \n{ \n    gl_FragColor = vec4(1.0); \n} \n",i=new o["a"]({sources:[m]})),a=e.shaderCache.createDerivedShaderProgram(t,"depthOnly",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:n})}return a}function f(e,t){const a=e._depthOnlyRenderStateCache;let r=a[t.id];if(!Object(n["a"])(r)){const e=i["a"].getState(t);e.depthMask=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1},r=i["a"].fromCache(e),a[t.id]=r}return r}s.createDepthOnlyDerivedCommand=function(e,t,a,i){let o,s;return Object(n["a"])(i)||(i={}),Object(n["a"])(i.depthOnlyCommand)&&(o=i.depthOnlyCommand.shaderProgram,s=i.depthOnlyCommand.renderState),i.depthOnlyCommand=r["a"].shallowClone(t,i.depthOnlyCommand),Object(n["a"])(o)&&i.shaderProgramId===t.shaderProgram.id?(i.depthOnlyCommand.shaderProgram=o,i.depthOnlyCommand.renderState=s):(i.depthOnlyCommand.shaderProgram=l(a,t.shaderProgram),i.depthOnlyCommand.renderState=f(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i};const h=/\s+czm_writeLogDepth\(/,d=/\s+czm_vertexLogDepth\(/,m=/\s*#extension\s+GL_EXT_frag_depth\s*:\s*enable/;function p(e,t){let a=e.shaderCache.getDerivedShaderProgram(t,"logDepth");if(!Object(n["a"])(a)){const r=t._attributeLocations,i=t.vertexShaderSource.clone(),s=t.fragmentShaderSource.clone();let u,c;i.defines=Object(n["a"])(i.defines)?i.defines.slice(0):[],i.defines.push("LOG_DEPTH"),s.defines=Object(n["a"])(s.defines)?s.defines.slice(0):[],s.defines.push("LOG_DEPTH");let l=!1,f=i.sources,p=f.length;for(u=0;u<p;++u)if(d.test(f[u])){l=!0;break}if(!l){for(u=0;u<p;++u)f[u]=o["a"].replaceMain(f[u],"czm_log_depth_main");c="\n\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_vertexLogDepth(); \n} \n",f.push(c)}for(f=s.sources,p=f.length,l=!1,u=0;u<p;++u)h.test(f[u])&&(l=!0);-1!==s.defines.indexOf("LOG_DEPTH_WRITE")&&(l=!0);let _=!0;for(u=0;u<p;++u)m.test(f[u])&&(_=!1);let g="";if(_&&(g+="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n"),!l){for(u=0;u<p;u++)f[u]=o["a"].replaceMain(f[u],"czm_log_depth_main");g+="\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_writeLogDepth(); \n} \n"}f.push(g),a=e.shaderCache.createDerivedShaderProgram(t,"logDepth",{vertexShaderSource:i,fragmentShaderSource:s,attributeLocations:r})}return a}function _(e,t,a){let r=e.shaderCache.getDerivedShaderProgram(t,"pick");if(!Object(n["a"])(r)){const n=t._attributeLocations;let i=t.fragmentShaderSource;const s=i.sources,u=s.length,c=`void main() \n{ \n    czm_non_pick_main(); \n    if (gl_FragColor.a == 0.0) { \n        discard; \n    } \n    gl_FragColor = ${a}; \n} \n`,l=new Array(u+1);for(let e=0;e<u;++e)l[e]=o["a"].replaceMain(s[e],"czm_non_pick_main");l[u]=c,i=new o["a"]({sources:l,defines:i.defines}),r=e.shaderCache.createDerivedShaderProgram(t,"pick",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:n})}return r}function g(e,t){const a=e.picking.pickRenderStateCache;let r=a[t.id];if(!Object(n["a"])(r)){const e=i["a"].getState(t);e.blending.enabled=!1,e.depthMask=!0,r=i["a"].fromCache(e),a[t.id]=r}return r}function v(e,t){let a=e.shaderCache.getDerivedShaderProgram(t,"HDR");if(!Object(n["a"])(a)){const r=t._attributeLocations,i=t.vertexShaderSource.clone(),o=t.fragmentShaderSource.clone();i.defines=Object(n["a"])(i.defines)?i.defines.slice(0):[],i.defines.push("HDR"),o.defines=Object(n["a"])(o.defines)?o.defines.slice(0):[],o.defines.push("HDR"),a=e.shaderCache.createDerivedShaderProgram(t,"HDR",{vertexShaderSource:i,fragmentShaderSource:o,attributeLocations:r})}return a}s.createLogDepthCommand=function(e,t,a){let i;return Object(n["a"])(a)||(a={}),Object(n["a"])(a.command)&&(i=a.command.shaderProgram),a.command=r["a"].shallowClone(e,a.command),Object(n["a"])(i)&&a.shaderProgramId===e.shaderProgram.id?a.command.shaderProgram=i:(a.command.shaderProgram=p(t,e.shaderProgram),a.shaderProgramId=e.shaderProgram.id),a},s.createPickDerivedCommand=function(e,t,a,i){let o,s;return Object(n["a"])(i)||(i={}),Object(n["a"])(i.pickCommand)&&(o=i.pickCommand.shaderProgram,s=i.pickCommand.renderState),i.pickCommand=r["a"].shallowClone(t,i.pickCommand),Object(n["a"])(o)&&i.shaderProgramId===t.shaderProgram.id?(i.pickCommand.shaderProgram=o,i.pickCommand.renderState=s):(i.pickCommand.shaderProgram=_(a,t.shaderProgram,t.pickId),i.pickCommand.renderState=g(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i},s.createHdrCommand=function(e,t,a){let i;return Object(n["a"])(a)||(a={}),Object(n["a"])(a.command)&&(i=a.command.shaderProgram),a.command=r["a"].shallowClone(e,a.command),Object(n["a"])(i)&&a.shaderProgramId===e.shaderProgram.id?a.command.shaderProgram=i:(a.command.shaderProgram=v(t,e.shaderProgram),a.shaderProgramId=e.shaderProgram.id),a},t["a"]=s}}]);